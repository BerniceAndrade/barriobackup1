define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/markers",["jquery","underscore","backbone","models/marker"],function(e,r,n,o){"use strict";var c=n.Collection.extend({model:o});return c});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/app",["jquery","underscore","backbone","routes/router","models/issue"],function(e,n,o,i,r){"use strict";var s=o.Model.extend({initialize:function(e){var n=new r({config:e.config});new i({routes:e.config.pages.routes,config:e.config,issue:n})}});return s});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl"],function(e,t,n,r,i,o,s){"use strict";var l=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,marker:null},select:function(){this.trigger("active")},unselect:function(){this.trigger("inactive")},geojson:function(){var e="{}";try{var t=this.get("xml"),n=this.xml2html(t,s,{},"text");e=JSON.parse(n)}catch(r){throw new Error("Failed to parse to json: "+r.toString())}return e}});return t.extend(l.prototype,r),t.extend(l.prototype,i),t.extend(l.prototype,o),l});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,i,n,c,l){"use strict";var r=i.Model.extend({initialize:function(i){var l=this;l.$def=e.Deferred();var r=i.config.articles.pathBase;r.match(/\/$/)||(r+="/");var a=i.config.articles.files,o=new c;l.config=i.config,l.set("collection",o);var s=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){s[t]=new n({articleid:t,articledir:r,path:r+e})});var f=t.map(s,function(e){return e.init()});e.when({},f).fail(function(){l.$def.reject()}),e.when.apply(null,f).done(function(){o.add(s),l.on("select",function(e){l._selectArticle(e)}),l.$def.resolve(l)}),e.when.apply(null,f).always(function(){t.forEach(f,function(e){"rejected"===e.state()&&l.$def.reject()}),l.$def.resolve(l)})},defaults:{activeArticle:null},_selectArticle:function(e){var t,i=this,n=i.get("collection");if("object"==typeof e)t=e;else{if("number"!=typeof e&&"string"!=typeof e)throw"Bad argument to models/issue";t=n.at(e)}(null===this.get("activeArticle")||this.get("activeArticle")!=e)&&(this.get("activeArticle")&&this.get("activeArticle").unselect(),i.set("activeArticle",t),t.init().done(function(){i.trigger("update",t),t.select()}))}});return t.extend(r.prototype,l),r});
define("models/map",["jquery","underscore","backbone","collections/markers","models/marker","mixins/asyncInit"],function(e,n,o,i,r,t){"use strict";var s=o.Model.extend({initialize:function(n){var o=this;if(o.$def=e.Deferred(),o.issue=n.issue,void 0===o.issue)throw new Error("Missing issue model in map model");if(o.set("router",n.router),!n.router)throw new Error("No router in MapModel");var i=e.Deferred();e.getJSON(n.config.map.config,function(e){o.set("mapconfig",e),i.resolve()}).fail(function(e,n,o){i.reject(),console.log("Failed to load map config file: "+o)}),e.when.apply({},[o.issue.init(),i]).done(function(){o._makeCollection(o.issue.get("collection").models,{success:function(){o.$def.resolve(o)},fail:function(){o.$def.reject()}})}).fail(function(){o.$def.reject()}).always(function(){o.$def.reject()})},defaults:{mapconfig:{}},_makeCollection:function(o,t){var s=this,c=[],f=new i;s.set("collection",f);var a=n.map(n.range(o.length),function(){return void 0}),u=!1,l="";o.forEach(function(n,o){var i=e.Deferred();c.push(i),n.init().done(function(){var e;try{e=new r({issue:s.issue,article:n,json:n.geojson(),router:s.router})}catch(t){return u=!0,l+="\n"+t.toString(),void i.resolve()}a[o]=e,i.resolve()})}),e.when.apply({},c).done(function(){if(f.add(a),u)throw new Error(l);t.success()}).fail(function(){t.fail()})}});return n.extend(s.prototype,t),s});
define("models/marker",["jquery","underscore","backbone"],function(e,i,t){"use strict";var r=t.Model.extend({article:null,json:{},initialize:function(e){var i=this;i.app=e.app,i.article=e.article,i.router=e.router,e.issue.init().done(function(e){i.listenTo(i.article,"active",function(){i.trigger("active")})})}});return r});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","views/issue","views/map","views/menu"],function(e,i,r,s,t,n,a,o,u){var g=r.Router.extend({pages:{},config:{},issue:null,initialize:function(e){var s=this;this.config=e.config,this.pages=e.config.pages,this.issue=e.issue,this.issue.init().done(function(){i.has(s.pages.router,"history")&&s.pages.router.history&&r.history.start()})},navigate:function(e,i){r.history.fragment!==e&&r.history.navigate(e,i)},page:function(e){var r,s=this;try{if(e||(e=this.pages.home),r=this.pages.pages[e],void 0===r)throw new Error("Missing config in router/page")}catch(t){return this.page("404")}(new n).render(),i.each(r,function(r){var t,n={config:s.config,issue:s.issue,router:s},a=JSON.parse(JSON.stringify(r));if(i.has(a,"view"))t=a.view;else{if(!i.has(a,"partial")){if(i.has(a,"full"))return void(window.location.href=a.full.page);throw new Error("Unsupported page type in router: "+e)}t="views/partial",a.partial.page=s.pages.pathBase+a.partial.page,n=i.extend(n,a.partial)}require([t],function(e){var i=new e(n);i.render()})})},article:function(i){e("#titlepage").remove();var r=this,s={config:r.config,issue:r.issue,router:r};if(0===e("#issue").length){var t=new a(s);t.render()}if(0===e("#map").length){var n=new o(s);n.render()}if(0===e("#menu").children().length){var g=new u(s);g.render()}r.issue.trigger("select",i)}});return g});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","mixins/domwatcher","mixins/xml2html","text!xsl/article.xsl","text!partials/popover.html","text!partials/popover-content.html","slidesjs"],function(e,t,i,s,r,o,l,n){"use strict";var a=i.View.extend({id:"article",initialize:function(e){var t=this;t.config=e.config},render:function(){var t=this;t.$el=e("#"+t.id);var i=this.xml2html(this.model.get("xml"),o,{"article-dir":t.config.articles.pathBase});try{e(".article-content").remove(),e("#"+this.id).append(i)}catch(s){console.log("article load error: "+s.toString())}if(0===e("img.slidesjs-slide").length)e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer");else try{t.postprocess()}catch(s){throw new Error("Failed to handle article images")}return t},remove:function(){},postprocess:function(){var i=this,s=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:s});var r=t.template(n);e("img.slidesjs-slide").each(function(t,i){var s=i.getAttribute("id"),o=e(".popover."+s).remove(),n=o.find(".head").text();e(i).attr("alt",o.find(".desc").text());var a=r({attr:o.find(".attr").text()});e(i).popover({container:"body",html:!0,content:a,title:n,template:l,trigger:"hover",placement:"left"})});var o=[];return i.$el.find("img.slidesjs-slide").each(function(t,i){var s=e.Deferred();e(i).load(function(){e(i).removeClass("remove"),s.resolve()}),e(i).error(function(){window.setTimeout(function(){s.reject()},500)}),o.push(s)}),e.when.apply({},o).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),e("#slides").slidesjs({navigation:{active:e("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:e("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(t){var i=e(".slidesjs-control").children(":eq("+(t-1)+")");i.css({visibility:"hidden"}),i.css({height:e(".slidesjs-container").height(),width:"auto"});var s=(e(".slidesjs-container").width()-i.width())/2;i.css({left:s}),i.css({visibility:"visible"})},start:function(t){e(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(t){var i=t-1,s=e(".slidesjs-control").children(":eq("+i+")");s.css({height:e(".slidesjs-container").height(),width:"auto",position:"relative"}),s.css({visibility:"visible"})}}})}),i}});return t.extend(a.prototype,s),t.extend(a.prototype,r),a});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,o){"use strict";var r=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.model=e.issue,i.model.on("update",function(e){i.select(e)})},render:function(){this.$el.remove(),e("body").append(n)},select:function(e){var i=this,t=new o({model:e,config:i.model.config,issue:i,router:i.model.router});e.on("active",t.render,t),e.on("inactive",t.remove,t)}});return r});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","models/map","views/marker"],function(e,n,o,t,i,r,a){"use strict";var p=o.View.extend({id:"map",tagName:"div",initialize:function(e){var n=this;n.config=e.config,n.model=new r(e),n.router=e.router},render:function(){var n=this;e("#"+n.id).children().length>0||(e("body").append(i),this.model.init().done(function(){var e=n.model.get("collection"),o=n.model.get("mapconfig"),i=new t.Map(o.id,o.map),r={},a=function(e){return e.lat.toString()+e.lng.toString()};n.configureMap(i,o,r,a),i.invalidateSize(),window.setTimeout(function(){e.forEach(function(e){n.addMarkerToMap(e,i,r,a,o)})},n.config.map.markerDelay)}))},configureMap:function(e,n,o,i){var r=new t.TileLayer(n.tileLayer.url,n.tileLayer.opts),a=t.control.scale(n.scale);e.setView(new t.LatLng(n.view.lat,n.view.lng),n.view.zoom),e.addLayer(r),a.addTo(e),e.on("popupopen",function(e){o[i(e.popup.getLatLng())]=-1!=navigator.userAgent.indexOf("Firefox")?!0:!0}),e.on("popupclose",function(e){o[i(e.popup.getLatLng())]=-1!=navigator.userAgent.indexOf("Firefox")?!1:!1})},addMarkerToMap:function(e,n,o,i,r){var p=this,c=e.get("json"),u=new a({model:e,router:p.router});u.render(),t.geoJson(c,{onEachFeature:function(n,a){var c=t.popup(r.features.popup);c.setContent(u.el),a.bindPopup(c),a.removeEventListener("click"),a.on("click",function(){e.trigger("active")}),a.on("mouseover",function(){p.config.map.hoverPopup&&(o[i(a.getLatLng())]||a.openPopup())}),e.on("active",function(e){o[i(a.getLatLng())]||a.openPopup()}),o[i(a.getLatLng())]=!1},pointToLayer:function(e,n){return t.marker(n,{icon:t.icon(r.features.icon),clickable:!!e.properties.text,title:e.properties.markername||"",opacity:r.features.opacity,riseOnHover:r.features.riseOnHover})}}).addTo(n)}});return p});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html"],function(e,t,r,i){"use strict";var l=r.View.extend({template:t.template(i),el:"",router:null,initialize:function(e){var t=this;t.router=e.router,t.model.on("active",function(){var e="article/"+t.model.article.get("articleid");t.router.navigate(e,{trigger:!0}),t.model.get("issue").trigger("select",t.model.get("article"))})},render:function(){this.$el.html(this.template({articleid:this.model.article.get("articleid"),geojson:this.model.article.geojson()}))}});return l});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,n,t,i,r,o){"use strict";var l=t.View.extend({template:n.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var t=this;if(0===e("#"+t.id).children().length){var i=this.config.menu,r=[],l={},c={};n.each(i,function(e){if(l[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=t.issue.get("collection")}}),n.each(n.keys(l),function(t){var i=e.Deferred();require(["text!"+t],function(e){l[t]=n.template(e),i.resolve()}),r.push(i.promise())});var a="";e.when.apply(e,r).done(function(){n.forEach(i,function(e,n){var t=e.partial;if("page"===e.type||"sep"===e.type)a+=l[t](e);else if("menu"===e.type){var i="";c[e.collection].models.forEach(function(n,t){var r=e.item.href.replace(":i",t),l=new o({model:n}),c=l.render({href:"#"+r});if("string"==typeof c)i+=c;else{if(!(c instanceof Element))throw new Error("Unsupported result type for submenu: "+c.toString());if("BODY"===c.nodeName)i+=c.innerHTML;else{if("LI"!==c.nodeName)throw new Error("Unsupported document element for submenu: "+c.toString());i+=c.outerHTML}}}),a+=l[t]({label:e.label,items:i})}})}).then(function(){e("#"+t.id).empty().append(t.template({content:a}));var n=e.Deferred();n.fail(function(){t.render()}),t.watchDOM(500,"#"+t.id,n)}).fail(function(){throw new Error("Failed to build menu.")})}}});return n.extend(l.prototype,r),l});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
require.config({paths:{text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",jquery:"//code.jquery.com/jquery-2.1.4.min",bootstrap:"//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","models/app","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var n=e("#main").attr("data-config");n?e.getJSON(n,function(e){try{{new a({model:new r({config:e})})}}catch(n){opts.config.debug||new o({model:new s({msg:n.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+n+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvbWFya2Vycy5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcHAuanMiLCJtb2RlbHMvYXJ0aWNsZS5qcyIsIm1vZGVscy9pc3N1ZS5qcyIsIm1vZGVscy9tYXAuanMiLCJtb2RlbHMvbWFya2VyLmpzIiwicm91dGVzL3JvdXRlci5qcyIsInZpZXdzL2FwcC5qcyIsInZpZXdzL2FydGljbGUuanMiLCJ2aWV3cy9jbGVhci5qcyIsInZpZXdzL2lzc3VlLmpzIiwidmlld3MvbWFwLmpzIiwidmlld3MvbWFya2VyLmpzIiwidmlld3MvbWVudS5qcyIsInZpZXdzL3BhZ2UuanMiLCJ2aWV3cy9wYXJ0aWFsLmpzIiwibW9kZWxzL2Vycm9yL3VzZXIuanMiLCJ2aWV3cy9hcnRpY2xlL21lbnUuanMiLCJ2aWV3cy9lcnJvci91c2VyLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCIkIiwiXyIsIkJhY2tib25lIiwiQXJ0aWNsZU1vZGVsIiwiQXJ0aWNsZXNDb2xsZWN0aW9uIiwiQ29sbGVjdGlvbiIsImV4dGVuZCIsIm1vZGVsIiwiTWFya2VyTW9kZWwiLCJNYXJrZXJzQ29sbGVjdGlvbiIsIkFzeW5jSW5pdCIsIiRkZWYiLCJpbml0IiwidGhpcyIsInByb21pc2UiLCJET01XYXRjaGVyIiwid2F0Y2hET00iLCJtcyIsInNlbCIsImxlbmd0aCIsImYiLCJkb2N1bWVudCIsImJvZHkiLCJvZmYiLCJyZXNvbHZlIiwib24iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwicmVqZWN0IiwiRmV0Y2hYTUwiLCJmZXRjaFhNTCIsInVybCIsIiRnZXQiLCJEZWZlcnJlZCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJYTUwySFRNTCIsIl9kb2MiLCJ4bWwiLCJ4bWxEb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJEb2N1bWVudCIsIkVycm9yIiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImVhY2giLCJrZXlzIiwia2V5Iiwic2V0UGFyYW1ldGVyIiwicmVzdWx0IiwiZG9jIiwidHJhbnNmb3JtVG9Eb2N1bWVudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJkb2N1bWVudEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImlubmVySFRNTCIsImUiLCJ0b1N0cmluZyIsIlJvdXRlciIsIklzc3VlTW9kZWwiLCJBcHBNb2RlbCIsIk1vZGVsIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJpc3N1ZSIsImNvbmZpZyIsInJvdXRlcyIsInBhZ2VzIiwiZ2VvSnNvblhzbCIsInRoYXQiLCJnZXQiLCJ3aGVuIiwiZG9uZSIsInNldCIsImZhaWwiLCJkZWZhdWx0cyIsIm1hcmtlciIsInNlbGVjdCIsInRyaWdnZXIiLCJ1bnNlbGVjdCIsImdlb2pzb24iLCJqc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwicHJvdG90eXBlIiwiQXJ0aWNsZUNvbGxlY3Rpb24iLCJhcmdzIiwiYXJ0ZGlyIiwiYXJ0aWNsZXMiLCJwYXRoQmFzZSIsIm1hdGNoIiwiZmlsZXMiLCJjb2wiLCJtYXAiLCJyYW5nZSIsInVuZGVmaW5lZCIsImZpbGUiLCJpIiwiYXJ0aWNsZWlkIiwiYXJ0aWNsZWRpciIsInBhdGgiLCJpbml0cyIsImFydGljbGUiLCJhcHBseSIsImFkZCIsIl9zZWxlY3RBcnRpY2xlIiwiYWx3YXlzIiwiZm9yRWFjaCIsIiRwcm9taXNlIiwic3RhdGUiLCJhY3RpdmVBcnRpY2xlIiwiYXJ0IiwiYXQiLCJNYXBNb2RlbCIsInJvdXRlciIsIiRjb25maWdEZWYiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiX21ha2VDb2xsZWN0aW9uIiwibW9kZWxzIiwibWFwY29uZmlnIiwiY2JzIiwiZGVmZXJyZWRzIiwibWFya2VycyIsImVycm9yTXNnIiwiJGFydERlZiIsInB1c2giLCJtbSIsImpzb24iLCJhcHAiLCJsaXN0ZW5UbyIsIlVzZXJFcnJvck1vZGVsIiwiVXNlckVycm9yVmlldyIsIkNsZWFyVmlldyIsIklzc3VlVmlldyIsIk1hcFZpZXciLCJNZW51VmlldyIsImhhcyIsImhpc3RvcnkiLCJzdGFydCIsIm5hdmlnYXRlIiwiZnJhZ21lbnQiLCJvcHRpb25zIiwicGFnZSIsInBhZ2VDb25maWciLCJob21lIiwicmVuZGVyIiwicGMiLCJ2aWV3TmFtZSIsImNvbmlmZyIsInN0cmluZ2lmeSIsInZpZXciLCJsb2NhdGlvbiIsImhyZWYiLCJmdWxsIiwicGFydGlhbCIsInJlcXVpcmUiLCJWaWV3IiwidiIsImlkIiwicmVtb3ZlIiwiaXN2IiwibXB2IiwiY2hpbGRyZW4iLCJtbnYiLCJBcHBWaWV3IiwiZWwiLCJyZXNpemUiLCJyZWxvYWQiLCJwb3BvdmVyVGVtcGwiLCJwb3BvdmVyQ29udGVudFRlbXAiLCJBcnRpY2xlVmlldyIsIiRlbCIsImh0bWwiLCJhcnRpY2xlLWRpciIsImFwcGVuZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwb3N0cHJvY2VzcyIsImhlaWdodCIsIm91dGVySGVpZ2h0IiwiY3NzIiwicGN0IiwidGVtcGxhdGUiLCJlbHQiLCJnZXRBdHRyaWJ1dGUiLCIkcG8iLCJ0aXRsZSIsImZpbmQiLCJ0ZXh0IiwiYXR0ciIsImNvbnRlbnQiLCJwb3BvdmVyIiwiY29udGFpbmVyIiwicGxhY2VtZW50IiwiZGVmcyIsImltZyIsImxvYWQiLCJzbGlkZXNqcyIsIm5hdmlnYXRpb24iLCJhY3RpdmUiLCJlZmZlY3QiLCJwYWdpbmF0aW9uIiwiZmFkZSIsInNwZWVkIiwiY3Jvc3NmYWRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJudW1iZXIiLCIkaW1nIiwidmlzaWJpbGl0eSIsIndpZHRoIiwibGVmdCIsImNvbXBsZXRlIiwibmV3SW1nIiwicG9zaXRpb24iLCJ0bXBsIiwiZW1wdHkiLCJhdiIsIkwiLCJtYXBQYXJ0aWFsIiwiTWFya2VyVmlldyIsInRhZ05hbWUiLCJNYXAiLCJvcGVucG9wdXAiLCJwb3B1cGlkIiwibGF0bG5nIiwibGF0IiwibG5nIiwiY29uZmlndXJlTWFwIiwiaW52YWxpZGF0ZVNpemUiLCJtYXJrZXJNb2RlbCIsImFkZE1hcmtlclRvTWFwIiwibWFya2VyRGVsYXkiLCJ0aWxlbGF5ZXIiLCJUaWxlTGF5ZXIiLCJ0aWxlTGF5ZXIiLCJzY2FsZSIsImNvbnRyb2wiLCJzZXRWaWV3IiwiTGF0TG5nIiwiem9vbSIsImFkZExheWVyIiwiYWRkVG8iLCJldnQiLCJwb3B1cCIsImdldExhdExuZyIsIm1hcmtlclZpZXciLCJnZW9Kc29uIiwib25FYWNoRmVhdHVyZSIsImZlYXR1cmUiLCJtYXBNYXJrZXIiLCJmZWF0dXJlcyIsInNldENvbnRlbnQiLCJiaW5kUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaG92ZXJQb3B1cCIsIm9wZW5Qb3B1cCIsImFydGlkIiwicG9pbnRUb0xheWVyIiwiaWNvbiIsImNsaWNrYWJsZSIsInByb3BlcnRpZXMiLCJtYXJrZXJuYW1lIiwib3BhY2l0eSIsInJpc2VPbkhvdmVyIiwibWVudVRtcGwiLCJBcnRpY2xlTWVudVZpZXciLCJpdGVtcyIsIm1lbnUiLCJwcm9taXNlcyIsInRlbXBsYXRlcyIsImNvbGxlY3Rpb25zIiwiaXRlbSIsImNvbGxlY3Rpb24iLCJ0ZW1wbCIsInN1YkNvbnRlbnQiLCJqIiwicmVwbGFjZSIsImFtdiIsIkVsZW1lbnQiLCJub2RlTmFtZSIsIm91dGVySFRNTCIsImxhYmVsIiwidGhlbiIsIiRmYWlsRGVmIiwiUGFnZVZpZXciLCJQYXJ0aWFsVmlldyIsIiR3YXRjaERlZiIsIm1zZyIsIm1lc3NhZ2UiLCJhbVhzbCIsIm1lbnVpdGVtIiwiYXR0cmlidXRlcyIsIm1vZGFsIiwia2V5Ym9hcmQiLCJzaG93IiwicGF0aHMiLCJqcXVlcnkiLCJib290c3RyYXAiLCJiYWNrYm9uZSIsInVuZGVyc2NvcmUiLCJsZWFmbGV0IiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwic2l0ZWNvbmZpZyIsImRlYnVnIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBTyx3QkFDSCxTQUNBLGFBQ0EsV0FDQSxrQkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTQyxHQUNyQixZQUNBLElBQUlDLEdBQXFCRixFQUFTRyxXQUFXQyxRQUN6Q0MsTUFBT0osR0FFWCxPQUFPQztBQ1ZYTCxPQUFPLHVCQUNILFNBQ0EsYUFDQSxXQUNBLGlCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNNLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBb0JQLEVBQVNHLFdBQVdDLFFBQ3hDQyxNQUFPQyxHQUVYLE9BQU9DO0FDVlhWLE9BQU8sb0JBQ0gsU0FDQSxjQUNELFNBQVNDLEVBQUVDLEdBQ1YsWUFDQSxJQUFJUyxJQUNFQyxLQUFNLEtBQ05DLEtBQU0sV0FDSixNQUFPQyxNQUFLRixLQUFLRyxXQUd6QixPQUFPSjtBQ1hYWCxPQUFPLHFCQUNILFVBQ0QsU0FBU0MsR0FDUixZQUNBLElBQUllLElBQ0FDLFNBQVcsU0FBU0MsRUFBR0MsRUFBSVAsR0FDdkIsSUFBS08sRUFBSyxLQUFNLDhCQUNoQixJQUFzQixJQUFsQmxCLEVBQUVrQixHQUFLQyxPQUFjLENBQ3JCLEdBQUlDLEdBQUksV0FDQXBCLEVBQUVrQixHQUFLQyxPQUFTLElBQ2hCbkIsRUFBRXFCLFNBQVNDLE1BQU1DLElBQUksa0JBQW1CSCxHQUN4Q1QsRUFBS2EsV0FHYnhCLEdBQUVxQixTQUFTQyxNQUFNRyxHQUFHLGtCQUFtQkwsR0FDdkNNLE9BQU9DLFdBQVcsV0FDZDNCLEVBQUVxQixTQUFTQyxNQUFNQyxJ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QyxVQUFVLEVBQU1DLE1BQU0sSUFDL0IvUyxPQUdmLE9BQU8ySTtBQ25CWHdCLFFBQVE3RixRQUNOME8sT0FDRTVHLEtBQVksZ0VBQ1o2RyxPQUFZLHFDQUNaQyxVQUFZLDZEQUNaQyxTQUFZLGtFQUNaQyxXQUFZLHNFQUNaQyxRQUFZLHlEQUNaeEcsU0FBWSxrRUFDWnlHLFNBQVksY0FDWjdRLElBQVksZ0JBQ1orQixNQUFZLFlBRWQrTyxNQUNFTCxXQUNFTSxNQUFPLFdBRVRMLFVBQ0lLLE1BQVMsU0FBVSxjQUNuQkMsUUFBVyxZQUVmTCxZQUNJSyxRQUFXLEtBRWZySCxNQUNJb0gsU0FFSjNHLFVBQ0kyRyxNQUFPLGNBSWZySixTQUNJLFNBQ0Esb0JBQ0EsbUJBQ0EsYUFDQSxZQUNBLGFBQ0QsU0FBU2hMLEVBQUV1SixFQUFlQyxFQUFjMUUsRUFBUzJHLEdBQ2hELFlBQ0EsSUFBSThJLEdBQWF2VSxFQUFFLFNBQVNrTixLQUFLLGNBQzdCcUgsR0FDQXZVLEVBQUVzSSxRQUFRaU0sRUFBWSxTQUFTQyxHQUMzQixJQUNJLENBQVUsR0FBSS9JLElBQ1ZsTCxNQUFPLEdBQUt1RSxJQUFVSyxPQUFRcVAsT0FFcEMsTUFBTzlQLEdBQ0FPLEtBQUtFLE9BQU9zUCxPQUNiLEdBQUlqTCxJQUNBakosTUFBTyxHQUFJZ0osSUFDUDhKLElBQUszTyxFQUFFQyxrQkFLeEJpQixLQUFLLFNBQVMyQyxFQUFPOUYsRUFBWUYsR0FDaEMsR0FBSWlILElBQ0FqSixNQUFPLEdBQUlnSixJQUNQOEosSUFBSyxvQ0FBc0NrQixFQUFhLEtBQU9oUyxRQUszRSxHQUFJaUgsSUFDQWpKLE1BQU8sR0FBSWdKLElBQ1A4SixJQUFLIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvYXJ0aWNsZXMnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBBcnRpY2xlTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIEFydGljbGVzQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL21hcmtlcnMnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvbWFya2VyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLE1hcmtlck1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJzQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IE1hcmtlck1vZGVsXG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBNYXJrZXJzQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9hc3luY0luaXQnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnXG5dLCBmdW5jdGlvbigkLF8pIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFzeW5jSW5pdCA9IHtcbiAgICAgICAgICAkZGVmOiBudWxsXG4gICAgICAgICwgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZGVmLnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jSW5pdDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9kb213YXRjaGVyJywgW1xuICAgICdqcXVlcnknIFxuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRE9NV2F0Y2hlciA9IHtcbiAgICAgICAgd2F0Y2hET00gOiBmdW5jdGlvbihtcyxzZWwsJGRlZikge1xuICAgICAgICAgICAgaWYgKCFzZWwpIHRocm93IFwiRW1wdHkgc2VsZWN0b3IgaW4gd2F0Y2hET00oKVwiO1xuICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJChzZWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0sIG1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBET01XYXRjaGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2ZldGNoeG1sJywgW1xuICAgICdqcXVlcnknXG5dLCBmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBGZXRjaFhNTCA9IHtcbiAgICAgICAgLy8gcmV0dXJuIGFuIG9iamVjdCBpbXBsZW1lbnRpbmcgdGhlIFByb21pc2UgaW50ZXJmYWNlXG4gICAgICAgIC8vIHdoZW4gc3VjY2Vzc2Z1bCwgdGhlIFByb21pc2UgcmV0dXJucyB0aGUgZGF0YSBmZXRjaGVkXG4gICAgICAgIC8vIGJ5IHRoZSBhamF4IHJlcXVlc3RcbiAgICAgICAgLy8gZGF0YSByZXR1cm5lZCBieSB0aGUgcHJvbWlzZSBpcyBhIERvY3VtZW50XG4gICAgICAgIGZldGNoWE1MIDogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICB2YXIgJGdldCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogICAgICB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd4bWwnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICRnZXQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgJGdldC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAkZ2V0LnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZldGNoWE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL3htbDJodG1sJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBYTUwySFRNTCA9IHtcbiAgICAgICAgX2RvYzogZnVuY3Rpb24oeG1sKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB4bWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4bWwsJ3RleHQveG1sJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHhtbCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0geG1sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgZG9jdW1lbnQgaW5wdXQgaW4gWE1MMkhUTUxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeG1sRG9jID09IG51bGwgfHwgKCF4bWxEb2MuaGFzT3duUHJvcGVydHkoJ2dldEVsZW1lbnRzQnlUYWdOYW1lJykgJiYgeG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXJzZXJlcnJvcicpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGRvY3VtZW50IGluIHhtbDJodG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhtbERvYztcbiAgICAgICAgfSxcbiAgICAgICAgLy8gcmV0dXJuIEhUTUwgb3IgSlNPTiBzdHJpbmcgZnJvbSBYU0xUIHRyYW5zZm9ybWF0aW9uXG4gICAgICAgIHhtbDJodG1sOiBmdW5jdGlvbih4bWwseHNsLHBhcmFtcyxtb2RlKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jID0gdGhpcy5fZG9jKHhtbCksXG4gICAgICAgICAgICAgICAgeHNsRG9jID0gdGhpcy5fZG9jKHhzbCk7XG4gICAgICAgICAgICB2YXIgeHNsdFByb2Nlc3NvciA9IG5ldyBYU0xUUHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB4c2x0UHJvY2Vzc29yLmltcG9ydFN0eWxlc2hlZXQoeHNsRG9jKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIF8uZWFjaChfLmtleXMocGFyYW1zKSwgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5zZXRQYXJhbWV0ZXIobnVsbCxrZXkscGFyYW1zW2tleV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHhzbHRQcm9jZXNzb3IudHJhbnNmb3JtVG9Eb2N1bWVudCh4bWxEb2MpO1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLzx0cmFuc2Zvcm1paXg6cmVzdWx0Pi4uLjwvdHJhbnNmb3JtaWl4OnJlc3VsdD5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID0gZG9jLmJvZHkuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaW4gWFNMVCB0cmFuc2Zvcm06ICcgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFhNTDJIVE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2FwcCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJyxcbiAgICAncm91dGVzL3JvdXRlcicsXG4gICAgJ21vZGVscy9pc3N1ZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxSb3V0ZXIsSXNzdWVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXBwTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgaXNzdWUgPSBuZXcgSXNzdWVNb2RlbCh7IGNvbmZpZzogb3B0cy5jb25maWcgfSk7XG4gICAgICAgICAgICBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgICAgICAgIHJvdXRlczogb3B0cy5jb25maWcucGFnZXMucm91dGVzXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IG9wdHMuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIGlzc3VlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcHBNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9mZXRjaHhtbCdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9nZW9qc29uLnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxGZXRjaFhNTCxBc3luY0luaXQsWE1MMkhUTUwsZ2VvSnNvblhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgJGdldCA9IHRoYXQuZmV0Y2hYTUwodGhhdC5nZXQoJ3BhdGgnKSk7XG4gICAgICAgICAgICAkLndoZW4oJGdldCkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3htbCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIC8vVE9ETzogJ3htbCc6IHNlcmlhbGl6ZT8gYW5kIGNhY2hlIHRvIGxvY2Fsc3RvcmFnZVxuICAgICAgICAgICAgLy8gYWRkIGFkYXB0ZXIgZm9yIGFjY2VzcyB0aHJvdWdoIC5hdHRyaWJ1dGVzXG4gICAgICAgICAgICBcInhtbFwiICAgOiBudWxsLCAgICAgLy8gRG9jdW1lbnRcbiAgICAgICAgICAgIFwibWFya2VyXCIgOiBudWxsICAgICAvLyBhc3NvY2lhdGVkIG1hcG1hcmtlciBvYmplY3QsIG5lZWRlZCBmb3IgVE9DIGxpbmthZ2VcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYWN0aXZlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHVuc2VsZWN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignaW5hY3RpdmUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2VvanNvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZ2VvanNvbiA9ICd7fSc7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB4bWwgPSB0aGlzLmdldCgneG1sJyk7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHhtbCwgZ2VvSnNvblhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgZ2VvanNvbiA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHRvIGpzb246IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZW9qc29uO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxGZXRjaFhNTCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2FydGljbGUnXG4gICAgLCAnY29sbGVjdGlvbnMvYXJ0aWNsZXMnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwsQXJ0aWNsZUNvbGxlY3Rpb24sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgYXJ0ZGlyICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlO1xuICAgICAgICAgICAgaWYgKCFhcnRkaXIubWF0Y2goL1xcLyQvKSkgYXJ0ZGlyICs9ICcvJztcbiAgICAgICAgICAgIHZhciBmaWxlcyAgID0gYXJncy5jb25maWcuYXJ0aWNsZXMuZmlsZXM7XG4gICAgICAgICAgICB2YXIgY29sICAgICA9IG5ldyBBcnRpY2xlQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIC8vIGZpeCBsZW5ndGggb2YgYXJ0aWNsZXMgYXJyYXlcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IF8ubWFwKF8ucmFuZ2UoZmlsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgLy8gYXJ0aWNsZXMgY29uc3RydWN0ZWQgc3luYywgc28gYXJ0aWNsZSBvYmplY3RzIGFkZGVkIHRvIGxpc3QgYnkgaW5kZXhcbiAgICAgICAgICAgIF8uZWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSxpKSB7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZXNbaV0gPSBuZXcgQXJ0aWNsZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgaSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWRpcjogYXJ0ZGlyLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAgICAgICBhcnRkaXIgKyBmaWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGluaXRzID0gXy5tYXAoYXJ0aWNsZXMsIGZ1bmN0aW9uKGFydGljbGUpe3JldHVybiBhcnRpY2xlLmluaXQoKTt9KTtcbiAgICAgICAgICAgIC8vIE5PVEU6IC5mYWlsKCkgaXMgbm90IGNhbGxlZDsgZmFpbHVyZSBpcyBoYW5kbGVkIGluIC5hbHdheXMoKVxuICAgICAgICAgICAgJC53aGVuKHt9LGluaXRzKS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsaW5pdHMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29sLmFkZChhcnRpY2xlcyk7XG4gICAgICAgICAgICAgICAgdGhhdC5vbignc2VsZWN0JywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9zZWxlY3RBcnRpY2xlKGFydGljbGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpbml0cywgZnVuY3Rpb24oJHByb21pc2Upe1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHByb21pc2Uuc3RhdGUoKSA9PT0gJ3JlamVjdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJhY3RpdmVBcnRpY2xlXCIgOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIC8vIHNob3cgYW4gYXJ0aWNsZSBhbmQgdGhlIGNvcnJlc3BvbmRpbmcgcGluXG4gICAgICAgIC8vIGFydGljbGUgbWF5IGJlIGVpdGhlciBhbiBpbmRleCBpbnRvIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHByb3ZpZGVkIGJ5IGEgdXJsKSBvciBhbiBBcnRpY2xlTW9kZWxcbiAgICAgICAgLy8gKGUuZy4sIHdoZW4gc2VsZWN0ZWQgYnkgYSBtYXAgbWFya2VyKVxuICAgICAgICBfc2VsZWN0QXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoYXQuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICB2YXIgYXJ0O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFydCA9IGFydGljbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJ0aWNsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBjb2wuYXQoYXJ0aWNsZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IFwiQmFkIGFyZ3VtZW50IHRvIG1vZGVscy9pc3N1ZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXZvaWQgdW4tIGFuZCByZS1yZW5kZXJpbmcgYW4gYWxyZWFkeS12aWV3ZWQgYXJ0aWNsZVxuICAgICAgICAgICAgaWYgKCh0aGlzLmdldCgnYWN0aXZlQXJ0aWNsZScpICE9PSBudWxsKSAmJlxuICAgICAgICAgICAgICAgICh0aGlzLmdldCgnYWN0aXZlQXJ0aWNsZScpID09ICBhcnRpY2xlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldCgnYWN0aXZlQXJ0aWNsZScpKSB0aGlzLmdldCgnYWN0aXZlQXJ0aWNsZScpLnVuc2VsZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ2FjdGl2ZUFydGljbGUnLCBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhpcyBpbnZvbHZlcyBhc3luYyBpbml0aWFsaXphdGlvblxuICAgICAgICAgICAgYXJ0LmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcigndXBkYXRlJywgYXJ0KTtcbiAgICAgICAgICAgICAgICBhcnQuc2VsZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKElzc3VlTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIElzc3VlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbGxlY3Rpb25zL21hcmtlcnMnXG4gICAgLCAnbW9kZWxzL21hcmtlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLE1hcmtlcnNDb2xsZWN0aW9uLE1hcmtlck1vZGVsLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgICA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIGlmICh0aGF0Lmlzc3VlID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBpc3N1ZSBtb2RlbCBpbiBtYXAgbW9kZWwnKTtcbiAgICAgICAgICAgIHRoYXQuc2V0KCdyb3V0ZXInLCBhcmdzLnJvdXRlcik7XG4gICAgICAgICAgICBpZiAoIWFyZ3Mucm91dGVyKSB0aHJvdyBuZXcgRXJyb3IoJ05vIHJvdXRlciBpbiBNYXBNb2RlbCcpO1xuICAgICAgICAgICAgdmFyICRjb25maWdEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmdldEpTT04oYXJncy5jb25maWcubWFwLmNvbmZpZywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdtYXBjb25maWcnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAkY29uZmlnRGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgJGNvbmZpZ0RlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvYWQgbWFwIGNvbmZpZyBmaWxlOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sW3RoYXQuaXNzdWUuaW5pdCgpLCAkY29uZmlnRGVmXSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9tYWtlQ29sbGVjdGlvbih0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpIHsgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7IH0sXG4gICAgICAgICAgICAgICAgICAgIGZhaWw6ICAgIGZ1bmN0aW9uKCkgeyB0aGF0LiRkZWYucmVqZWN0KCk7ICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gVE9ETzogaXNzdWUgYXMgdG8gd2hldGhlciBmYWlsKCkvYWx3YXlzKCkgaXMgY2FsbGVkIG9uIGZhaWx1cmUgaGVyZTtcbiAgICAgICAgICAgIC8vIGZhaWwoKSBzaG91bGQgYmUgY2FsbGVkIG9uIGZhbHVyZVxuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibWFwY29uZmlnXCIgICAgIDoge31cbiAgICAgICAgfSxcbiAgICAgICAgX21ha2VDb2xsZWN0aW9uIDogZnVuY3Rpb24oYXJ0aWNsZXMsY2JzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWRzID0gW107XG4gICAgICAgICAgICB2YXIgY29sID0gbmV3IE1hcmtlcnNDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICB2YXIgbWFya2VycyA9IF8ubWFwKF8ucmFuZ2UoYXJ0aWNsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgdmFyIGVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSAnJztcbiAgICAgICAgICAgIGFydGljbGVzLmZvckVhY2goZnVuY3Rpb24oYXJ0aWNsZSxpKXtcbiAgICAgICAgICAgICAgICB2YXIgJGFydERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZHMucHVzaCgkYXJ0RGVmKTtcbiAgICAgICAgICAgICAgICBhcnRpY2xlLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW07XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtbSA9IG5ldyBNYXJrZXJNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZSAgICAgOiB0aGF0Lmlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhcnRpY2xlICAgOiBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBqc29uICAgICAgOiBhcnRpY2xlLmdlb2pzb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcm91dGVyICAgIDogdGhhdC5yb3V0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBvbiBmYWlsdXJlIHRvIGNyZWF0ZSBnZW9qc29uIGZyb20gYXJ0aWNsZSwgd2FyblxuICAgICAgICAgICAgICAgICAgICAvLyBidXQgZG8gbm90IGJsb2NrIG1hcFxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvck1zZyArPSAoXCJcXG5cIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkYXJ0RGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc1tpXSA9IG1tO1xuICAgICAgICAgICAgICAgICAgICAkYXJ0RGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZmVycmVkcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKG1hcmtlcnMpO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICBjYnMuc3VjY2VzcygpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYnMuZmFpbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFya2VyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcmtlck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgXCJhcnRpY2xlXCIgICA6IG51bGwsXG4gICAgICAgIFwianNvblwiICAgICAgOiB7fSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5hcHAgPSBhcmdzLmFwcDtcbiAgICAgICAgICAgIHRoYXQuYXJ0aWNsZSA9IGFyZ3MuYXJ0aWNsZTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICBhcmdzLmlzc3VlLmluaXQoKS5kb25lKGZ1bmN0aW9uKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hlbiBhbiBhcnRpY2xlIGlzIG1hZGUgYWN0aXZlIChlLmcuLCB0aHJvdWdoIHRoZVxuICAgICAgICAgICAgICAgIC8vIFRPQyksIHByb3BvZ2F0ZSB0aHJvdWdoIHRvIHRoZSBtYXAgcGFydCBvZiB0aGUgYXBwXG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LmFydGljbGUsICdhY3RpdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdhY3RpdmUnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFya2VyTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdyb3V0ZXMvcm91dGVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21vZGVscy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvY2xlYXInXG4gICAgLCAndmlld3MvaXNzdWUnXG4gICAgLCAndmlld3MvbWFwJ1xuICAgICwgJ3ZpZXdzL21lbnUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyxDbGVhclZpZXcsSXNzdWVWaWV3LE1hcFZpZXcsTWVudVZpZXcpIHtcbiAgICAvLyd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgICAgIHBhZ2VzICAgOiB7fSwgICAvLyBjb25maWcgZm9yIHN1cHBvcnRlZCBwYWdlc1xuICAgICAgICBjb25maWcgIDoge30sICAgLy8gZ2xvYmFsIHNpdGUgY29uZmlndXJhdGlvbiwgaS5lLiwgc2l0ZS5qc29uXG4gICAgICAgIGlzc3VlICAgOiBudWxsLCAvLyBJc3N1ZU1vZGVsIGZvciB0aGlzIGFwcFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IG9wdHMuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5wYWdlcyAgPSBvcHRzLmNvbmZpZy5wYWdlcztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gb3B0cy5pc3N1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWUuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMucm91dGVyLmhpc3RvcnkgPSB0cnVlIGJ5IGRlZmF1bHQsIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXModGhhdC5wYWdlcy5yb3V0ZXIsJ2hpc3RvcnknKSAmJiAhIXRoYXQucGFnZXMucm91dGVyLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBwYWdlOiBmdW5jdGlvbihwYWdlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFnZUNvbmZpZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWdlKSBwYWdlID0gdGhpcy5wYWdlcy5ob21lO1xuICAgICAgICAgICAgICAgIHBhZ2VDb25maWcgPSB0aGlzLnBhZ2VzLnBhZ2VzW3BhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlQ29uZmlnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWcgaW4gcm91dGVyL3BhZ2UnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlKCc0MDQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSA8Ym9keT5cbiAgICAgICAgICAgIChuZXcgQ2xlYXJWaWV3KCkpLnJlbmRlcigpO1xuICAgICAgICAgICAgXy5lYWNoKHBhZ2VDb25maWcsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXdOYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGNsb25lIGNvbmZpZyB0byBhdm9pZCBnbG9iYWwgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHZhciBjb25pZmcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBjKSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGNvbmlmZywgJ3ZpZXcnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9IGNvbmlmZy52aWV3O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uaWZnLCAncGFydGlhbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gJ3ZpZXdzL3BhcnRpYWwnO1xuICAgICAgICAgICAgICAgICAgICBjb25pZmcucGFydGlhbC5wYWdlID0gdGhhdC5wYWdlcy5wYXRoQmFzZSArIGNvbmlmZy5wYXJ0aWFsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBfLmV4dGVuZChhcmdzLGNvbmlmZy5wYXJ0aWFsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmlmZywgJ2Z1bGwnKSkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbmlmZy5mdWxsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHBhZ2UgdHlwZSBpbiByb3V0ZXI6ICcgKyBwYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxdWlyZShbdmlld05hbWVdLCBmdW5jdGlvbihWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFZpZXcoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIHYucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXJ0aWNsZSA6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAkKCcjdGl0bGVwYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdC5pc3N1ZVxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCQoJyNpc3N1ZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpc3YgPSBuZXcgSXNzdWVWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgIGlzdi5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjbWFwJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1wdiA9IG5ldyBNYXBWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgIG1wdi5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjbWVudScpLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1udiA9IG5ldyBNZW51VmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICBtbnYucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Lmlzc3VlLnRyaWdnZXIoJ3NlbGVjdCcsIGlkKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBSb3V0ZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCd2aWV3cy9hcHAnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgc2lnbmFsID0ge307XG4gICAgdmFyIEFwcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFwcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy9kb213YXRjaGVyJyxcbiAgICAnbWl4aW5zL3htbDJodG1sJyxcbiAgICAndGV4dCF4c2wvYXJ0aWNsZS54c2wnLFxuICAgICd0ZXh0IXBhcnRpYWxzL3BvcG92ZXIuaHRtbCcsXG4gICAgJ3RleHQhcGFydGlhbHMvcG9wb3Zlci1jb250ZW50Lmh0bWwnLFxuICAgICdzbGlkZXNqcydcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLFhNTDJIVE1MLHhzbCxwb3BvdmVyVGVtcGwscG9wb3ZlckNvbnRlbnRUZW1wKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgaWQ6ICdhcnRpY2xlJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRlbCA9ICQoJyMnICsgdGhhdC5pZCk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRoaXMueG1sMmh0bWwoXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5nZXQoJ3htbCcpLFxuICAgICAgICAgICAgICAgIHhzbCxcbiAgICAgICAgICAgICAgICB7XCJhcnRpY2xlLWRpclwiOiB0aGF0LmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZX1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICQoJy5hcnRpY2xlLWNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjJyt0aGlzLmlkKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcnRpY2xlIGxvYWQgZXJyb3I6IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI2Zvb3RlcicpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgJCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdiZWZvcmUtZm9vdGVyJykuYWRkQ2xhc3MoJ25vLWZvb3RlcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnBvc3Rwcm9jZXNzKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaGFuZGxlIGFydGljbGUgaW1hZ2VzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99LFxuICAgICAgICBwb3N0cHJvY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGp1c3QgaGVpZ2h0IG9mIGFydGljbGUgYm9keVxuICAgICAgICAgICAgLy8gVE9ETzogaGFuZGxlIGluIGNzc1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQoJyNhcnRpY2xlIGFydGljbGUnKS5oZWlnaHQoKSAtICQoJyNoZWFkZXInKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgICQoJyNib2R5JykuY3NzKHtoZWlnaHQ6aGVpZ2h0fSk7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXApO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGVsdC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyICRwbyA9ICQoJy5wb3BvdmVyLicgKyBpZCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICQoZWx0KS5hdHRyKCdhbHQnLCAkcG8uZmluZCgnLmRlc2MnKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogJHBvLmZpbmQoJy5hdHRyJykudGV4dCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLnBvcG92ZXIoe1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IFwiYm9keVwiLFxuICAgICAgICAgICAgICAgICAgICBodG1sIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcG9wb3ZlclRlbXBsLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBcImhvdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogXCJsZWZ0XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGltYWdlcyB0aGF0IGZhaWwgdG8gbG9hZCwgc2luY2Ugd2UgY2Fubm90IGRvXG4gICAgICAgICAgICAvLyBhIGZpbGUgdGVzdCB3aGVuIHJ1bm5pbmcgdGhlIHhzbFxuICAgICAgICAgICAgdmFyIGRlZnMgPSBbXTtcbiAgICAgICAgICAgIHRoYXQuJGVsLmZpbmQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxpbWcpe1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICQoaW1nKS5sb2FkKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICQoaW1nKS5yZW1vdmVDbGFzcygncmVtb3ZlJyk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoaW1nKS5lcnJvcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGxvdyBzb21lIHRpbWUgYmVmb3JlIGZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sNTAwKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWZzLnB1c2goJGRlZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxkZWZzKS5hbHdheXMoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkKCdpbWcuc2xpZGVzanMtc2xpZGUucmVtb3ZlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmltYWdlLWxvYWRpbmcnKS5yZW1vdmVDbGFzcygnaW1hZ2UtbG9hZGluZycpO1xuICAgICAgICAgICAgICAgIC8vIGNvbmZpZ3VyZSBzbGlkZXNqczsgdXAgdG8gbm93LCAnZGlzcGxheTpub25lJ1xuICAgICAgICAgICAgICAgIC8vIGhhcyBhcHBsaWVkXG4gICAgICAgICAgICAgICAgJChcIiNzbGlkZXNcIikuc2xpZGVzanMoe1xuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IFwiZmFkZVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmFkZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjcm9zc2ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBvbiBsb2FkIG9mIGZpcnN0IHBpY1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVkOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIChudW1iZXIgLSAxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IGhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KCksIHdpZHRoOiBcImF1dG9cIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9ICgkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpIC0gJGltZy53aWR0aCgpKS8yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBzdGFydCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgZW5kIG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbWcgPSBudW1iZXIgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgbmV3SW1nICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IGhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KCksIHdpZHRoOiBcImF1dG9cIiwgcG9zaXRpb246IFwicmVsYXRpdmVcIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoQXJ0aWNsZVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2NsZWFyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQ2xlYXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmVtcHR5KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQ2xlYXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2lzc3VlLmh0bWwnXG4gICAgLCAndmlld3MvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLEFydGljbGVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAgICAgICAgICcjaXNzdWUnLFxuICAgICAgICB0ZW1wbGF0ZTogICBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwub24oJ3VwZGF0ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNlbGVjdChhcnRpY2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0bXBsKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXYgPSBuZXcgQXJ0aWNsZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICBhcnRpY2xlXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoYXQubW9kZWwuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXRcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdC5tb2RlbC5yb3V0ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXJ0aWNsZS5vbignYWN0aXZlJywgICBhdi5yZW5kZXIsIGF2KTtcbiAgICAgICAgICAgIGFydGljbGUub24oJ2luYWN0aXZlJywgYXYucmVtb3ZlLCBhdik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gSXNzdWVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcC5odG1sJ1xuICAgICwgJ21vZGVscy9tYXAnXG4gICAgLCAndmlld3MvbWFya2VyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsbWFwUGFydGlhbCxNYXBNb2RlbCxNYXJrZXJWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBpZDogICAgICAnbWFwJyxcbiAgICAgICAgdGFnTmFtZTogJ2RpdicsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IE1hcE1vZGVsKGFyZ3MpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhhdC5pZCkuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAvLyBwdXQgZGl2I21hcCBpbiBwbGFjZVxuICAgICAgICAgICAgLy8gbm90ZTogbWFwLmpzb24gaGFzIHRoZSBAaWQgdmFsdWU6IHtcImlkXCIgOiBcIm1hcFwifVxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChtYXBQYXJ0aWFsKTtcbiAgICAgICAgICAgIC8vIExlYWZsZXQgY29uZmlnXG4gICAgICAgICAgICB0aGlzLm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgICAgICAgPSB0aGF0Lm1vZGVsLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgIHZhciBtYXBjb25maWcgPSB0aGF0Lm1vZGVsLmdldCgnbWFwY29uZmlnJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCAgICAgICA9IG5ldyBMLk1hcChtYXBjb25maWcuaWQsIG1hcGNvbmZpZy5tYXApO1xuICAgICAgICAgICAgICAgIHZhciBvcGVucG9wdXAgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXBpZCA9IGZ1bmN0aW9uKGxhdGxuZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGF0bG5nLmxhdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgKyBsYXRsbmcubG5nLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoYXQuY29uZmlndXJlTWFwKG1hcCxtYXBjb25maWcsb3BlbnBvcHVwLHBvcHVwaWQpO1xuICAgICAgICAgICAgICAgIC8vIGxldCBtYXAgcmVuZGVyIHdoaWxlIG1hcmtlcnMgYXJlIGFkZGVkXG4gICAgICAgICAgICAgICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5mb3JFYWNoKGZ1bmN0aW9uKG1hcmtlck1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZE1hcmtlclRvTWFwKG1hcmtlck1vZGVsLG1hcCxvcGVucG9wdXAscG9wdXBpZCxtYXBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIHRoYXQuY29uZmlnLm1hcC5tYXJrZXJEZWxheSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIGNvbmZpZ3VyZU1hcCA6IGZ1bmN0aW9uKG1hcCxtYXBjb25maWcsb3BlbnBvcHVwLHBvcHVwaWQpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgICAgICA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgdGlsZWxheWVyICAgPSBuZXcgTC5UaWxlTGF5ZXIobWFwY29uZmlnLnRpbGVMYXllci51cmwsIG1hcGNvbmZpZy50aWxlTGF5ZXIub3B0cyk7XG4gICAgICAgICAgICB2YXIgc2NhbGUgICAgICAgPSBMLmNvbnRyb2wuc2NhbGUobWFwY29uZmlnLnNjYWxlKTtcbiAgICAgICAgICAgIG1hcC5zZXRWaWV3KG5ldyBMLkxhdExuZyhtYXBjb25maWcudmlldy5sYXQsIG1hcGNvbmZpZy52aWV3LmxuZyksIG1hcGNvbmZpZy52aWV3Lnpvb20pO1xuICAgICAgICAgICAgbWFwLmFkZExheWVyKHRpbGVsYXllcik7XG4gICAgICAgICAgICBzY2FsZS5hZGRUbyhtYXApO1xuICAgICAgICAgICAgLy8gdHJhY2sgdGhlIGN1cnJlbnRseSBvcGVuIHBvcHVwXG4gICAgICAgICAgICBtYXAub24oJ3BvcHVwb3BlbicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgIC8vIGV2ZW50IGxhdGVuY3kgYmV0d2VlbiBsZWFmbGV0IGFuZCBiYWNrYm9uZVxuICAgICAgICAgICAgICAgIC8vIGFwcGVhcnMgdG8gY2F1c2UgcG9wdXBzIHRvIGNvbGxhcHNlIGVycmF0aWNhbGx5XG4gICAgICAgICAgICAgICAgLy8gaW4gRmlyZWZveCB3aGVuIGNsaWNraW5nIG1hcCBwaW5zXG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKGV2dC5wb3B1cC5nZXRMYXRMbmcoKSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcGVucG9wdXBbcG9wdXBpZChldnQucG9wdXAuZ2V0TGF0TG5nKCkpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXAub24oJ3BvcHVwY2xvc2UnLCBmdW5jdGlvbihldnQpe1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBvcGVucG9wdXBbcG9wdXBpZChldnQucG9wdXAuZ2V0TGF0TG5nKCkpXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKGV2dC5wb3B1cC5nZXRMYXRMbmcoKSldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBhZGRNYXJrZXJUb01hcDogZnVuY3Rpb24obWFya2VyTW9kZWwsbWFwLG9wZW5wb3B1cCxwb3B1cGlkLG1hcGNvbmZpZykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciBnZW9qc29uICAgICA9IG1hcmtlck1vZGVsLmdldCgnanNvbicpO1xuICAgICAgICAgICAgdmFyIG1hcmtlclZpZXcgID0gbmV3IE1hcmtlclZpZXcoe21vZGVsOiBtYXJrZXJNb2RlbCwgcm91dGVyOiB0aGF0LnJvdXRlcn0pO1xuICAgICAgICAgICAgbWFya2VyVmlldy5yZW5kZXIoKTtcbiAgICAgICAgICAgIEwuZ2VvSnNvbihnZW9qc29uLCB7XG4gICAgICAgICAgICAgICAgLy8gZmVhdHVyZSBpcyB0aGUgZ2VvanNvbiwgYSByYXcgSlMgb2JqZWN0XG4gICAgICAgICAgICAgICAgLy8gbWFwTWFya2VyIGlzXG4gICAgICAgICAgICAgICAgb25FYWNoRmVhdHVyZTogZnVuY3Rpb24gKGZlYXR1cmUsIG1hcE1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHBvcHVwIHRvIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IEwucG9wdXAobWFwY29uZmlnLmZlYXR1cmVzLnBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuc2V0Q29udGVudChtYXJrZXJWaWV3LmVsKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLmJpbmRQb3B1cChwb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGNsaWNrIGhhbmRsZXIgZm9yIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIsIHdoaWNoIHdvdWxkIGNsb3NlIHRoZSBwb3B1cCBpZiBpdFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZXJlIGFscmVhZHkgb3BlblxuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VyTW9kZWwudHJpZ2dlcignYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQuY29uZmlnLm1hcC5ob3ZlclBvcHVwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3BlbnBvcHVwW3BvcHVwaWQobWFwTWFya2VyLmdldExhdExuZygpKV0pIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFwcGxpY2F0aW9uIG9iamVjdCwgbm90IGxlYWZsZXRqc1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJNb2RlbC5vbignYWN0aXZlJywgZnVuY3Rpb24oYXJ0aWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgb3BlbnBvcHVwW3BvcHVwaWQobWFwTWFya2VyLmdldExhdExuZygpKV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBvaW50VG9MYXllcjogZnVuY3Rpb24gKGZlYXR1cmUsIGxhdGxuZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTC5tYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAgICAgICAgICAgTC5pY29uKG1hcGNvbmZpZy5mZWF0dXJlcy5pY29uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogICAgICAhIWZlYXR1cmUucHJvcGVydGllcy50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICAgICAgICAgIChmZWF0dXJlLnByb3BlcnRpZXMubWFya2VybmFtZSB8fCAnJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAgICAgICAgbWFwY29uZmlnLmZlYXR1cmVzLm9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICByaXNlT25Ib3ZlcjogICAgbWFwY29uZmlnLmZlYXR1cmVzLnJpc2VPbkhvdmVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmFkZFRvKG1hcCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFya2VyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnLFxuICAgICd0ZXh0IXBhcnRpYWxzL21hcmtlci5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcmtlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBlbDogJycsXG4gICAgICAgIHJvdXRlcjogbnVsbCxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIC8vIHdoZW4gYSBtYXJrZXIgaXMgbWFkZSBhY3RpdmUgKGUuZy4sIGJ5IHNlbGVjdGlvblxuICAgICAgICAgICAgLy8gb2YgYSBtYXJrIGluIHRoZSBtYXApLCBwcm9wb2dhdGUgdGhlIGV2ZW50IHRvIHRoZVxuICAgICAgICAgICAgLy8gaXNzdWUsIGZvciB1cGRhdGVzIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb25cbiAgICAgICAgICAgIHRoYXQubW9kZWwub24oJ2FjdGl2ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSAnYXJ0aWNsZS8nICsgdGhhdC5tb2RlbC5hcnRpY2xlLmdldCgnYXJ0aWNsZWlkJyk7XG4gICAgICAgICAgICAgICAgdGhhdC5yb3V0ZXIubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHRoZSBhcnRpY2xlIGlzIGhhcyBiZWVuIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgdGhhdC5tb2RlbC5nZXQoJ2lzc3VlJykudHJpZ2dlcignc2VsZWN0JywgdGhhdC5tb2RlbC5nZXQoJ2FydGljbGUnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRhaW4gZW1wdHkgZnVuY3Rpb24gdG8gYXZvaWQgcmVkcmF3L2NvbGxhcHNlIG9mXG4gICAgICAgIC8vIG1hcCBtYXJrZXIgcG9wb3ZlclxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKFxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICB0aGlzLm1vZGVsLmFydGljbGUuZ2V0KCdhcnRpY2xlaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgZ2VvanNvbjogICAgdGhpcy5tb2RlbC5hcnRpY2xlLmdlb2pzb24oKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcmtlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21lbnUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tZW51Lmh0bWwnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLG1lbnVUbXBsLERPTVdhdGNoZXIsQXJ0aWNsZU1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUobWVudVRtcGwpLFxuICAgICAgICAgIGlkOiAgICAgICdtZW51J1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgaXNzdWU6ICAgbnVsbFxuICAgICAgICAsIGNvbmZpZzogIHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gYXJncy5pc3N1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoYXQuaWQpLmNoaWxkcmVuKCkubGVuZ3RoICE9PSAwKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmNvbmZpZy5tZW51O1xuICAgICAgICAgICAgLy8gcmVuZGVyIGVhY2ggaXRlbSBmcm9tIHRoZSBjb25maWcgZmlsZSB0byBhIDxsaT5cbiAgICAgICAgICAgIC8vIG11c3QgYmUgZG9uZSBhc3luYyBkdWUgdG8gcmV0cmlldmFsIG9mIHBhcnRpYWwgZmlsZXNcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgIC8vIGNhY2hlIG9mIHRlbXBsYXRlIHN0cmluZ3M6IHVybCA9PiB0ZW1wbFxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25zID0ge307XG4gICAgICAgICAgICBfLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1tpdGVtLnBhcnRpYWxdID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5jb2xsZWN0aW9uID09PSBcImNvbGxlY3Rpb25zL2FydGljbGVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0gPSB0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5oYW5kbGVkIGNvbGxlY3Rpb24gdHlwZSByZXF1ZXN0ZWQ6IFwiICsgaXRlbS5jb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyh0ZW1wbGF0ZXMpLCBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgdXJsXSwgZnVuY3Rpb24odGVtcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzW3VybF0gPSBfLnRlbXBsYXRlKHRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkZGVmLnByb21pc2UoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgbWVudSBhcyBhIDxkaXY+XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICcnO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KCQsIHByb21pc2VzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBpdGVtLnBhcnRpYWw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdwYWdlJyB8fCBpdGVtLnR5cGUgPT09ICdzZXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dLm1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGVsLGopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiAgICA9IGl0ZW0uaXRlbS5ocmVmLnJlcGxhY2UoJzppJywgaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtdiAgICAgPSBuZXcgQXJ0aWNsZU1lbnVWaWV3KHttb2RlbDptb2RlbH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgID0gYW12LnJlbmRlcih7aHJlZjogJyMnICsgaHJlZn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYW4gPGxpPiBlbGVtZW50IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSByZXN1bHQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSByZXN1bHQub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkb2N1bWVudCBlbGVtZW50IGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCByZXN1bHQgdHlwZSBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN1YkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyMnICsgdGhhdC5pZCkuZW1wdHkoKS5hcHBlbmQodGhhdC50ZW1wbGF0ZSh7Y29udGVudDogY29udGVudH0pKTtcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIHRoYXQgdGhlIG1lbnUgaGFzIGxvYWRlZFxuICAgICAgICAgICAgICAgIHZhciAkZmFpbERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkZmFpbERlZi5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC53YXRjaERPTSg1MDAsICcjJyArIHRoYXQuaWQsICRmYWlsRGVmKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGJ1aWxkIG1lbnUuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNZW51Vmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYWdlJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy9kb213YXRjaGVyJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wYWdlLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixwYWdlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYWdlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZChwYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJGRlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYWdlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIFBhZ2VWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYXJ0aWFsJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhcnRpYWxWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJycsXG4gICAgICAgIHBhZ2U6ICcnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5lbCAgID0gb3B0cy5lbDtcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyBvcHRzLnBhZ2VdLCBmdW5jdGlvbihodG1sKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wYWdlID0gaHRtbDtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkd2F0Y2hEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LmluaXQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHRoYXQucGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCR3YXRjaERlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFBhcnRpYWxWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibXNnXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdtc2cnLCBhcmdzLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBVc2VyRXJyb3JNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbi8qXG4gKiBUaGlzIGlzIG1lYW50IHRvIGJlIGV4dGVuZGVkIGFzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHRoZVxuICogc2VjdGlvbnMgb2YgYW4gYXJ0aWNsZS5cbiAqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL21lbnUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL3htbDJodG1sJyxcbiAgICAndGV4dCF4c2wvYXJ0aWNsZS1tZW51LnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxYTUwySFRNTCxhbVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gdGhpcyB2aWV3IGlzIG1lYW50IHRvIGJlIGNhbGxlZCBvbmx5IGFmdGVyIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICAgICAgICAvLyBhcnRpY2xlIG1vZGVsIGhhcyBiZWVuIGluaXRpYWxpemVkXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5pbml0KCkuc3RhdGUoKSAhPT0gJ3Jlc29sdmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVW5pbml0aWFsaXplZCBhcnRpY2xlIGluIEFydGljbGVNZW51Vmlld1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1lbnVpdGVtID0gdGhhdC54bWwyaHRtbCh0aGF0Lm1vZGVsLmdldCgneG1sJyksIGFtWHNsLCBwYXJhbXMpO1xuICAgICAgICAgICAgcmV0dXJuIG1lbnVpdGVtO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1lbnVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvZXJyb3IvdXNlcicsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ2JhY2tib25lJywgXG4gICAgJ3RleHQhcGFydGlhbHMvZXJyb3IvdXNlci5odG1sJ1xuXSwgZnVuY3Rpb24oJCxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgZWw6ICQoJyNlcnJvckRpYWxvZycpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLm1vZGFsKHtrZXlib2FyZDogdHJ1ZSwgc2hvdzogdHJ1ZX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yVmlldztcbn0pO1xuIiwicmVxdWlyZS5jb25maWcoe1xuICBwYXRoczoge1xuICAgIHRleHQ6ICAgICAgICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9yZXF1aXJlLXRleHQvMi4wLjEyL3RleHQubWluJyxcbiAgICBqcXVlcnk6ICAgICAnLy9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTIuMS40Lm1pbicsXG4gICAgYm9vdHN0cmFwOiAgJy8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMy40L2pzL2Jvb3RzdHJhcC5taW4nLFxuICAgIGJhY2tib25lOiAgICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9iYWNrYm9uZS5qcy8xLjEuMi9iYWNrYm9uZS1taW4nLFxuICAgIHVuZGVyc2NvcmU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUtbWluJyxcbiAgICBsZWFmbGV0OiAgICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0JyxcbiAgICBzbGlkZXNqczogICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvc2xpZGVzanMvMy4wL2pxdWVyeS5zbGlkZXMubWluJyxcbiAgICBwYXJ0aWFsczogICAnLi4vcGFydGlhbHMnLFxuICAgIHhzbDogICAgICAgICcuLi9zY3JpcHQveHNsJyxcbiAgICBwYWdlczogICAgICAnLi4vcGFnZXMnXG4gIH0sXG4gIHNoaW06IHtcbiAgICBib290c3RyYXA6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGJhY2tib25lOiB7XG4gICAgICAgICdkZXBzJzogWydqcXVlcnknLCAndW5kZXJzY29yZSddLFxuICAgICAgICAnZXhwb3J0cyc6ICdCYWNrYm9uZSdcbiAgICB9LFxuICAgIHVuZGVyc2NvcmU6IHtcbiAgICAgICAgJ2V4cG9ydHMnOiAnXydcbiAgICB9LFxuICAgIHRleHQ6IHtcbiAgICAgICAgJ2RlcHMnOiBbXVxuICAgIH0sXG4gICAgc2xpZGVzanM6IHtcbiAgICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH1cbiAgfVxufSk7XG5yZXF1aXJlKFtcbiAgICAnanF1ZXJ5JyxcbiAgICAnbW9kZWxzL2Vycm9yL3VzZXInLFxuICAgICd2aWV3cy9lcnJvci91c2VyJyxcbiAgICAnbW9kZWxzL2FwcCcsXG4gICAgJ3ZpZXdzL2FwcCcsXG4gICAgJ2Jvb3RzdHJhcCdcbl0sIGZ1bmN0aW9uKCQsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyxBcHBNb2RlbCxBcHBWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBjb25maWdmaWxlID0gJCgnI21haW4nKS5hdHRyKCdkYXRhLWNvbmZpZycpO1xuICAgIGlmIChjb25maWdmaWxlKSB7XG4gICAgICAgICQuZ2V0SlNPTihjb25maWdmaWxlLCBmdW5jdGlvbihzaXRlY29uZmlnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBhcHAgPSBuZXcgQXBwVmlldyh7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiAobmV3IEFwcE1vZGVsKHtjb25maWc6IHNpdGVjb25maWd9KSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wdHMuY29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIG1zZzogXCJGYWlsZWQgdG8gbG9hZCBzaXRlIGNvbmZpZyBmaWxlICdcIiArIGNvbmZpZ2ZpbGUgKyBcIicgXCIgKyBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgbXNnOiBcIk5vIGNvbmZpZ3VyYXRpb24gZmlsZW5hbWUgc3BlY2lmaWVkIGluIGhvbWUgcGFnZS5cIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
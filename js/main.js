define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,t,i,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new i({map:r.view.map}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,t),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit"],function(e,i,n,a,r,t,m){"use strict";var o=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var n=this;n.$def=e.Deferred(),n.model=i.model,n.issue=i.issue,e.when.apply({},[n.issue.init(),n.model.init()]).done(function(){n.mapconfig=n.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(n._initMap(),n.$def.resolve(n))})},_initMap:function(){var n=this;0===e("#"+this.id).length&&(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})}))},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(o.prototype,m),o});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,a,i,n,t){"use strict";var o=i.extend({view:null,router:null,map:null,initialize:function(e){var a=this;a.map=e.map,a.view=e.view,a.model=e.model;var i=new n({views:a.view.markerViews,map:a.view.map,mapconfig:a.model.attributes.mapconfig}),o=new t({markerViews:a.view.markerViews,map:a.view.map,siteconfig:a.model.attributes.config});a.subControllers=[i,o],r.forEach(a.subControllers,function(e){a.listenTo(e,"filter",function(){a._updateMarkers()})})},_updateMarkers:function(){var e=this,a=[],i=[];r.forEach(e.subControllers,function(e){var a=e.getFilterState();i.push(a.hide),i=r.flatten(i)}),r.forEach(e.view.markerViews,function(e){var n=r.find(i,function(r){r===e.markerLayer});n||a.push(e.markerLayer)}),r.forEach(a,function(r){e.view.map.addLayer(r)}),r.forEach(i,function(r){e.view.map.removeLayer(r)})}});return o});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,initialize:function(t){if(this.map=t.map,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,d=p.map,s=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+s).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=d.getSize().x?d.panBy([a-n,0]):d.getBounds().contains(e.getLatLng())||(d.closePopup(e),d.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,t,n,o){"use strict";var l=n.extend({views:null,router:null,map:null,control:null,initialize:function(t){var n=this;n.views=t.views,n.map=t.map,n.mapconfig=t.mapconfig;var l=r.template(o),a=r.groupBy(n.views,function(e){return e.model.getGeojson().properties.layer}),i=n.control=L.control.layers(null,null,n.mapconfig.control.layers.options).addTo(n.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),L.DomEvent.on(e(".leaflet-control-layers-toggle")[0],"click",i._expand,i),r.each(r.keys(a),function(e){var t=e.replace(/\s+/g,"-"),n=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:t}),o=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(o);i.addOverlay(c,n)}),e("input.leaflet-control-layers-selector").each(function(r,t){e(t).click()}),i.mapLayerController=n,i._onInputClick=n._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,t,n=this,o=[],l=[],a=n._form.getElementsByTagName("input"),i=a.length;for(n._handlingClick=!0,e=0;i>e;e++)r=a[e],t=n._layers[r.layerId],t.layer.getLayers().forEach(r.checked?function(e){o.push(e)}:function(e){l.push(e)});n._handlingClick=!1,n._refocusOnMap(),n.mapLayerController.show=o,n.mapLayerController.hide=l,n.mapLayerController.trigger("filter")}});return l});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,l){"use strict";var a=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var i=this;i.views=e.views,i.map=e.map,i.markerViews=e.markerViews,r.forEach(e.markerViews,function(e){i.listenTo(e.model,"show",function(){}),i.listenTo(e.model,"hide",function(){})}),i.model=new l({siteconfig:e.siteconfig,markerViews:e.markerViews}),i.view=new t({model:i.model,map:i.map,markerViews:e.markerViews}),i.listenTo(i.view,"filter",i._handleFilterEvent),i.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],l={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return l[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in l)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return a});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,l,n){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"});var s=(i(".slidesjs-container").width()-t.width())/2;s-=parseInt(t.css("padding-left"),10),t.css({left:s}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,t,n,l){"use strict";var o=t.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var i,t,l,o,a=this;l=e("#map").height(),o=document.body.clientHeight,Math.abs(o/2-l)<2?(i="bottomright",t=e("#map").height()-100):(i="topleft",t=500),a.model.init().done(function(){a.timeline=n.control.timeline(a.map,a.model,{height:t,position:i,on:{brushend:function(e){a._handleFilter(e)}}}).addTo(a.map)})}});return o});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsInJvdXRlcy9yb3V0ZXIuanMiLCJ2aWV3cy9hcHAuanMiLCJ2aWV3cy9hcnRpY2xlLmpzIiwidmlld3MvY2xlYXIuanMiLCJ2aWV3cy9pc3N1ZS5qcyIsInZpZXdzL21hcC5qcyIsInZpZXdzL21hcmtlci5qcyIsInZpZXdzL21lbnUuanMiLCJ2aWV3cy9wYWdlLmpzIiwidmlld3MvcGFydGlhbC5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJtb2RlbHMvZXJyb3IvdXNlci5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS5qcyIsInZpZXdzL2FydGljbGUvbWVudS5qcyIsInZpZXdzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveC5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcy5qcyIsInZpZXdzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkFydGljbGVNb2RlbCIsIkFydGljbGVzQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJleHRlbmQiLCJtb2RlbCIsIlRpbWVsaW5lSXRlbU1vZGVsIiwiVGltZWxpbmVDb2xsZWN0aW9uIiwiTCIsImQzIiwiQ29udHJvbCIsIlRpbWVsaW5lIiwib3B0aW9ucyIsIm9yaWVudGF0aW9uIiwiaGVpZ2h0Iiwid2lkdGgiLCJtYXJnaW4iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJjb2xsYXBzZWQiLCJpdGVtIiwibWluSGVpZ2h0Iiwib24iLCJ0aXRsZSIsInBvc2l0aW9uIiwiaW5pdGlhbGl6ZSIsIm1hcCIsInNvdXJjZSIsInRoYXQiLCJ0aGlzIiwiVXRpbCIsInNldE9wdGlvbnMiLCJfbWFwIiwiX3NvdXJjZSIsImNvbnRhaW5lciIsIl9jb250YWluZXIiLCJEb21VdGlsIiwiY3JlYXRlIiwiYWRkQ2xhc3MiLCJ0b2dnbGUiLCJfdG9nZ2xlIiwibGluayIsImV4cGFuZCIsIl9leHBhbmQiLCJCcm93c2VyIiwidG91Y2giLCJEb21FdmVudCIsInN0b3AiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbiIsIm9uUmVtb3ZlIiwib25BZGQiLCJfZXhwYW5kZWQiLCJfY29sbGFwc2UiLCJyZW1vdmVDbGFzcyIsIl90aW1lbGluZSIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInlTY2FsZSIsIl94U2NhbGUiLCJzY2FsZSIsImxpbmVhciIsInJhbmdlIiwiX3lTY2FsZSIsImRvbWFpbiIsInN0YXJ0IiwiZW5kIiwidGltZWxpbmUiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiYmFuZCIsImJydXNoIiwic2VsZWN0QWxsIiwiZGF0YSIsImdldEl0ZW1zIiwiZW50ZXIiLCJkIiwibWF4IiwiZHVyYXRpb24iLCJfYnJ1c2giLCJzdmciLCJ5IiwiZXh0U3RhcnQiLCJleHRlbnQiLCJleHRFbmQiLCJyZXN1bHRzIiwiY2xlYXIiLCJzZWxlY3RlZCIsImVhY2giLCJpIiwicHVzaCIsImJydXNoZW5kIiwieUJydXNoIiwiY2FsbCIsInlBeGlzIiwiYXhpcyIsIm9yaWVudCIsInRpY2tTaXplIiwidGlja1ZhbHVlcyIsInRpY2tGb3JtYXQiLCJjb2xsYXBzZSIsIm9mZiIsImNvbnRyb2wiLCJDb250cm9sbGVyIiwiQXN5bmNJbml0IiwiSXNzdWVWaWV3IiwiSXNzdWVNb2RlbCIsIklzc3VlQ29udHJvbGxlciIsInZpZXciLCJyb3V0ZXIiLCJhcmdzIiwiJGRlZiIsIkRlZmVycmVkIiwiY29uZmlnIiwicmVuZGVyIiwiaW5pdCIsImRvbmUiLCJmb3JFYWNoIiwiZ2V0IiwibW9kZWxzIiwiYXJ0aWNsZSIsImxpc3RlblRvIiwidXJsIiwibmF2aWdhdGUiLCJ0cmlnZ2VyIiwicmVuZGVyQXJ0aWNsZSIsInJlc29sdmUiLCJhbHdheXMiLCJyZWplY3QiLCJwcm90b3R5cGUiLCJNYXBNb2RlbCIsIk1hcFZpZXciLCJNYXBQYW5Db250cm9sbGVyIiwiTWFwTGF5ZXJDb250cm9sbGVyIiwiTWFwVGltZWxpbmVDb250cm9sbGVyIiwiTWFwQ29udHJvbGxlciIsImlzc3VlIiwibWFwUGFuQ29udHJvbGxlciIsIm1hcFRpbWVsaW5lQ29udHJvbGxlciIsIm1hcExheWVyQ29udHJvbGxlciIsIm1hcGNvbmZpZyIsImF0dHJpYnV0ZXMiLCJtYXJrZXJWaWV3cyIsIl9yZWdpc3Rlck1hcmtlcnMiLCJmaXRNYXJrZXJCb3VuZHMiLCJ3aGVuIiwiYXBwbHkiLCJtYXJrZXJWaWV3IiwibWFwUG9wdXBPcGVuIiwibWFya2VyTGF5ZXIiLCJtYXJrZXIiLCJfZ2V0TWFya2VyTGF5ZXIiLCJoYW5kbGVQb3B1cFBvc2l0aW9uIiwiZ2V0UG9wdXAiLCJtYXBQb3B1cFRvZ2dsZSIsImV2dCIsImhvdmVyUG9wdXAiLCJvcGVucG9wdXAiLCJwb3B1cGlkIiwibWFwTWFya2VyIiwiZ2V0TGF0TG5nIiwib3BlblBvcHVwIiwib2JqIiwibWV0aG9kIiwibWFwTWFya2VyTGF5ZXIiLCJsYXllcnMiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJwcm9taXNlIiwiRE9NV2F0Y2hlciIsIndhdGNoRE9NIiwibXMiLCJzZWwiLCJsZW5ndGgiLCJmIiwiZG9jdW1lbnQiLCJib2R5Iiwid2luZG93Iiwic2V0VGltZW91dCIsIkZldGNoWE1MIiwiZmV0Y2hYTUwiLCIkZ2V0IiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiWE1MMkhUTUwiLCJfZG9jIiwieG1sIiwieG1sRG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiRG9jdW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwieG1sMmh0bWwiLCJ4c2wiLCJwYXJhbXMiLCJtb2RlIiwieHNsRG9jIiwieHNsdFByb2Nlc3NvciIsIlhTTFRQcm9jZXNzb3IiLCJpbXBvcnRTdHlsZXNoZWV0Iiwia2V5cyIsImtleSIsInNldFBhcmFtZXRlciIsInJlc3VsdCIsImRvYyIsInRyYW5zZm9ybVRvRG9jdW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbmRleE9mIiwiZG9jdW1lbnRFbGVtZW50IiwidGV4dENvbnRlbnQiLCJpbm5lckhUTUwiLCJlIiwidG9TdHJpbmciLCJnZW9Kc29uWHNsIiwiY2l0ZWRSYW5nZVhzbCIsIk1vZGVsIiwic2V0IiwiX21rR2VvanNvbiIsIl9ta0NpdGVkUmFuZ2UiLCJnZW9qc29uIiwicHJvcGVydGllcyIsImxheWVyIiwiZmFpbCIsImRlZmF1bHRzIiwicGxhY2VUeXBlIiwiaWNvblVybCIsImNpdGVkUmFuZ2UiLCJnZXRHZW9qc29uIiwianNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsIkFydGljbGVDb2xsZWN0aW9uIiwiYXJ0ZGlyIiwiYXJ0aWNsZXMiLCJwYXRoQmFzZSIsIm1hdGNoIiwiZmlsZXMiLCJjb2wiLCJ1bmRlZmluZWQiLCJmaWxlIiwiYXJ0aWNsZWlkIiwiYXJ0aWNsZWRpciIsInBhdGgiLCJpbml0cyIsImFkZCIsInNldEljb25zIiwiJHByb21pc2UiLCJzdGF0ZSIsImljY29uZmlnIiwibWFya2VycyIsImljb25zIiwiaWNvbkZpbGVzIiwic2h1ZmZsZSIsImZsYXR0ZW4iLCJlbnRyeSIsImRpciIsImNvbmNhdCIsImRlZmF1bHRJY29uRmlsZSIsImdldEFydGljbGUiLCJhcnQiLCJhdCIsImdldEpTT04iLCJqcXhociIsImNvbnNvbGUiLCJsb2ciLCJVc2VyRXJyb3JNb2RlbCIsIlVzZXJFcnJvclZpZXciLCJDbGVhclZpZXciLCJNZW51VmlldyIsInBhZ2VzIiwiaXNzdWVDb250cm9sbGVyIiwibWFwQ29udHJvbGxlciIsIm9wdHMiLCJoaXN0b3J5IiwiZnJhZ21lbnQiLCJwYWdlIiwicGFnZUNvbmZpZyIsIm1hcFBhZ2UiLCJob21lIiwicGMiLCJ2aWV3TmFtZSIsInN0cmluZ2lmeSIsImNvbmZnIiwibG9jYXRpb24iLCJocmVmIiwiZnVsbCIsInBhcnRpYWwiLCJyZXF1aXJlIiwiVmlldyIsInYiLCJpZCIsInJlbW92ZSIsImNoaWxkcmVuIiwiQXBwVmlldyIsImVsIiwicmVzaXplIiwicmVsb2FkIiwiR2FsbGVyeVZpZXciLCJBcnRpY2xlVmlldyIsIiRlbCIsImZpbmQiLCJodG1sIiwiYXJ0aWNsZS1kaXIiLCJjbGljayIsImVsdCIsInRtcGwiLCJlbXB0eSIsInRlbXBsYXRlIiwibWFwUGFydGlhbCIsIk1hcmtlclZpZXciLCJ0YWdOYW1lIiwiX2luaXRNYXAiLCJNYXAiLCJUaWxlTGF5ZXIiLCJ0aWxlTGF5ZXIiLCJhZGRUbyIsInJlbmV3Vmlld3MiLCJtdiIsImxlZ2VuZFBhcnRpYWwiLCJpbml0TWFya2VyTGF5ZXIiLCJpY29uQ29uZmlnIiwiZmVhdHVyZXMiLCJpY29uIiwiZ2VvSnNvbiIsIm9uRWFjaEZlYXR1cmUiLCJmZWF0dXJlIiwicG9wdXAiLCJzZXRDb250ZW50IiwiYmluZFBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBvaW50VG9MYXllciIsImxhdGxuZyIsImNsaWNrYWJsZSIsInRleHQiLCJtYXJrZXJuYW1lIiwib3BhY2l0eSIsInJpc2VPbkhvdmVyIiwibWVudVRtcGwiLCJBcnRpY2xlTWVudVZpZXciLCJpdGVtcyIsIm1lbnUiLCJwcm9taXNlcyIsInRlbXBsYXRlcyIsImNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbiIsInRlbXBsIiwiY29udGVudCIsInNvcnRlciIsInN1YkNvbnRlbnQiLCJzb3J0S2V5cyIsImoiLCIkbGkiLCJyZXBsYWNlIiwiYW12IiwiRWxlbWVudCIsIm5vZGVOYW1lIiwib3V0ZXJIVE1MIiwiY2xvbmUiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwibGFiZWwiLCJ0aGVuIiwiJGZhaWxEZWYiLCJQYWdlVmlldyIsIlBhcnRpYWxWaWV3IiwiJHdhdGNoRGVmIiwiUGxhY2VUeXBlQ29udHJvbGxlciIsIlRpbWVsaW5lQ29udHJvbGxlciIsInBsYWNlVHlwZUNvbnRyb2xsZXIiLCJ2aWV3cyIsInRpbWVsaW5lQ29udHJvbGxlciIsInNpdGVjb25maWciLCJzdWJDb250cm9sbGVycyIsInN1YkNvbnRyb2xsZXIiLCJfdXBkYXRlTWFya2VycyIsInNob3ciLCJoaWRlIiwicmVzIiwiZ2V0RmlsdGVyU3RhdGUiLCJmb3VuZCIsImhpZGRlbkxheWVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsIl9maXRNYXJrZXJCb3VuZHMiLCJnZXRFbGVtZW50QnlJZCIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJtc2ciLCJtZXNzYWdlIiwiQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyIsIkFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3IiwiQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3IiwiQXJ0aWNsZUdhbGxlcnlWaWV3Iiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJkZWZzIiwiaW1nIiwibG9hZCIsImFtWHNsIiwibWVudWl0ZW0iLCJtb2RhbCIsImtleWJvYXJkIiwiUGxhY2V0eXBlQ29udHJvbGxlciIsImxlZ2VuZFRlbXBsIiwibGF5ZXJNYXJrZXJzIiwiZ3JvdXBCeSIsImdldENvbnRhaW5lciIsIk9iamVjdCIsImxheWVyTmFtZSIsImtsYXNzIiwibGF5ZXJMZWdlbmQiLCJtYXJrZXJMYXllcnMiLCJsYXllckdyb3VwIiwiYWRkT3ZlcmxheSIsIl9vbklucHV0Q2xpY2siLCJpbnB1dCIsImlucHV0cyIsIl9mb3JtIiwiaW5wdXRzTGVuIiwiX2hhbmRsaW5nQ2xpY2siLCJfbGF5ZXJzIiwibGF5ZXJJZCIsImNoZWNrZWQiLCJfcmVmb2N1c09uTWFwIiwiVGltZWxpbmVWaWV3IiwiVGltZWxpbmVNb2RlbCIsIl9oYW5kbGVGaWx0ZXJFdmVudCIsInNob3dMYXllcnMiLCJoaWRlTGF5ZXJzIiwic2hvd0lkcyIsImZpbHRlciIsIlRpbWVsaW5lSXRlbSIsImJvb2tjb25maWciLCJib29rIiwiX2luaXRpYWxpemUiLCJib29rQ2hhcHRlciIsImZpbmRXaGVyZSIsImNoYXB0ZXJzIiwicGFydCIsImNoYXB0ZXIiLCJwYXJhZ3JhcGhzIiwicGFyYWdyYXBoIiwibWluIiwidmFsdWVzIiwicCIsImxpZ2h0Ym94VGl0bGVUZW1wbCIsIm1hZ25pZmljUG9wdXAiLCJnYWxsZXJ5IiwiZW5hYmxlZCIsImltYWdlIiwidGl0bGVTcmMiLCIkaXRlbSIsIiRwbyIsInBjdCIsInBvcG92ZXJUZW1wbCIsInBvcG92ZXJDb250ZW50VGVtcGwiLCJnZXRBdHRyaWJ1dGUiLCJwb3BvdmVyIiwicGxhY2VtZW50Iiwic2xpZGVzanMiLCJuYXZpZ2F0aW9uIiwiYWN0aXZlIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImZhZGUiLCJzcGVlZCIsImNyb3NzZmFkZSIsImNhbGxiYWNrIiwibG9hZGVkIiwibnVtYmVyIiwiJGltZyIsInZpc2liaWxpdHkiLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY29tcGxldGUiLCJuZXdJbWciLCJ0aW1lbGluZUNvbnRyb2xQYXJ0aWFsIiwiX3RpbWVsaW5lQ29sbGFwc2UiLCJfaGFuZGxlRmlsdGVyIiwiY29udHJvbGhlaWdodCIsIm1hcGhlaWdodCIsImRvY3VtZW50aGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiTWF0aCIsImFicyIsImNvbXBhcmVUbyIsInBhdGhzIiwiYmFja2JvbmUiLCJib290c3RyYXAiLCJqcXVlcnkiLCJsZWFmbGV0IiwibGlnaHRib3giLCJ1bmRlcnNjb3JlIiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwicm91dGVzIiwiZGVidWciXSwibWFwcGluZ3MiOiJBQUNBQSxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLGtCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNDLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJGLEVBQVNHLFdBQVdDLFFBQ3pDQyxNQUFPSixHQUVYLE9BQU9DO0FDVlhMLE9B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R0FBSTJSLElBQ1B3SixJQUFLIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvYXJ0aWNsZXMnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBBcnRpY2xlTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIEFydGljbGVzQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxUaW1lbGluZUl0ZW1Nb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgICAgICBtb2RlbDogVGltZWxpbmVJdGVtTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIFRpbWVsaW5lQ29sbGVjdGlvbjtcbn0pO1xuIiwiZGVmaW5lKCdjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUnLCBbXG4gICAgICAnbGVhZmxldCdcbiAgICAsICdkMydcbl0sIGZ1bmN0aW9uIChMLGQzKSB7XG4gICAgaWYgKEwuQ29udHJvbC5UaW1lbGluZSkgcmV0dXJuIEw7XG4gICAgTC5Db250cm9sLlRpbWVsaW5lID0gTC5Db250cm9sLmV4dGVuZCh7XG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uIDogJ2xlZnQnXG4gICAgICAgICAgICAgICwgaGVpZ2h0ICAgICAgOiA1MDBcbiAgICAgICAgICAgICAgLCB3aWR0aCAgICAgICA6IDEwMFxuICAgICAgICAgICAgICAsIG1hcmdpbiAgICAgIDogeyBsZWZ0OiAzLCByaWdodDogMywgdG9wOiAxMCwgYm90dG9tOiA1IH1cbiAgICAgICAgICAgICAgLCBjb2xsYXBzZWQgICA6IHRydWVcbiAgICAgICAgICAgICAgLCBpdGVtICAgICAgICA6IHttaW5IZWlnaHQ6MX1cbiAgICAgICAgICAgICAgLCBvbiAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgLCB0aXRsZSAgICAgICA6ICdUaW1lbGluZSdcbiAgICAgICAgICAgICAgLCBwb3NpdGlvbiAgICA6ICd0b3BsZWZ0J1xuICAgICAgICB9XG4gICAgICAgICwgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKG1hcCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgICAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUgbGVhZmxldC1jb250cm9sJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhjb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZSA9IHRoaXMuX3RvZ2dsZSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2EnLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLXRvZ2dsZScsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnRpdGxlID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5saW5rID0gJyMnO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmdW5jdGlvbigpIHsgdGhhdC5fZXhwYW5kKCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKEwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgICAgICBMLkRvbUV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFMLkJyb3dzZXIudG91Y2gpIHtcbiAgICAgICAgICAgICAgICBMLkRvbUV2ZW50LmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy5fY29udGFpbmVyLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgb25SZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gZG8gYW55IGNsZWFudXAgaGVyZVxuICAgICAgICB9XG4gICAgICAgICwgb25BZGQ6IGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAsIF9leHBhbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoYXQuX2V4cGFuZGVkKSByZXR1cm47XG4gICAgICAgICAgICB0aGF0Ll9leHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9tYXAub24oJ2NsaWNrJywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuXG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fdGltZWxpbmUpIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGlubmVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLmhlaWdodCAtIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICAgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmJvdHRvbTtcbiAgICAgICAgICAgIHZhciBpbm5lcldpZHRoICA9IHRoaXMub3B0aW9ucy53aWR0aCAgLSB0aGlzLm9wdGlvbnMubWFyZ2luLnJpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi5sZWZ0O1xuXG4gICAgICAgICAgICB2YXIgeFNjYWxlID0gdGhpcy5feFNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJXaWR0aF0pO1xuXG4gICAgICAgICAgICB2YXIgeVNjYWxlID0gdGhpcy5feVNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAuZG9tYWluKFt0aGlzLl9zb3VyY2Uuc3RhcnQsdGhpcy5fc291cmNlLmVuZF0pXG4gICAgICAgICAgICAgICAgLnJhbmdlKFswLGlubmVySGVpZ2h0XSk7XG5cbiAgICAgICAgICAgIHZhciB0aW1lbGluZSA9IHRoaXMuX3RpbWVsaW5lID0gZDMuc2VsZWN0KCcubGVhZmxldC1jb250cm9sLXRpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICd0aW1lbGluZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5vcHRpb25zLndpZHRoKTtcblxuICAgICAgICAgICAgdmFyIGJhbmQgPSB0aW1lbGluZS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsJ2JhbmQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIChpbm5lcldpZHRoLzIgLSB0aGlzLm9wdGlvbnMubWFyZ2luLnJpZ2h0KSlcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaW5uZXJIZWlnaHQpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zbGF0ZSgnICsgLjI1KmlubmVyV2lkdGggKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKSdcbiAgICAgICAgICAgICAgICAgICAgKyAnIHNjYWxlKC43NSAxLjApJ1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGJhbmQuc2VsZWN0QWxsKCdnJylcbiAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zb3VyY2UuZ2V0SXRlbXMoKSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsJ3RpbWVsaW5lLWl0ZW0nKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5tYXgoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMuaXRlbS5taW5IZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgeVNjYWxlKGQuZHVyYXRpb24oKSlcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLGlubmVyV2lkdGgpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwgJyArIHlTY2FsZShkLnN0YXJ0KSArICcpJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGJydXNoID0gdGhpcy5fYnJ1c2ggPSBkMy5zdmcuYnJ1c2goKVxuICAgICAgICAgICAgICAgIC55KHlTY2FsZSlcbiAgICAgICAgICAgICAgICAub24oJ2JydXNoZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRTdGFydCA9IHlTY2FsZShicnVzaC5leHRlbnQoKVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRFbmQgICA9IHlTY2FsZShicnVzaC5leHRlbnQoKVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICwgc2VsZWN0ZWQgOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0U3RhcnQgIT09IGV4dEVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjYmFuZCcpLnNlbGVjdEFsbCgncmVjdC50aW1lbGluZS1pdGVtJykuZWFjaChmdW5jdGlvbihpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHlTY2FsZShpLnN0YXJ0KSA8PSBleHRFbmQpICYmICh5U2NhbGUoaS5lbmQpICAgPj0gZXh0U3RhcnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnNlbGVjdGVkLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuY2xlYXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5vbi5icnVzaGVuZChyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgeUJydXNoID0gYmFuZC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYnJ1c2gnKVxuICAgICAgICAgICAgICAgIC5jYWxsKGJydXNoKTtcbiAgICAgICAgICAgIHlCcnVzaC5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aCk7XG5cbiAgICAgICAgICAgIHZhciB5QXhpcyA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYXhpcycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnICsgKCguMjUqaW5uZXJXaWR0aCkgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQpICsgJywnICsgdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgKyAgJyknKTtcblxuICAgICAgICAgICAgdmFyIGF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgLnNjYWxlKHlTY2FsZSlcbiAgICAgICAgICAgICAgICAub3JpZW50KHRoaXMub3B0aW9ucy5vcmllbnRhdGlvbilcbiAgICAgICAgICAgICAgICAudGlja1NpemUoNiwgMClcbiAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyh0aGlzLl9zb3VyY2UudGlja1ZhbHVlcygpKVxuICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc291cmNlLnRpY2tGb3JtYXQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB5QXhpcy5jYWxsKGF4aXMpO1xuICAgICAgICB9XG4gICAgICAgICwgX2NvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2V4cGFuZGVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAgKHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSB8fCB0eXBlb2YgdGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub24uY29sbGFwc2UoKTtcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVsaW5lJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLl9leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgTC5jb250cm9sLnRpbWVsaW5lID0gZnVuY3Rpb24obWFwLHNvdXJjZSxvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTC5Db250cm9sLlRpbWVsaW5lKG1hcCxzb3VyY2Usb3B0aW9ucyk7XG4gICAgfTtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAndmlld3MvaXNzdWUnXG4gICAgLCAnbW9kZWxzL2lzc3VlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsQXN5bmNJbml0LElzc3VlVmlldyxJc3N1ZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3IDogbnVsbFxuICAgICAgICAsIHJvdXRlcjogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IElzc3VlTW9kZWwoeyBjb25maWc6IGFyZ3MuY29uZmlnIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IElzc3VlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgY29uZmlnOiBhcmdzLmNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1vZGVsLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKGFydGljbGUsICdhY3RpdmUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2FydGljbGUvJyArIGFydGljbGUuZ2V0KCdhcnRpY2xlaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucm91dGVyLm5hdmlnYXRlKHVybCwge3RyaWdnZXI6IHRydWV9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXJBcnRpY2xlKGFydGljbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKElzc3VlQ29udHJvbGxlci5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21vZGVscy9tYXAnXG4gICAgLCAndmlld3MvbWFwJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL3BhbidcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixNYXBNb2RlbCxNYXBWaWV3LEFzeW5jSW5pdCxNYXBQYW5Db250cm9sbGVyLE1hcExheWVyQ29udHJvbGxlcixNYXBUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcENvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3OiAgbnVsbFxuICAgICAgICAsIGlzc3VlOiBudWxsXG4gICAgICAgICwgbWFwUGFuQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBNYXBMYXllckNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgbWFwVGltZWxpbmVDb250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgTWFwTW9kZWwoYXJncyk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgTWFwVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdC5yb3V0ZXJcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiB0aGF0Lmlzc3VlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIgPSBuZXcgTWFwUGFuQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwTGF5ZXJDb250cm9sbGVyID0gbmV3IE1hcExheWVyQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlldyAgOiB0aGF0LnZpZXdcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ21hcmtlcnMnLCBmdW5jdGlvbihtYXJrZXJWaWV3cyl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX3JlZ2lzdGVyTWFya2VycyhtYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5maXRNYXJrZXJCb3VuZHModGhhdC52aWV3Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLFt0aGF0Lm1vZGVsLmluaXQoKSwgdGhhdC52aWV3LmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9yZWdpc3Rlck1hcmtlcnMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgXy5mb3JFYWNoKG1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnYWN0aXZlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ3RvZ2dsZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cFRvZ2dsZShtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoYXQuX2dldE1hcmtlckxheWVyKG1hcmtlclZpZXcubWFya2VyTGF5ZXIsICdnZXRQb3B1cCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya2VyICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmhhbmRsZVBvcHVwUG9zaXRpb24obWFya2VyLmdldFBvcHVwKCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywgJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBPcGVuKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXcubW9kZWwudHJpZ2dlcignYWN0aXZlJywgbWFya2VyVmlldy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3LCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGF0LnZpZXcubWFwLmhvdmVyUG9wdXApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5wb3B1cFtwb3B1cGlkKG1hcE1hcmtlci5nZXRMYXRMbmcoKSldKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2dldE1hcmtlckxheWVyIDogZnVuY3Rpb24ob2JqLG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyLCBsYXllcnM7XG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgTC5MYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmo7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gb2JqLmdldExheWVycygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2JqID0gbGF5ZXJzLnBvcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kIGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhvYmosICdvcmlnaW5hbEV2ZW50JykpIHtcbiAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iai50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFwTWFya2VyTGF5ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cE9wZW46IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnb3BlblBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwVG9nZ2xlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ3RvZ2dsZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci50b2dnbGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBDbG9zZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICdjbG9zZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9wcm90b3R5cGUnLCBbXG4gICAgICAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCdjb250cm9sbGVyJyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgQ29udHJvbGxlci5leHRlbmQgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMpO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCB7IFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pbXBsZW1lbnRlZCBpbml0aWFsaXplKCknKTtcbiAgICAgICAgfSBcbiAgICB9KTtcbiAgICByZXR1cm4gQ29udHJvbGxlcjtcbn0pOyIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvYXN5bmNJbml0JywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBc3luY0luaXQgPSB7XG4gICAgICAgICAgJGRlZjogbnVsbFxuICAgICAgICAsIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRlZi5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY0luaXQ7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZG9td2F0Y2hlcicsIFtcbiAgICAnanF1ZXJ5JyBcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIERPTVdhdGNoZXIgPSB7XG4gICAgICAgIHdhdGNoRE9NIDogZnVuY3Rpb24obXMsc2VsLCRkZWYpIHtcbiAgICAgICAgICAgIGlmICghc2VsKSB0aHJvdyBcIkVtcHR5IHNlbGVjdG9yIGluIHdhdGNoRE9NKClcIjtcbiAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRE9NV2F0Y2hlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9mZXRjaHhtbCcsIFtcbiAgICAnanF1ZXJ5J1xuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRmV0Y2hYTUwgPSB7XG4gICAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBQcm9taXNlIGludGVyZmFjZVxuICAgICAgICAvLyB3aGVuIHN1Y2Nlc3NmdWwsIHRoZSBQcm9taXNlIHJldHVybnMgdGhlIGRhdGEgZmV0Y2hlZFxuICAgICAgICAvLyBieSB0aGUgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaXMgYSBEb2N1bWVudFxuICAgICAgICBmZXRjaFhNTCA6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgdmFyICRnZXQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAneG1sJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICRnZXQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJGdldC5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGZXRjaFhNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy94bWwyaHRtbCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgWE1MMkhUTUwgPSB7XG4gICAgICAgIF9kb2M6IGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgdmFyIHhtbERvYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4bWwgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IHhtbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGRvY3VtZW50IGlucHV0IGluIFhNTDJIVE1MXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhtbERvYyA9PSBudWxsIHx8ICgheG1sRG9jLmhhc093blByb3BlcnR5KCdnZXRFbGVtZW50c0J5VGFnTmFtZScpICYmIHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCBpbiB4bWwyaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHJldHVybiBIVE1MIG9yIEpTT04gc3RyaW5nIGZyb20gWFNMVCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICB4bWwyaHRtbDogZnVuY3Rpb24oeG1sLHhzbCxwYXJhbXMsbW9kZSkge1xuICAgICAgICAgICAgdmFyIHhtbERvYyA9IHRoaXMuX2RvYyh4bWwpLFxuICAgICAgICAgICAgICAgIHhzbERvYyA9IHRoaXMuX2RvYyh4c2wpO1xuICAgICAgICAgICAgdmFyIHhzbHRQcm9jZXNzb3IgPSBuZXcgWFNMVFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5pbXBvcnRTdHlsZXNoZWV0KHhzbERvYyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHBhcmFtcyksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHhzbHRQcm9jZXNzb3Iuc2V0UGFyYW1ldGVyKG51bGwsa2V5LHBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB4c2x0UHJvY2Vzc29yLnRyYW5zZm9ybVRvRG9jdW1lbnQoeG1sRG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy88dHJhbnNmb3JtaWl4OnJlc3VsdD4uLi48L3RyYW5zZm9ybWlpeDpyZXN1bHQ+XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9IGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluIFhTTFQgdHJhbnNmb3JtOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBYTUwySFRNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9mZXRjaHhtbCdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9nZW9qc29uLnhzbCdcbiAgICAsICd0ZXh0IXhzbC9jaXRlZC1yYW5nZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRmV0Y2hYTUwsQXN5bmNJbml0LFhNTDJIVE1MLGdlb0pzb25Yc2wsY2l0ZWRSYW5nZVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgJGdldCA9IHRoYXQuZmV0Y2hYTUwodGhhdC5nZXQoJ3BhdGgnKSk7XG4gICAgICAgICAgICAkLndoZW4oJGdldCkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3htbCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rR2VvanNvbigpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rQ2l0ZWRSYW5nZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lmdlb2pzb24gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdwbGFjZVR5cGUnLCB0aGF0Lmdlb2pzb24ucHJvcGVydGllcy5sYXllcik7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgLy9UT0RPOiAneG1sJzogc2VyaWFsaXplPyBhbmQgY2FjaGUgdG8gbG9jYWxzdG9yYWdlXG4gICAgICAgICAgICAvLyBhZGQgYWRhcHRlciBmb3IgYWNjZXNzIHRocm91Z2ggLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgXCJ4bWxcIiAgICAgICA6IG51bGwgICAgLy8gRG9jdW1lbnRcbiAgICAgICAgICAgICwgXCJwbGFjZVR5cGVcIiA6IG51bGxcbiAgICAgICAgICAgICwgXCJpY29uVXJsXCIgICA6ICcnXG4gICAgICAgICAgICAsIFwiY2l0ZWRSYW5nZVwiOiB7fVxuICAgICAgICB9LFxuICAgICAgICBnZW9qc29uOiBudWxsLFxuICAgICAgICBnZXRHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb2pzb24gPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW9qc29uO1xuICAgICAgICB9LFxuICAgICAgICBfbWtHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgZ2VvSnNvblhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW9qc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgZ2VvanNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbWtDaXRlZFJhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgY2l0ZWRSYW5nZVhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ2NpdGVkUmFuZ2UnLCBKU09OLnBhcnNlKGpzb25TdHJpbmcpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY2l0ZWQgcmFuZ2UganNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxGZXRjaFhNTCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2FydGljbGUnXG4gICAgLCAnY29sbGVjdGlvbnMvYXJ0aWNsZXMnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwsQXJ0aWNsZUNvbGxlY3Rpb24sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgYXJ0ZGlyICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlO1xuICAgICAgICAgICAgaWYgKCFhcnRkaXIubWF0Y2goL1xcLyQvKSkgYXJ0ZGlyICs9ICcvJztcbiAgICAgICAgICAgIHZhciBmaWxlcyAgID0gYXJncy5jb25maWcuYXJ0aWNsZXMuZmlsZXM7XG4gICAgICAgICAgICB2YXIgY29sICAgICA9IG5ldyBBcnRpY2xlQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIC8vIGZpeCBsZW5ndGggb2YgYXJ0aWNsZXMgYXJyYXlcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IF8ubWFwKF8ucmFuZ2UoZmlsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgLy8gYXJ0aWNsZXMgY29uc3RydWN0ZWQgc3luYywgc28gYXJ0aWNsZSBvYmplY3RzIGFkZGVkIHRvIGxpc3QgYnkgaW5kZXhcbiAgICAgICAgICAgIF8uZWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSxpKSB7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZXNbaV0gPSBuZXcgQXJ0aWNsZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgaSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWRpcjogYXJ0ZGlyLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAgICAgICBhcnRkaXIgKyBmaWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbml0cyA9IF8ubWFwKGFydGljbGVzLCBmdW5jdGlvbihhcnRpY2xlKXtyZXR1cm4gYXJ0aWNsZS5pbml0KCk7fSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKGFydGljbGVzKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldEljb25zKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGluaXRzLCBmdW5jdGlvbigkcHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkcHJvbWlzZS5zdGF0ZSgpID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTsgLy8gbm90IHJlLXNldCBvbiBmYWlsdXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXAgbWFya2VyIGljb25zIGZpbGVuYW1lIHZhbHVlcyBhcmUgc2V0IGhlcmU7IGljb24gY29sb3JzIGFyZSBhc3NpZ25lZFxuICAgICAgICAvLyByYW5kb21seSwgc28gdG8gc3VwcG9ydCBhIGNvbnNpc3RlbmN5IGJldHdlZW4gdGhlIGNvbG9yIGFuZCB0aGUgcGxhY2UtdHlwZVxuICAgICAgICAvLyBsYXllciwgdGhleSBtdXN0IGJlIGFzc2lnbmVkIGFzIGEgZ3JvdXBcbiAgICAgICAgLCBzZXRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaWNjb25maWcgID0gdGhhdC5jb25maWcubWFya2Vycy5pY29ucztcbiAgICAgICAgICAgIHZhciBpY29uRmlsZXMgPSBfLnNodWZmbGUoXy5mbGF0dGVuKFxuICAgICAgICAgICAgICAgIF8ubWFwKGljY29uZmlnLCBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoZW50cnkuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5kaXIuY29uY2F0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEljb25GaWxlID0gaWNvbkZpbGVzLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGljb25zID0gW107XG4gICAgICAgICAgICAvLyBkbyBtYXAgbWFya2VyIGljb24gaW5pdGlhbGl6YXRpb247IHRoaXMgc2VlbXMgbGlrZSBpdCBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIGlzb2xhdGVkIHRvIHRoZSBNYXBWaWV3IG9yIE1hcmtlclZpZXcsIGJ1dCBpcyBkYXRhIHVzZWRcbiAgICAgICAgICAgIC8vIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb24sIHNvIHRoZXkgYXJlIGFzc2lnbmVkIGhlcmVcbiAgICAgICAgICAgIHRoYXQuZ2V0KCdjb2xsZWN0aW9uJykuZm9yRWFjaChmdW5jdGlvbihhcnRpY2xlLGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvanNvbiA9IChhcnRpY2xlLmdldEdlb2pzb24oKSB8fCB7XCJwcm9wZXJ0aWVzXCI6e319KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBnZW9qc29uLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWNvbnNbbGF5ZXJdID0gaWNvbnNbbGF5ZXJdIHx8IGljb25GaWxlcy5wb3AoKSB8fCBkZWZhdWx0SWNvbkZpbGU7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZS5zZXQoJ2ljb25VcmwnLCBpY29uc1tsYXllcl0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIGFydGljbGUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gYXJndW1lbnQ7XG4gICAgICAgIC8vIGFyZ3VtZW50IG1heSBiZSBlaXRoZXIgYW4gaW5kZXggaW50byB0aGUgY29sbGVjdGlvblxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBwcm92aWRlZCBieSBhIHVybCkgb3IgYW4gQXJ0aWNsZU1vZGVsXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHNlbGVjdGVkIGJ5IGEgbWFwIG1hcmtlcikgXG4gICAgICAgICwgZ2V0QXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgdmFyIGFydDtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFydCA9IGFydGljbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJ0aWNsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBjb2wuYXQoYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJ0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTihhcmdzLmNvbmZpZy5tYXAuY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ21hcGNvbmZpZycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvYWQgbWFwIGNvbmZpZyBmaWxlOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtYXBjb25maWdcIiA6IHt9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgncm91dGVzL3JvdXRlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2NsZWFyJ1xuICAgICwgJ2NvbnRyb2xsZXJzL2lzc3VlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcCdcbiAgICAsICd2aWV3cy9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsQ2xlYXJWaWV3LElzc3VlQ29udHJvbGxlcixNYXBDb250cm9sbGVyLE1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBSb3V0ZXIgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kKHtcbiAgICAgICAgICBwYWdlcyAgIDoge30gICAvLyBjb25maWcgZm9yIHN1cHBvcnRlZCBwYWdlc1xuICAgICAgICAsIGNvbmZpZyAgOiB7fSAgIC8vIGdsb2JhbCBzaXRlIGNvbmZpZ3VyYXRpb24sIGkuZS4sIHNpdGUuanNvblxuICAgICAgICAsIGlzc3VlQ29udHJvbGxlciA6IG51bGwgLy8gSXNzdWVNb2RlbCBmb3IgdGhpcyBhcHBcbiAgICAgICAgLCBtYXBDb250cm9sbGVyICAgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBvcHRzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMucGFnZXMgID0gb3B0cy5jb25maWcucGFnZXM7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlciA9IG5ldyBJc3N1ZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgcm91dGVyOiB0aGlzXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoaXMuY29uZmlnIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlzc3VlQ29udHJvbGxlci5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBwYWdlcy5yb3V0ZXIuaGlzdG9yeSA9IHRydWUgYnkgZGVmYXVsdCwgaWYgbWlzc2luZ1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyh0aGF0LnBhZ2VzLnJvdXRlciwnaGlzdG9yeScpICYmICEhdGhhdC5wYWdlcy5yb3V0ZXIuaGlzdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgICwgcGFnZTogZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBhZ2VDb25maWc7XG4gICAgICAgICAgICB2YXIgbWFwUGFnZSA9IGZhbHNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXBhZ2UpIHBhZ2UgPSB0aGlzLnBhZ2VzLmhvbWU7XG4gICAgICAgICAgICAgICAgcGFnZUNvbmZpZyA9IHRoaXMucGFnZXMucGFnZXNbcGFnZV07XG4gICAgICAgICAgICAgICAgaWYgKHBhZ2VDb25maWcgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNvbmZpZyBpbiByb3V0ZXIvcGFnZScpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhZ2UoJzQwNCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3IENsZWFyVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgXy5lYWNoKHBhZ2VDb25maWcsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXdOYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVDb250cm9sbGVyLm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBjb25maWcgdG8gYXZvaWQgZ2xvYmFsIGNoYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYykpO1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyhjb25maWcsICd2aWV3JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSBjb25maWcudmlldztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmZpZywgJ3BhcnRpYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9ICd2aWV3cy9wYXJ0aWFsJztcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBhcnRpYWwucGFnZSA9IHRoYXQucGFnZXMucGF0aEJhc2UgKyBjb25maWcucGFydGlhbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gXy5leHRlbmQoYXJncyxjb25maWcucGFydGlhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25mZywgJ2Z1bGwnKSkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbmZpZy5mdWxsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHBhZ2UgdHlwZSBpbiByb3V0ZXI6ICcgKyBwYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdOYW1lID09PSAndmlld3MvbWFwJykge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIgPSBuZXcgTWFwQ29udHJvbGxlcihhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwUGFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbdmlld05hbWVdLCBmdW5jdGlvbihWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdi5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIW1hcFBhZ2UpIHRoYXQubWFwQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLCBhcnRpY2xlIDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCQoJyN0aXRsZXBhZ2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3RpdGxlcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyNwYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhhdC5tYXBDb250cm9sbGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBNZW51VmlldyhhcmdzKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHNlbGVjdCB0aGUgYXJ0aWNsZSBpbmRpY2F0ZWQgYnkgdGhlIHVybCdzIHJvdXRlIG9ubHkgYWZ0ZXJcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgaGFzIGluaXRpYWxpemVkXG4gICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFydGljbGUgPSB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbC5nZXRBcnRpY2xlKGlkKTsgXG4gICAgICAgICAgICAgICAgYXJ0aWNsZS50cmlnZ2VyKCdhY3RpdmUnLCBhcnRpY2xlKTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUm91dGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgndmlld3MvYXBwJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNpZ25hbCA9IHt9O1xuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcHBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeSdcbiAgICAsICdtaXhpbnMveG1sMmh0bWwnXG4gICAgLCAndGV4dCF4c2wvYXJ0aWNsZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsR2FsbGVyeVZpZXcsWE1MMkhUTUwseHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgaWQ6ICdhcnRpY2xlJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRlbCA9ICQoJyMnICsgdGhhdC5pZCk7XG4gICAgICAgICAgICBpZiAodGhhdC4kZWwuZmluZCgnIycgKyB0aGF0Lm1vZGVsLmNpZCkubGVuZ3RoICE9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBodG1sID0gdGhpcy54bWwyaHRtbChcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLmdldCgneG1sJyksIHhzbCwgXG4gICAgICAgICAgICAgICAge1wiYXJ0aWNsZS1kaXJcIjogdGhhdC5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2VcbiAgICAgICAgICAgICAgICAsIFwiaWNvblVybFwiICAgIDogdGhhdC5tb2RlbC5nZXQoJ2ljb25VcmwnKVxuICAgICAgICAgICAgICAgICwgXCJjaWRcIiAgICAgICAgOiB0aGF0Lm1vZGVsLmNpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICQoJy5hcnRpY2xlLWNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjJyt0aGlzLmlkKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcnRpY2xlIGxvYWQgZXJyb3I6IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBHYWxsZXJ5VmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjZm9vdGVyJykucmVtb3ZlKClcbiAgICAgICAgICAgICAgICAkKCdhcnRpY2xlJykucmVtb3ZlQ2xhc3MoJ2JlZm9yZS1mb290ZXInKS5hZGRDbGFzcygnbm8tZm9vdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LiRlbC5maW5kKCcuYXJ0aWNsZS1tYXJrZXInKS5jbGljayhmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHRoYXQubW9kZWwudHJpZ2dlcigndG9nZ2xlJywgdGhhdC5tb2RlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99LFxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9jbGVhcicsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENsZWFyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJ2JvZHknKS5lbXB0eSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIENsZWFyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pc3N1ZS5odG1sJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCxBcnRpY2xlVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogICAgICAgICAnI2lzc3VlJyxcbiAgICAgICAgdGVtcGxhdGU6ICAgXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQodG1wbCk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlckFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIG5ldyBBcnRpY2xlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIGFydGljbGVcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogdGhpcy5tb2RlbC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhpc1xuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGlzLm1vZGVsLnJvdXRlclxuICAgICAgICAgICAgfSkucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gSXNzdWVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcC5odG1sJ1xuICAgICwgJ3ZpZXdzL21hcmtlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsbWFwUGFydGlhbCxNYXJrZXJWaWV3LEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogICAgICAnbWFwJ1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgbWFya2VyVmlld3M6IFtdIC8vIHN1YnZpZXdzXG4gICAgICAgICwgbWFwY29uZmlnOiB7fVxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBhcmdzLm1vZGVsO1xuICAgICAgICAgICAgdGhhdC5pc3N1ZSA9IGFyZ3MuaXNzdWU7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sW3RoYXQuaXNzdWUuaW5pdCgpLCB0aGF0Lm1vZGVsLmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSB0aGF0Lm1vZGVsLmdldCgnbWFwY29uZmlnJyk7XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkubGVuZ3RoID4gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmNoaWxkcmVuKCkubGVuZ3RoID4gMCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoYXQuX2luaXRNYXAoKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9pbml0TWFwIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG1hcFBhcnRpYWwpO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwID0gbmV3IEwuTWFwKHRoYXQubWFwY29uZmlnLmlkLCB0aGF0Lm1hcGNvbmZpZy5tYXApO1xuICAgICAgICAgICAgICAgIG5ldyBMLlRpbGVMYXllcih0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIudXJsLCB0aGF0Lm1hcGNvbmZpZy50aWxlTGF5ZXIub3B0cykuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgICAgIG5ldyBMLmNvbnRyb2wuc2NhbGUodGhhdC5tYXBjb25maWcuc2NhbGUpLmFkZFRvKHRoYXQubWFwKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IF8ubWFwKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTWFya2VyVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsICAgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnIDogdGhhdC5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5ld1ZpZXdzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gXy5tYXAodGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFydGljbGUubWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlLm1hcmtlclZpZXcgPSBuZXcgTWFya2VyVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsICAgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICwgbWFwY29uZmlnIDogdGhhdC5tYXBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhcnRpY2xlLm1hcmtlclZpZXc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtdikgeyBtdi5yZW5kZXIoKTsgfSk7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21hcmtlcnMnLCB0aGF0Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9pbml0TWFwKCk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obXYpIHsgbXYucmVuZGVyKCkgfSk7XG4gICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21hcmtlcnMnLCB0aGF0Lm1hcmtlclZpZXdzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcmtlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLWxlZ2VuZC5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwsbGVnZW5kUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFya2VyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKVxuICAgICAgICAsIGVsOiAnJ1xuICAgICAgICAsIG1hcmtlckxheWVyOiBudWxsXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgbWFwY29uZmlnOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gYXJncy5tYXBjb25maWc7XG4gICAgICAgICAgICB0aGF0LmluaXRNYXJrZXJMYXllcigpO1xuICAgICAgICB9XG4gICAgICAgICwgaW5pdE1hcmtlckxheWVyIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZ2VvanNvbiA9IHRoaXMubW9kZWwuZ2V0R2VvanNvbigpO1xuICAgICAgICAgICAgdmFyIGljb25Db25maWcgPSB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5pY29uO1xuICAgICAgICAgICAgaWNvbkNvbmZpZy5pY29uVXJsID0gKHRoaXMubW9kZWwuZ2V0KCdpY29uVXJsJykgfHwgJycpO1xuICAgICAgICAgICAgdmFyIGljb24gPSBMLmljb24oaWNvbkNvbmZpZyk7XG4gICAgICAgICAgICB0aGF0Lm1hcmtlckxheWVyID0gTC5nZW9Kc29uKGdlb2pzb24sIHtcbiAgICAgICAgICAgICAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbWFwTWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgcG9wdXAgdG8gdGhpcyBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gTC5wb3B1cCh0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5wb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwLnNldENvbnRlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICB0aGF0Lm1vZGVsLmdldCgnYXJ0aWNsZWlkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvanNvbjogICAgdGhhdC5tb2RlbC5nZXRHZW9qc29uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5iaW5kUG9wdXAocG9wdXApO1xuICAgICAgICAgICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIGZvciB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFya2VyLCB3aGljaCB3b3VsZCBjbG9zZSB0aGUgcG9wdXAgaWYgaXRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2VyZSBhbHJlYWR5IG9wZW5cbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignY2xpY2snLCBldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbW91c2VvdmVyJywgZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwb2ludFRvTGF5ZXI6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEwubWFya2VyKGxhdGxuZywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uICAgICAgICA6IGljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICwgY2xpY2thYmxlICAgOiAhIWZlYXR1cmUucHJvcGVydGllcy50ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHRpdGxlICAgICAgIDogKGZlYXR1cmUucHJvcGVydGllcy5tYXJrZXJuYW1lIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBvcGFjaXR5ICAgICA6IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLm9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICwgcmlzZU9uSG92ZXIgOiB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5yaXNlT25Ib3ZlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtlckxheWVyLmFkZFRvKHRoaXMubWFwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXJrZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tZW51JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWVudS5odG1sJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxtZW51VG1wbCxET01XYXRjaGVyLEFydGljbGVNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWVudVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKG1lbnVUbXBsKSxcbiAgICAgICAgICBpZDogICAgICAnbWVudSdcbiAgICAgICAgLCB0YWdOYW1lOiAnZGl2J1xuICAgICAgICAsIGlzc3VlOiAgIG51bGxcbiAgICAgICAgLCBjb25maWc6ICB7fVxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLmlzc3VlICA9IGFyZ3MuaXNzdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGF0LmlkKS5jaGlsZHJlbigpLmxlbmd0aCAhPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5jb25maWcubWVudTtcbiAgICAgICAgICAgIC8vIHJlbmRlciBlYWNoIGl0ZW0gZnJvbSB0aGUgY29uZmlnIGZpbGUgdG8gYSA8bGk+XG4gICAgICAgICAgICAvLyBtdXN0IGJlIGRvbmUgYXN5bmMgZHVlIHRvIHJldHJpZXZhbCBvZiBwYXJ0aWFsIGZpbGVzXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAvLyBjYWNoZSBvZiB0ZW1wbGF0ZSBzdHJpbmdzOiB1cmwgPT4gdGVtcGxcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgXy5lYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbaXRlbS5wYXJ0aWFsXSA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW0uY29sbGVjdGlvbiA9PT0gXCJjb2xsZWN0aW9ucy9hcnRpY2xlc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dID0gdGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaGFuZGxlZCBjb2xsZWN0aW9uIHR5cGUgcmVxdWVzdGVkOiBcIiArIGl0ZW0uY29sbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXModGVtcGxhdGVzKSwgZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIHVybF0sIGZ1bmN0aW9uKHRlbXBsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlc1t1cmxdID0gXy50ZW1wbGF0ZSh0ZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goJGRlZi5wcm9taXNlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW5kZXIgdGhlIG1lbnUgYXMgYSA8ZGl2PlxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICQud2hlbi5hcHBseSgkLCBwcm9taXNlcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0saSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gaXRlbS5wYXJ0aWFsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVyID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0S2V5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAncGFnZScgfHwgaXRlbS50eXBlID09PSAnc2VwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dLm1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGVsLGopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiAgICA9IGl0ZW0uaXRlbS5ocmVmLnJlcGxhY2UoJzppJywgaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtdiAgICAgPSBuZXcgQXJ0aWNsZU1lbnVWaWV3KHttb2RlbDptb2RlbH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgID0gYW12LnJlbmRlcih7aHJlZjogJyMnICsgaHJlZn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBhbiA8bGk+IGVsZW1lbnQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdMSScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0Lm91dGVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRvY3VtZW50IGVsZW1lbnQgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlc3VsdCB0eXBlIGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmZpbmQoJ2EnKS50ZXh0KCldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cyA9IF8ua2V5cyhzb3J0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMuc29ydChmdW5jdGlvbihhLGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2goc29ydEtleXMsIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSBzb3J0ZXJba2V5XVswXS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN1YkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyMnICsgdGhhdC5pZCkuZW1wdHkoKS5hcHBlbmQodGhhdC50ZW1wbGF0ZSh7Y29udGVudDogY29udGVudH0pKTtcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIHRoYXQgdGhlIG1lbnUgaGFzIGxvYWRlZFxuICAgICAgICAgICAgICAgIHZhciAkZmFpbERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkZmFpbERlZi5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC53YXRjaERPTSg1MDAsICcjJyArIHRoYXQuaWQsICRmYWlsRGVmKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGJ1aWxkIG1lbnUuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNZW51Vmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYWdlJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy9kb213YXRjaGVyJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wYWdlLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixwYWdlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYWdlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZChwYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJGRlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYWdlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIFBhZ2VWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYXJ0aWFsJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhcnRpYWxWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJycsXG4gICAgICAgIHBhZ2U6ICcnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5lbCAgID0gb3B0cy5lbDtcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyBvcHRzLnBhZ2VdLCBmdW5jdGlvbihodG1sKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wYWdlID0gaHRtbDtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkd2F0Y2hEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LmluaXQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHRoYXQucGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCR3YXRjaERlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFBhcnRpYWxWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvbGF5ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllci9wbGFjZXR5cGUnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsUGxhY2VUeXBlQ29udHJvbGxlcixUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcExheWVyQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICB2aWV3ICAgOiBudWxsXG4gICAgICAgICwgcm91dGVyIDogbnVsbFxuICAgICAgICAsIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gYXJncy52aWV3O1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IGFyZ3MubW9kZWw7XG4gICAgICAgICAgICB2YXIgcGxhY2VUeXBlQ29udHJvbGxlciA9IG5ldyBQbGFjZVR5cGVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgIHZpZXdzIDogdGhhdC52aWV3Lm1hcmtlclZpZXdzXG4gICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZzogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLm1hcGNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgdGltZWxpbmVDb250cm9sbGVyID0gbmV3IFRpbWVsaW5lQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3cyA6IHRoYXQudmlldy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgICAgICwgbWFwICAgICAgICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgLCBzaXRlY29uZmlnICA6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5jb25maWdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC5zdWJDb250cm9sbGVycyA9IFtwbGFjZVR5cGVDb250cm9sbGVyLCB0aW1lbGluZUNvbnRyb2xsZXJdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQuc3ViQ29udHJvbGxlcnMsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHN1YkNvbnRyb2xsZXIsICdmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fdXBkYXRlTWFya2VycygpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaWx0ZXIgdGhlIHZpc2libGUgbWFwIG1hcmtlcnMgYmFzZWQgb24gdGhlIHBsYWNldHlwZSBhbmQgdGhlXG4gICAgICAgIC8vIHRpbWVsaW5lIGxheWVyIGNvbnRyb2xzOyB0aGUgXCJoaWRlXCIgc3RhdGUgdGFrZXMgcHJlY2VkZW5jZSBpZlxuICAgICAgICAvLyB0aGUgY29udHJvbHMgZGlzYWdyZWUgKGkuZS4sIGEgbWFya2VyIHRoYXQgaXMgaGlkZGVuIG9uIGFueVxuICAgICAgICAvLyBjb250cm9sIGlzIGhpZGRlbiBvbiB0aGUgbWFwKVxuICAgICAgICAsIF91cGRhdGVNYXJrZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzaG93ID0gW10sIGhpZGUgPSBbXTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnN1YkNvbnRyb2xsZXJzLCBmdW5jdGlvbihzdWJDb250cm9sbGVyKXtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gc3ViQ29udHJvbGxlci5nZXRGaWx0ZXJTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGhpZGUucHVzaChyZXMuaGlkZSlcbiAgICAgICAgICAgICAgICBoaWRlID0gXy5mbGF0dGVuKGhpZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC52aWV3Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gXy5maW5kKGhpZGUsIGZ1bmN0aW9uKGhpZGRlbkxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbkxheWVyID09PSBtYXJrZXJWaWV3Lm1hcmtlckxheWVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZClcbiAgICAgICAgICAgICAgICAgICAgc2hvdy5wdXNoKG1hcmtlclZpZXcubWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2goc2hvdywgZnVuY3Rpb24obWFya2VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcubWFwLmFkZExheWVyKG1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKGhpZGUsIGZ1bmN0aW9uKG1hcmtlckxheWVyKSB7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3Lm1hcC5yZW1vdmVMYXllcihtYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBMYXllckNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9wYW4nLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsRE9NV2F0Y2hlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwUGFuQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtYXA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1hcClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmluaXRpYWxpemVkIG1hcFwiKTtcbiAgICAgICAgfVxuICAgICAgICAsIF9maXRNYXJrZXJCb3VuZHMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlJyk7XG4gICAgICAgICAgICBpZiAoIWVsdCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZWx0KS54O1xuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IEwubGF0TG5nQm91bmRzKF8ubWFwKG1hcmtlclZpZXdzLGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG5nTGF0ID0gbWFya2VyVmlldy5tb2RlbC5nZXRHZW9qc29uKCkuZ2VvbWV0cnkuY29vcmRpbmF0ZXMuc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEwubGF0TG5nKGxuZ0xhdC5yZXZlcnNlKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGVkZ2VQdFggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWRnZVB0WCAhPSB0aGF0Lm1hcC5nZXRTaXplKCkueCkge1xuICAgICAgICAgICAgICAgIC8vIG1hcCB1bmRlcm5lYXRoIGFydGljbGVcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcC5maXRCb3VuZHMoYm91bmRzLCB7XG4gICAgICAgICAgICAgICAgICAgICdwYWRkaW5nQm90dG9tUmlnaHQnIDogW2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSBlZGdlUHRYLDBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1hcCBiZXNpZGUgYXJ0aWNsZVxuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5tYXAuaW52YWxpZGF0ZVNpemUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGp1c3QgbWFwIHBhbi96b29tIHRvIG1ha2UgYWxsIG1hcCBtYXJrZXJzIG9jY3VyIHRvIHRoZSBcbiAgICAgICAgLy8gbGVmdCBvZiBkaXYjYXJ0aWNsZSBpbiB3aWRlIG1vZGVcbiAgICAgICAgLCBmaXRNYXJrZXJCb3VuZHMgOiBmdW5jdGlvbihtYXJrZXJWaWV3cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkZGVmLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5fZml0TWFya2VyQm91bmRzKG1hcmtlclZpZXdzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLCcjYXJ0aWNsZScsJGRlZik7XG4gICAgICAgIH1cbiAgICAgICAgLCBoYW5kbGVQb3B1cFBvc2l0aW9uIDogZnVuY3Rpb24ocG9wdXApIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBtYXAgPSB0aGF0Lm1hcDtcbiAgICAgICAgICAgIHZhciBpZCA9ICQocG9wdXAuZ2V0Q29udGVudCgpKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgdmFyIGVkZ2VQdFgsICRwb3B1cFdyYXAsIHBvcHVwTGF0TG5nLCBwb3B1cFJpZ2h0WCwgcGFkO1xuICAgICAgICAgICAgcG9wdXBMYXRMbmcgPSBwb3B1cC5nZXRMYXRMbmcoKTtcbiAgICAgICAgICAgIGlmIChwb3B1cExhdExuZyA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgICAgICBlZGdlUHRYID0gTC5Eb21VdGlsLmdldFZpZXdwb3J0T2Zmc2V0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlJykpLng7XG4gICAgICAgICAgICAvLyBtYXAgc2hvdWxkIHBhbiByaWdodC9lYXN0IGlmIHRoZSBwb3B1cCBiYWxsb29uIGlzIGNvdmVyZWQgYnkgdGhlIGFydGljbGU7XG4gICAgICAgICAgICAvLyBwYWQgaXMgYSBzbGlnaHQgcmVsaWVmIGJldHdlZW4gdGhlIHBvcHVwIGFuZCB0aGUgYXJ0aWNsZVxuICAgICAgICAgICAgJHBvcHVwV3JhcCA9ICQoJyMnICsgaWQpLmNsb3Nlc3QoJy5sZWFmbGV0LXBvcHVwLWNvbnRlbnQtd3JhcHBlcicpLmZpcnN0KCk7XG4gICAgICAgICAgICBwYWQgPSBMLnBvaW50KHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmdCb3R0b21SaWdodCB8fCBwb3B1cC5vcHRpb25zLmF1dG9QYW5QYWRkaW5nKTtcbiAgICAgICAgICAgIHBhZCA9IHBhZCA/IHBhZC54IDogMDtcbiAgICAgICAgICAgIHBvcHVwUmlnaHRYID0gKCRwb3B1cFdyYXAubGVuZ3RoID4gMCkgXG4gICAgICAgICAgICAgICAgPyAkcG9wdXBXcmFwLm9mZnNldCgpLmxlZnQgKyAkcG9wdXBXcmFwLndpZHRoKCkgKyBwYWRcbiAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICBpZiAoZWRnZVB0WCAhPSAwICYmIHBvcHVwUmlnaHRYID4gZWRnZVB0WCAmJiBlZGdlUHRYICE9IG1hcC5nZXRTaXplKCkueCkge1xuICAgICAgICAgICAgICAgIG1hcC5wYW5CeShbcG9wdXBSaWdodFggLSBlZGdlUHRYLDBdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1hcC5nZXRCb3VuZHMoKS5jb250YWlucyhwb3B1cC5nZXRMYXRMbmcoKSkpIHtcbiAgICAgICAgICAgICAgICBtYXAuY2xvc2VQb3B1cChwb3B1cCk7XG4gICAgICAgICAgICAgICAgbWFwLm9wZW5Qb3B1cChwb3B1cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBQYW5Db250cm9sbGVyLnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gTWFwUGFuQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9lcnJvci91c2VyJywgW1xuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1zZ1wiIDogXCJcIlxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnNldCgnbXNnJywgYXJncy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVXNlckVycm9yTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvcG9wb3ZlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvbGlnaHRib3gnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcydcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3LEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3LEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRqdXN0IGhlaWdodCBvZiBhcnRpY2xlIGJvZHlcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBpbiBjc3NcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjYXJ0aWNsZSBhcnRpY2xlJykuaGVpZ2h0KCkgLSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAkKCcjYm9keScpLmNzcyh7aGVpZ2h0OmhlaWdodH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2VzIHRoYXQgZmFpbCB0byBsb2FkLCBzaW5jZSB3ZSBjYW5ub3QgZG9cbiAgICAgICAgICAgIC8vIGEgZmlsZSB0ZXN0IHdoZW4gcnVubmluZyB0aGUgeHNsXG4gICAgICAgICAgICB2YXIgZGVmcyA9IFtdO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGltZyl7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZUNsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHNvbWUgdGltZSBiZWZvcmUgZmFpbHVyZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMucHVzaCgkZGVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZnMpLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZS5yZW1vdmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaW1hZ2UtbG9hZGluZycpLnJlbW92ZUNsYXNzKCdpbWFnZS1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG4vKlxuICogVGhpcyBpcyBtZWFudCB0byBiZSBleHRlbmRlZCBhcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aGVcbiAqIHNlY3Rpb25zIG9mIGFuIGFydGljbGUuXG4gKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9tZW51JywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUtbWVudS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsWE1MMkhUTUwsYW1Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIHRoaXMgdmlldyBpcyBtZWFudCB0byBiZSBjYWxsZWQgb25seSBhZnRlciB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gYXJ0aWNsZSBtb2RlbCBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwuaW5pdCgpLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlVuaW5pdGlhbGl6ZWQgYXJ0aWNsZSBpbiBBcnRpY2xlTWVudVZpZXdcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZW51aXRlbSA9IHRoYXQueG1sMmh0bWwodGhhdC5tb2RlbC5nZXQoJ3htbCcpLCBhbVhzbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiBtZW51aXRlbTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNZW51Vmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICdiYWNrYm9uZScsIFxuICAgICd0ZXh0IXBhcnRpYWxzL2Vycm9yL3VzZXIuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGVsOiAkKCcjZXJyb3JEaWFsb2cnKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5tb2RhbCh7a2V5Ym9hcmQ6IHRydWUsIHNob3c6IHRydWV9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFVzZXJFcnJvclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllci9wbGFjZXR5cGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLWxlZ2VuZC5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLENvbnRyb2xsZXIsbGVnZW5kUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGxhY2V0eXBlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICB2aWV3cyAgOiBudWxsXG4gICAgICAgICwgcm91dGVyIDogbnVsbFxuICAgICAgICAsIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBjb250cm9sIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gYXJncy5tYXBjb25maWc7XG4gICAgICAgICAgICB2YXIgbGVnZW5kVGVtcGwgPSBfLnRlbXBsYXRlKGxlZ2VuZFBhcnRpYWwpO1xuICAgICAgICAgICAgdmFyIGxheWVyTWFya2VycyA9IF8uZ3JvdXBCeSh0aGF0LnZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tb2RlbC5nZXRHZW9qc29uKCkucHJvcGVydGllcy5sYXllcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGF0LmNvbnRyb2wgPSBMLmNvbnRyb2wubGF5ZXJzKG51bGwsIG51bGwsIHRoYXQubWFwY29uZmlnLmNvbnRyb2wubGF5ZXJzLm9wdGlvbnMpLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgIC8vIGRpc2FibGUgbW91c2VvdmVyL21vdXNlb3V0IGV2ZW50cyBmb3IgdGhpcyBjb250cm9sLCB3aGljaCBhcmUgc2V0IGJ5IGRlZmF1bHQgaW5cbiAgICAgICAgICAgIC8vIExlYWZsZXQ7IGVuYWJsZXMgJ2NsaWNrJyBjb250cm9sXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udHJvbC5nZXRDb250YWluZXIoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChPYmplY3Qua2V5cyhjb250YWluZXIpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3ZlcicpKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3V0JykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGNvbnRhaW5lcltrZXldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gaW4gU2FmYXJpLCBsYXllciBjb250cm9sIGJ1dHRvbiBkb2VzIG5vdCByZWNlaXZlICdmb2N1cycgZXZlbnQgb24gY2xpY2tcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgTC5Eb21FdmVudC5vbigkKCcubGVhZmxldC1jb250cm9sLWxheWVycy10b2dnbGUnKVswXSwgJ2NsaWNrJywgY29udHJvbC5fZXhwYW5kLCBjb250cm9sKTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXMobGF5ZXJNYXJrZXJzKSwgZnVuY3Rpb24obGF5ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGtsYXNzID0gbGF5ZXJOYW1lLnJlcGxhY2UoL1xccysvZywgJy0nKTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJMZWdlbmQgPSBsZWdlbmRUZW1wbCh7XG4gICAgICAgICAgICAgICAgICAgICAgaWNvblVybDogbGF5ZXJNYXJrZXJzW2xheWVyTmFtZV1bMF0ubW9kZWwuZ2V0KCdpY29uVXJsJylcbiAgICAgICAgICAgICAgICAgICAgLCB0aXRsZSAgOiBsYXllck5hbWVcbiAgICAgICAgICAgICAgICAgICAgLCBrbGFzcyAgOiBrbGFzc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBtYXJrZXJMYXllcnMgPSBfLm1hcChsYXllck1hcmtlcnNbbGF5ZXJOYW1lXSwgZnVuY3Rpb24odmlldyl7IHJldHVybiB2aWV3Lm1hcmtlckxheWVyOyB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBMLmxheWVyR3JvdXAobWFya2VyTGF5ZXJzKTtcbiAgICAgICAgICAgICAgICBjb250cm9sLmFkZE92ZXJsYXkobGF5ZXIsbGF5ZXJMZWdlbmQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKCdpbnB1dC5sZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXNlbGVjdG9yJykuZWFjaChmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyID0gdGhhdDtcbiAgICAgICAgICAgIGNvbnRyb2wuX29uSW5wdXRDbGljayA9IHRoYXQuX29uSW5wdXRDbGljaztcbiAgICAgICAgfVxuICAgICAgICAsIGdldEZpbHRlclN0YXRlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgc2hvdzogKHRoaXMuc2hvdyB8fCBbXSlcbiAgICAgICAgICAgICAgICAsIGhpZGU6ICh0aGlzLmhpZGUgfHwgW10pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IGRvIG5vdCBvdmVycmlkZSB0aGlzIHByaXZhdGUgbWV0aG9kOyBzYWZlciB0byByZXBsYWNlXG4gICAgICAgIC8vICBMLmNvbnRyb2wubGF5ZXJzKCkgd2l0aCBhIGN1c3RvbSBjb250cm9sXG4gICAgICAgICwgX29uSW5wdXRDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvdyA9IFtdLCBoaWRlID0gW107XG4gICAgXHRcdHZhciBpLCBpbnB1dCwgb2JqLFxuICAgIFx0XHQgICAgaW5wdXRzID0gY29udHJvbC5fZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKSxcbiAgICBcdFx0ICAgIGlucHV0c0xlbiA9IGlucHV0cy5sZW5ndGg7XG4gICAgXHRcdGNvbnRyb2wuX2hhbmRsaW5nQ2xpY2sgPSB0cnVlO1xuICAgIFx0XHRmb3IgKGkgPSAwOyBpIDwgaW5wdXRzTGVuOyBpKyspIHtcbiAgICBcdFx0XHRpbnB1dCA9IGlucHV0c1tpXTtcbiAgICBcdFx0XHRvYmogPSBjb250cm9sLl9sYXllcnNbaW5wdXQubGF5ZXJJZF07XG4gICAgXHRcdFx0aWYgKGlucHV0LmNoZWNrZWQpIHtcbiAgICBcdFx0XHRcdG9iai5sYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgXHRcdFx0XHQgICAgc2hvdy5wdXNoKGxheWVyKTtcbiAgICBcdFx0XHQgICAgfSk7XG4gICAgXHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdG9iai5sYXllci5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgXHRcdFx0XHQgICAgaGlkZS5wdXNoKGxheWVyKTtcbiAgICBcdFx0XHQgICAgfSk7XG4gICAgXHRcdFx0fVxuICAgIFx0XHR9XG4gICAgXHRcdGNvbnRyb2wuX2hhbmRsaW5nQ2xpY2sgPSBmYWxzZTtcbiAgICBcdFx0Y29udHJvbC5fcmVmb2N1c09uTWFwKCk7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLnNob3cgPSBzaG93O1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci5oaWRlID0gaGlkZTtcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIudHJpZ2dlcignZmlsdGVyJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUGxhY2V0eXBlQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZSdcbiAgICAsICd2aWV3cy9tYXAvbGF5ZXIvdGltZWxpbmUnXG4gICAgLCAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFRpbWVsaW5lVmlldyxUaW1lbGluZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBUaW1lbGluZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbWFwICAgIDogbnVsbFxuICAgICAgICAsIG1vZGVsICA6IG51bGxcbiAgICAgICAgLCB2aWV3ICAgOiBudWxsXG4gICAgICAgICwgc2l0ZWNvbmZpZzogbnVsbFxuICAgICAgICAsIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC52aWV3cyA9IGFyZ3Mudmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICBfLmZvckVhY2goYXJncy5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldyl7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnc2hvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICdoaWRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IFRpbWVsaW5lTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgc2l0ZWNvbmZpZyAgOiBhcmdzLnNpdGVjb25maWdcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgVGltZWxpbmVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsIDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICwgbWFya2VyVmlld3MgOiBhcmdzLm1hcmtlclZpZXdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlc3VsdHMuY2xlYXIgaXMgYSBmbGFnIHRoYXQgdGhlIGJydXNoIGlzIGVtcHR5XG4gICAgICAgICAgICAvLyByZXN1bHRzLmluY2wgaXMgYW4gYXJyYXkgb2YgTWFwVGltZWxpbmVJdGVtJ3NcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2hvdy9oaWRlIG9uIGxpc3RzIG9mIEFydGljbGVNb2RlbCdzXG4gICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ2ZpbHRlcicsIHRoYXQuX2hhbmRsZUZpbHRlckV2ZW50KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXJFdmVudCA6IGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBzaG93TGF5ZXJzID0gW10sIGhpZGVMYXllcnMgPSBbXSwgc2hvd0lkcyA9IHt9O1xuICAgICAgICAgICAgaWYgKHJlc3VsdHMuY2xlYXIpIHtcbiAgICAgICAgICAgICAgICBzaG93TGF5ZXJzID0gXy5tYXAodGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd0xheWVycyA9IF8ubWFwKHJlc3VsdHMuc2VsZWN0ZWQsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0lkc1tpdGVtLm1hcmtlclZpZXcubW9kZWwuY2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBoaWRlTGF5ZXJzID0gXy5tYXAoXy5maWx0ZXIodGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShtYXJrZXJWaWV3Lm1vZGVsLmNpZCBpbiBzaG93SWRzKTtcbiAgICAgICAgICAgICAgICB9KSwgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldy5tYXJrZXJMYXllcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQuc2hvdyA9IHNob3dMYXllcnM7XG4gICAgICAgICAgICB0aGF0LmhpZGUgPSBoaWRlTGF5ZXJzO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdmaWx0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICAsIGdldEZpbHRlclN0YXRlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgc2hvdzogKHRoaXMuc2hvdyB8fCBbXSlcbiAgICAgICAgICAgICAgICAsIGhpZGU6ICh0aGlzLmhpZGUgfHwgW10pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcFRpbWVsaW5lQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29sbGVjdGlvbnMvdGltZWxpbmUnXG4gICAgLCAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVGltZWxpbmVDb2xsZWN0aW9uLFRpbWVsaW5lSXRlbSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgc3RhcnQ6IG51bGxcbiAgICAgICAgLCBlbmQ6IG51bGxcbiAgICAgICAgLCBzaXRlY29uZmlnIDogbnVsbFxuICAgICAgICAsIGJvb2tjb25maWcgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICB0aGF0LnNpdGVjb25maWcgPSBhcmdzLnNpdGVjb25maWc7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmdldEpTT04odGhhdC5zaXRlY29uZmlnLmJvb2suZmlsZSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuYm9va2NvbmZpZyA9IGRhdGEuYm9vaztcbiAgICAgICAgICAgICAgICB0aGF0Ll9pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRpYWxpemUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSBuZXcgVGltZWxpbmVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG1hcmtlclZpZXcubW9kZWw7XG4gICAgICAgICAgICAgICAgdmFyIGJvb2tDaGFwdGVyID0gXy5maW5kV2hlcmUodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFydCAgICA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5wYXJ0XG4gICAgICAgICAgICAgICAgICAgICwgY2hhcHRlciA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5jaGFwdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFib29rQ2hhcHRlcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGJvb2tDaGFwdGVyLnBhcmFncmFwaHMuc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UucGFyYWdyYXBoO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIDE7XG4gICAgICAgICAgICAgICAgY29sLmFkZChuZXcgVGltZWxpbmVJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgLCBlbmQ6IGVuZFxuICAgICAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXc6IG1hcmtlclZpZXdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBfLm1pbih0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgfSkucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIHRoYXQuZW5kID0gXy5tYXgodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLmVuZDtcbiAgICAgICAgICAgIH0pLnBhcmFncmFwaHMuZW5kO1xuICAgICAgICB9XG4gICAgICAgICwgZ2V0SXRlbXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscztcbiAgICAgICAgfVxuICAgICAgICAsIHRpY2tWYWx1ZXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBfLm1hcCh0aGlzLmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhbHVlcy5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYS1iOyB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgLCB0aWNrRm9ybWF0IDogZnVuY3Rpb24ocCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBpLGNoYXB0ZXI7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFwdGVyID0gdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCA8PSBjaGFwdGVyLnBhcmFncmFwaHMuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gY2hhcHRlci5jaGFwdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmxhbmsgdGljayBmb3IgZW5kIG9mIGJvb2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09PSB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuXG4gICAgICAgICAgICBfLmZpbmRJbmRleCh0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLmNpZCA9PT0gdGltZWxpbmVJdGVtLmNpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaSkgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykuZ2V0KGkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoVGltZWxpbmVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gVGltZWxpbmVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbGlnaHRib3gtdGl0bGUuaHRtbCdcbiAgICAsICdsaWdodGJveCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxsaWdodGJveFRpdGxlVGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAgICAgZ2FsbGVyeTp7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlU3JjOiBmdW5jdGlvbigkaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gJGl0ZW0uZWwuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjdCA9IF8udGVtcGxhdGUobGlnaHRib3hUaXRsZVRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmdseXBoaWNvbi5nbHlwaGljb24tZXhwYW5kJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KXtcbiAgICAgICAgICAgICAgICAkKCcuZ2FsbGVyeS1pdGVtJykubWFnbmlmaWNQb3B1cCgnb3BlbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLWNvbnRlbnQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxwb3BvdmVyVGVtcGwscG9wb3ZlckNvbnRlbnRUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIGFkZCBwb3BvdmVycyB0byBpbWFnZXNcbiAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKHBvcG92ZXJDb250ZW50VGVtcGwpO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGVsdCkge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IGVsdC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgICAgICAgICAgdmFyICRwbyA9ICQoJy5wb3BvdmVyLicgKyBpZCk7XG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpO1xuICAgICAgICAgICAgICAgICQoZWx0KS5hdHRyKCdhbHQnLCAkcG8uZmluZCgnLmRlc2MnKS50ZXh0KCkpO1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogJHBvLmZpbmQoJy5hdHRyJykudGV4dCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLnBvcG92ZXIoe1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IFwiYm9keVwiLFxuICAgICAgICAgICAgICAgICAgICBodG1sIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcG9wb3ZlclRlbXBsLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBcImhvdmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudDogXCJsZWZ0XCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuY2xpY2soZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9zbGlkZXMnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9pbWFnZS1wb3BvdmVyLWNvbnRlbnQuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnc2xpZGVzanMnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBjb25maWd1cmUgc2xpZGVzanM7IHVwIHRvIG5vdywgJ2Rpc3BsYXk6bm9uZSdcbiAgICAgICAgICAgIC8vIGhhcyBhcHBsaWVkXG4gICAgICAgICAgICAkKFwiI3NsaWRlc1wiKS5zbGlkZXNqcyh7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZhZGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgIGNyb3NzZmFkZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazoge1xuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgb24gbG9hZCBvZiBmaXJzdCBwaWNcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgKG51bWJlciAtIDEpICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHt2aXNpYmlsaXR5OiBcImhpZGRlblwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSAoJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKSAtICRpbWcud2lkdGgoKSkvMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gcGFyc2VJbnQoJGltZy5jc3MoJ3BhZGRpbmctbGVmdCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IGxlZnQ6IGxlZnQgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgc3RhcnQgb2YgY2hhbmdlIG9mIHBpYyAoYWZ0ZXIgZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbigpLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgZW5kIG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SW1nID0gbnVtYmVyIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgbmV3SW1nICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB3aWR0aDogICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0OiAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4V2lkdGg6ICAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbjogIFwicmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdsZWFmbGV0J1xuICAgICwgJ3RleHQhcGFydGlhbHMvdGltZWxpbmUuaHRtbCdcbiAgICAsICdjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCx0aW1lbGluZUNvbnRyb2xQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICd0aW1lbGluZSdcbiAgICAgICAgLCBtYXA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICB9XG4gICAgICAgICwgX3RpbWVsaW5lQ29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuX2hhbmRsZUZpbHRlcih7Y2xlYXI6dHJ1ZX0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2hhbmRsZUZpbHRlciA6IGZ1bmN0aW9uKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZpbHRlcicsIHNlbGVjdGVkKTtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24sIGNvbnRyb2xoZWlnaHQsIG1hcGhlaWdodCwgZG9jdW1lbnRoZWlnaHQ7XG4gICAgICAgICAgICBtYXBoZWlnaHQgPSAkKCcjbWFwJykuaGVpZ2h0KCk7XG4gICAgICAgICAgICBkb2N1bWVudGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRvY3VtZW50aGVpZ2h0LzIgLSBtYXBoZWlnaHQpIDwgMikge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gJ2JvdHRvbXJpZ2h0JztcbiAgICAgICAgICAgICAgICBjb250cm9saGVpZ2h0ID0gJCgnI21hcCcpLmhlaWdodCgpIC0gMTAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9ICd0b3BsZWZ0JztcbiAgICAgICAgICAgICAgICBjb250cm9saGVpZ2h0ID0gNTAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5tb2RlbC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnRpbWVsaW5lID0gTC5jb250cm9sLnRpbWVsaW5lKHRoYXQubWFwLHRoYXQubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHsgICAgIGhlaWdodCAgIDogY29udHJvbGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbiA6IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG9uOiB7IGJydXNoZW5kOiBmdW5jdGlvbihhKSB7IHRoYXQuX2hhbmRsZUZpbHRlcihhKTsgfX19XG4gICAgICAgICAgICAgICAgKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBUaW1lbGluZVZpZXc7XG59KTtcblxuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVJdGVtTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXc6IG51bGxcbiAgICAgICAgLCBzdGFydDogbnVsbCAgICAgICAvLyBcImFic29sdXRlXCIgc3RhcnQgKGllLCBwYXJhZ3JhcGggaW5kZXggdy9vIGNoYXB0ZXIpXG4gICAgICAgICwgZW5kOiBudWxsICAgICAgICAgLy8gXCJhYnNvbHV0ZVwiIGVuZFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlldyA9IGFyZ3MubWFya2VyVmlldztcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBhcmdzLnN0YXJ0O1xuICAgICAgICAgICAgdGhhdC5lbmQgPSBhcmdzLmVuZDtcbiAgICAgICAgfVxuICAgICAgICAsIGR1cmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuZC10aGlzLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgICwgY29tcGFyZVRvOiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVJdGVtTW9kZWw7XG59KTtcbiIsInJlcXVpcmUuY29uZmlnKHtcbiAgcGF0aHM6IHtcbiAgICAgIGJhY2tib25lICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9iYWNrYm9uZS5qcy8xLjEuMi9iYWNrYm9uZS1taW4nXG4gICAgLCBib290c3RyYXAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdHdpdHRlci1ib290c3RyYXAvMy4zLjUvanMvYm9vdHN0cmFwLm1pbidcbiAgICAsIGQzICAgICAgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9kMy8zLjUuNi9kMy5taW4nXG4gICAgLCBqcXVlcnkgICAgOiAnLy9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTIuMS40Lm1pbidcbiAgICAsIGxlYWZsZXQgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzAuNy4zL2xlYWZsZXQnXG4gICAgLCBsaWdodGJveCAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbWFnbmlmaWMtcG9wdXAuanMvMS4wLjAvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLm1pbidcbiAgICAsIHNsaWRlc2pzICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zbGlkZXNqcy8zLjAvanF1ZXJ5LnNsaWRlcy5taW4nXG4gICAgLCB0ZXh0ICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcmVxdWlyZS10ZXh0LzIuMC4xMi90ZXh0Lm1pbidcbiAgICAsIHVuZGVyc2NvcmU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUtbWluJ1xuICAgICwgcGFydGlhbHMgIDogJy4uL3BhcnRpYWxzJ1xuICAgICwgeHNsICAgICAgIDogJy4uL3NjcmlwdC94c2wnXG4gICAgLCBwYWdlcyAgICAgOiAnLi4vcGFnZXMnXG4gIH0sXG4gIHNoaW06IHtcbiAgICBib290c3RyYXA6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGJhY2tib25lOiB7XG4gICAgICAgICdkZXBzJzogWydqcXVlcnknLCAndW5kZXJzY29yZSddLFxuICAgICAgICAnZXhwb3J0cyc6ICdCYWNrYm9uZSdcbiAgICB9LFxuICAgIHVuZGVyc2NvcmU6IHtcbiAgICAgICAgJ2V4cG9ydHMnOiAnXydcbiAgICB9LFxuICAgIHRleHQ6IHtcbiAgICAgICAgJ2RlcHMnOiBbXVxuICAgIH0sXG4gICAgc2xpZGVzanM6IHtcbiAgICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH0sXG4gICAgbGlnaHRib3g6IHtcbiAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9XG4gIH1cbn0pO1xucmVxdWlyZShbXG4gICAgJ2pxdWVyeScsXG4gICAgJ21vZGVscy9lcnJvci91c2VyJyxcbiAgICAndmlld3MvZXJyb3IvdXNlcicsXG4gICAgJ3JvdXRlcy9yb3V0ZXInLFxuICAgICd2aWV3cy9hcHAnLFxuICAgICdib290c3RyYXAnXG5dLCBmdW5jdGlvbigkLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsUm91dGVyLEFwcFZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIGNvbmZpZ2ZpbGUgPSAkKCcjbWFpbicpLmF0dHIoJ2RhdGEtY29uZmlnJyk7XG4gICAgaWYgKGNvbmZpZ2ZpbGUpIHtcbiAgICAgICAgJC5nZXRKU09OKGNvbmZpZ2ZpbGUsIGZ1bmN0aW9uKHNpdGVjb25maWcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IEFwcFZpZXcoKTtcbiAgICAgICAgICAgICAgICBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICByb3V0ZXM6IHNpdGVjb25maWcucGFnZXMucm91dGVzXG4gICAgICAgICAgICAgICAgICAgICwgY29uZmlnOiBzaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaXRlY29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oanF4aHIsIHRleHRTdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIG1zZzogXCJGYWlsZWQgdG8gbG9hZCBzaXRlIGNvbmZpZyBmaWxlICdcIiArIGNvbmZpZ2ZpbGUgKyBcIicgXCIgKyBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgbXNnOiBcIk5vIGNvbmZpZ3VyYXRpb24gZmlsZW5hbWUgc3BlY2lmaWVkIGluIGhvbWUgcGFnZS5cIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
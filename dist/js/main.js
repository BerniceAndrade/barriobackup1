define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/map/layer/timeline/item"],function(e,n,i,t){"use strict";var l=i.Collection.extend({model:t});return l});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer"],function(e,o,r,n,a,p,t,i,l,u){"use strict";var s=n.extend({model:null,view:null,issue:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(o){var r=this;r.$def=e.Deferred(),r.router=o.router,r.issue=o.issue,r.model=new a(o),r.view=new p({model:r.model,router:r.router,issue:r.issue}),r.view.init().done(function(){r.mapPanController=new i({map:r.view.map}),r.mapLayerController=new l({view:r.view,map:r.view.map,model:r.model,mapconfig:r.model.attributes.mapconfig}),r.listenTo(r.view,"markers",function(e){r._registerMarkers(e),r.mapPanController.fitMarkerBounds(r.view.markerViews)}),r.view.render()}),e.when.apply(null,[r.model.init(),r.view.init()]).done(function(){r.$def.resolve(r)})},_registerMarkers:function(e){var r=this;o.forEach(e,function(e){r.listenTo(e.model,"active",function(o){r.mapPopupOpen(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e.model,"toggle",function(o){r.mapPopupToggle(e.markerLayer);var n=r._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&r.mapPanController.handlePopupPosition(n.getPopup())}),r.listenTo(e,"click",function(o){r.mapPopupOpen(o),e.model.trigger("active",e.model)}),r.listenTo(e,"mouseover",function(e){r.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_getMarkerLayer:function(e,r){var n,a;if(e instanceof L.LayerGroup){if(r in e)n=e;else for(a=e.getLayers();e=a.pop();)if(r in e){n=e;break}}else o.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var o=this._getMarkerLayer(e,"openPopup");o&&o.openPopup()},mapPopupToggle:function(e){var o=this._getMarkerLayer(e,"togglePopup");o&&o.togglePopup()},mapPopupClose:function(e){var o=this._getMarkerLayer(e,"closePopup");o&&o.closePopup()}});return o.extend(s.prototype,t),s});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,i){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(i,e,n){var o=this;t.Util.setOptions(this,n),this._map=i,this._source=e;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var e=this;if(!e._expanded&&(e._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded"),!this._timeline)){var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=i.scale.linear().range([0,o]),this._yScale=i.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=i.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return i.max([e.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=i.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?i.select("#band").selectAll("rect.timeline-item").each(function(i){l(i.start)<=n&&l(i.end)>=t&&o.selected.push(i)}):o.clear=!0,e.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),p=i.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return e._source.tickFormat(t)});h.call(p)}},_collapse:function(){this._expanded&&((this.options.on.collapse||"function"==typeof this.options.on.collapse)&&this.options.on.collapse(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(i,e,n){return new t.Control.Timeline(i,e,n)}))});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit"],function(e,i,n,a,r,t,m){"use strict";var o=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var n=this;n.$def=e.Deferred(),n.model=i.model,n.issue=i.issue,e.when.apply({},[n.issue.init(),n.model.init()]).done(function(){n.mapconfig=n.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(n._initMap(),n.$def.resolve(n))})},_initMap:function(){var n=this;0===e("#"+this.id).length&&(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})}))},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(o.prototype,m),o});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","controllers/map/layer/placetype","controllers/map/layer/timeline"],function(e,r,a,i,n,t){"use strict";var o=i.extend({view:null,router:null,map:null,initialize:function(e){var a=this;a.map=e.map,a.view=e.view,a.model=e.model;var i=new n({views:a.view.markerViews,map:a.view.map,mapconfig:a.model.attributes.mapconfig}),o=new t({markerViews:a.view.markerViews,map:a.view.map,siteconfig:a.model.attributes.config});a.subControllers=[i,o],r.forEach(a.subControllers,function(e){a.listenTo(e,"filter",function(){a._updateMarkers()})})},_updateMarkers:function(){var e=this,a=[],i=[];r.forEach(e.subControllers,function(e){var a=e.getFilterState();i.push(a.hide),i=r.flatten(i)}),r.forEach(e.view.markerViews,function(e){var n=r.find(i,function(r){r===e.markerLayer});n||a.push(e.markerLayer)}),r.forEach(a,function(r){e.view.map.addLayer(r)}),r.forEach(i,function(r){e.view.map.removeLayer(r)})}});return o});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,initialize:function(t){if(this.map=t.map,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,d=p.map,s=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+s).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=d.getSize().x?d.panBy([a-n,0]):d.getBounds().contains(e.getLatLng())||(d.closePopup(e),d.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("controllers/map/layer/placetype",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,t,n,o){"use strict";var l=n.extend({views:null,router:null,map:null,control:null,initialize:function(t){var n=this;n.views=t.views,n.map=t.map,n.mapconfig=t.mapconfig;var l=r.template(o),a=r.groupBy(n.views,function(e){return e.model.getGeojson().properties.layer}),i=n.control=L.control.layers(null,null,n.mapconfig.control.layers.options).addTo(n.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),r.each(r.keys(a),function(e){var t=e.replace(/\s+/g,"-"),n=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:t}),o=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(o);i.addOverlay(c,n)}),e("input.leaflet-control-layers-selector").each(function(r,t){e(t).click()}),i.mapLayerController=n,i._onInputClick=n._onInputClick},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}},_onInputClick:function(){var e,r,t,n=this,o=[],l=[],a=n._form.getElementsByTagName("input"),i=a.length;for(n._handlingClick=!0,e=0;i>e;e++)r=a[e],t=n._layers[r.layerId],t.layer.getLayers().forEach(r.checked?function(e){o.push(e)}:function(e){l.push(e)});n._handlingClick=!1,n._refocusOnMap(),n.mapLayerController.show=o,n.mapLayerController.hide=l,n.mapLayerController.trigger("filter")}});return l});
define("controllers/map/layer/timeline",["jquery","underscore","backbone","controllers/prototype","views/map/layer/timeline","models/map/layer/timeline"],function(e,r,i,n,t,l){"use strict";var a=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var i=this;i.views=e.views,i.map=e.map,i.markerViews=e.markerViews,r.forEach(e.markerViews,function(e){i.listenTo(e.model,"show",function(){}),i.listenTo(e.model,"hide",function(){})}),i.model=new l({siteconfig:e.siteconfig,markerViews:e.markerViews}),i.view=new t({model:i.model,map:i.map,markerViews:e.markerViews}),i.listenTo(i.view,"filter",i._handleFilterEvent),i.view.render()},_handleFilterEvent:function(e){var i=this,n=[],t=[],l={};e.clear?n=r.map(i.markerViews,function(e){return e.markerLayer}):(n=r.map(e.selected,function(e){return l[e.markerView.model.cid]=void 0,e.markerView.markerLayer}),t=r.map(r.filter(i.markerViews,function(e){return!(e.model.cid in l)}),function(e){return e.markerLayer})),i.show=n,i.hide=t,i.trigger("filter")},getFilterState:function(){return{show:this.show||[],hide:this.hide||[]}}});return a});
define("models/map/layer/timeline",["jquery","underscore","backbone","collections/timeline","models/map/layer/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,l,n){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"});var s=(i(".slidesjs-container").width()-t.width())/2;s-=parseInt(t.css("padding-left"),10),t.css({left:s}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
define("views/map/layer/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,n,t,l){"use strict";var r=n.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var e=this;e.model.init().done(function(){e.timeline=t.control.timeline(e.map,e.model,{on:{brushend:function(i){e._handleFilter(i)}}}).addTo(e.map)})}});return r});
define("models/map/layer/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsImNvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsInJvdXRlcy9yb3V0ZXIuanMiLCJ2aWV3cy9hcHAuanMiLCJ2aWV3cy9hcnRpY2xlLmpzIiwidmlld3MvY2xlYXIuanMiLCJ2aWV3cy9pc3N1ZS5qcyIsInZpZXdzL21hcC5qcyIsInZpZXdzL21hcmtlci5qcyIsInZpZXdzL21lbnUuanMiLCJ2aWV3cy9wYWdlLmpzIiwidmlld3MvcGFydGlhbC5qcyIsImNvbnRyb2xsZXJzL21hcC9sYXllci5qcyIsImNvbnRyb2xsZXJzL21hcC9wYW4uanMiLCJtb2RlbHMvZXJyb3IvdXNlci5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS5qcyIsInZpZXdzL2FydGljbGUvbWVudS5qcyIsInZpZXdzL2Vycm9yL3VzZXIuanMiLCJjb250cm9sbGVycy9tYXAvbGF5ZXIvcGxhY2V0eXBlLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyL3RpbWVsaW5lLmpzIiwibW9kZWxzL21hcC9sYXllci90aW1lbGluZS5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveC5qcyIsInZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcy5qcyIsInZpZXdzL21hcC9sYXllci90aW1lbGluZS5qcyIsIm1vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiZGVmaW5lIiwiJCIsIl8iLCJCYWNrYm9uZSIsIkFydGljbGVNb2RlbCIsIkFydGljbGVzQ29sbGVjdGlvbiIsIkNvbGxlY3Rpb24iLCJleHRlbmQiLCJtb2RlbCIsIlRpbWVsaW5lSXRlbU1vZGVsIiwiVGltZWxpbmVDb2xsZWN0aW9uIiwiQ29udHJvbGxlciIsIkFzeW5jSW5pdCIsIklzc3VlVmlldyIsIklzc3VlTW9kZWwiLCJJc3N1ZUNvbnRyb2xsZXIiLCJ2aWV3Iiwicm91dGVyIiwiaW5pdGlhbGl6ZSIsImFyZ3MiLCJ0aGF0IiwidGhpcyIsIiRkZWYiLCJEZWZlcnJlZCIsImNvbmZpZyIsInJlbmRlciIsImluaXQiLCJkb25lIiwiZm9yRWFjaCIsImdldCIsIm1vZGVscyIsImFydGljbGUiLCJsaXN0ZW5UbyIsInVybCIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInJlbmRlckFydGljbGUiLCJyZXNvbHZlIiwiYWx3YXlzIiwicmVqZWN0IiwicHJvdG90eXBlIiwiTWFwTW9kZWwiLCJNYXBWaWV3IiwiTWFwUGFuQ29udHJvbGxlciIsIk1hcExheWVyQ29udHJvbGxlciIsIk1hcFRpbWVsaW5lQ29udHJvbGxlciIsIk1hcENvbnRyb2xsZXIiLCJpc3N1ZSIsIm1hcFBhbkNvbnRyb2xsZXIiLCJtYXBUaW1lbGluZUNvbnRyb2xsZXIiLCJtYXAiLCJtYXBMYXllckNvbnRyb2xsZXIiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwibWFya2VyVmlld3MiLCJfcmVnaXN0ZXJNYXJrZXJzIiwiZml0TWFya2VyQm91bmRzIiwid2hlbiIsImFwcGx5IiwibWFya2VyVmlldyIsIm1hcFBvcHVwT3BlbiIsIm1hcmtlckxheWVyIiwibWFya2VyIiwiX2dldE1hcmtlckxheWVyIiwiaGFuZGxlUG9wdXBQb3NpdGlvbiIsImdldFBvcHVwIiwibWFwUG9wdXBUb2dnbGUiLCJldnQiLCJob3ZlclBvcHVwIiwib3BlbnBvcHVwIiwicG9wdXBpZCIsIm1hcE1hcmtlciIsImdldExhdExuZyIsIm9wZW5Qb3B1cCIsIm9iaiIsIm1ldGhvZCIsIm1hcE1hcmtlckxheWVyIiwibGF5ZXJzIiwiTCIsIkxheWVyR3JvdXAiLCJnZXRMYXllcnMiLCJwb3AiLCJoYXMiLCJ0YXJnZXQiLCJ0b2dnbGVQb3B1cCIsIm1hcFBvcHVwQ2xvc2UiLCJjbG9zZVBvcHVwIiwiY2lkIiwidW5pcXVlSWQiLCJhcmd1bWVudHMiLCJSb3V0ZXIiLCJFdmVudHMiLCJFcnJvciIsImQzIiwiQ29udHJvbCIsIlRpbWVsaW5lIiwib3B0aW9ucyIsIm9yaWVudGF0aW9uIiwiaGVpZ2h0Iiwid2lkdGgiLCJtYXJnaW4iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJjb2xsYXBzZWQiLCJpdGVtIiwibWluSGVpZ2h0Iiwib24iLCJ0aXRsZSIsInBvc2l0aW9uIiwic291cmNlIiwiVXRpbCIsInNldE9wdGlvbnMiLCJfbWFwIiwiX3NvdXJjZSIsImNvbnRhaW5lciIsIl9jb250YWluZXIiLCJEb21VdGlsIiwiY3JlYXRlIiwiYWRkQ2xhc3MiLCJ0b2dnbGUiLCJfdG9nZ2xlIiwibGluayIsImV4cGFuZCIsIl9leHBhbmQiLCJCcm93c2VyIiwidG91Y2giLCJEb21FdmVudCIsInN0b3AiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbiIsIm9uUmVtb3ZlIiwib25BZGQiLCJfZXhwYW5kZWQiLCJfY29sbGFwc2UiLCJyZW1vdmVDbGFzcyIsIl90aW1lbGluZSIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsInlTY2FsZSIsIl94U2NhbGUiLCJzY2FsZSIsImxpbmVhciIsInJhbmdlIiwiX3lTY2FsZSIsImRvbWFpbiIsInN0YXJ0IiwiZW5kIiwidGltZWxpbmUiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiYmFuZCIsImJydXNoIiwic2VsZWN0QWxsIiwiZGF0YSIsImdldEl0ZW1zIiwiZW50ZXIiLCJkIiwibWF4IiwiZHVyYXRpb24iLCJfYnJ1c2giLCJzdmciLCJ5IiwiZXh0U3RhcnQiLCJleHRlbnQiLCJleHRFbmQiLCJyZXN1bHRzIiwiY2xlYXIiLCJzZWxlY3RlZCIsImVhY2giLCJpIiwicHVzaCIsImJydXNoZW5kIiwieUJydXNoIiwiY2FsbCIsInlBeGlzIiwiYXhpcyIsIm9yaWVudCIsInRpY2tTaXplIiwidGlja1ZhbHVlcyIsInRpY2tGb3JtYXQiLCJjb2xsYXBzZSIsIm9mZiIsImNvbnRyb2wiLCJwcm9taXNlIiwiRE9NV2F0Y2hlciIsIndhdGNoRE9NIiwibXMiLCJzZWwiLCJsZW5ndGgiLCJmIiwiZG9jdW1lbnQiLCJib2R5Iiwid2luZG93Iiwic2V0VGltZW91dCIsIkZldGNoWE1MIiwiZmV0Y2hYTUwiLCIkZ2V0IiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJlcnJvciIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiWE1MMkhUTUwiLCJfZG9jIiwieG1sIiwieG1sRG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiRG9jdW1lbnQiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwieG1sMmh0bWwiLCJ4c2wiLCJwYXJhbXMiLCJtb2RlIiwieHNsRG9jIiwieHNsdFByb2Nlc3NvciIsIlhTTFRQcm9jZXNzb3IiLCJpbXBvcnRTdHlsZXNoZWV0Iiwia2V5cyIsImtleSIsInNldFBhcmFtZXRlciIsInJlc3VsdCIsImRvYyIsInRyYW5zZm9ybVRvRG9jdW1lbnQiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpbmRleE9mIiwiZG9jdW1lbnRFbGVtZW50IiwidGV4dENvbnRlbnQiLCJpbm5lckhUTUwiLCJlIiwidG9TdHJpbmciLCJnZW9Kc29uWHNsIiwiY2l0ZWRSYW5nZVhzbCIsIk1vZGVsIiwic2V0IiwiX21rR2VvanNvbiIsIl9ta0NpdGVkUmFuZ2UiLCJnZW9qc29uIiwicHJvcGVydGllcyIsImxheWVyIiwiZmFpbCIsImRlZmF1bHRzIiwicGxhY2VUeXBlIiwiaWNvblVybCIsImNpdGVkUmFuZ2UiLCJnZXRHZW9qc29uIiwianNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsIkFydGljbGVDb2xsZWN0aW9uIiwiYXJ0ZGlyIiwiYXJ0aWNsZXMiLCJwYXRoQmFzZSIsIm1hdGNoIiwiZmlsZXMiLCJjb2wiLCJ1bmRlZmluZWQiLCJmaWxlIiwiYXJ0aWNsZWlkIiwiYXJ0aWNsZWRpciIsInBhdGgiLCJpbml0cyIsImFkZCIsInNldEljb25zIiwiJHByb21pc2UiLCJzdGF0ZSIsImljY29uZmlnIiwibWFya2VycyIsImljb25zIiwiaWNvbkZpbGVzIiwic2h1ZmZsZSIsImZsYXR0ZW4iLCJlbnRyeSIsImRpciIsImNvbmNhdCIsImRlZmF1bHRJY29uRmlsZSIsImdldEFydGljbGUiLCJhcnQiLCJhdCIsImdldEpTT04iLCJqcXhociIsImNvbnNvbGUiLCJsb2ciLCJVc2VyRXJyb3JNb2RlbCIsIlVzZXJFcnJvclZpZXciLCJDbGVhclZpZXciLCJNZW51VmlldyIsInBhZ2VzIiwiaXNzdWVDb250cm9sbGVyIiwibWFwQ29udHJvbGxlciIsIm9wdHMiLCJoaXN0b3J5IiwiZnJhZ21lbnQiLCJwYWdlIiwicGFnZUNvbmZpZyIsIm1hcFBhZ2UiLCJob21lIiwicGMiLCJ2aWV3TmFtZSIsInN0cmluZ2lmeSIsImNvbmZnIiwibG9jYXRpb24iLCJocmVmIiwiZnVsbCIsInBhcnRpYWwiLCJyZXF1aXJlIiwiVmlldyIsInYiLCJpZCIsInJlbW92ZSIsImNoaWxkcmVuIiwiQXBwVmlldyIsImVsIiwicmVzaXplIiwicmVsb2FkIiwiR2FsbGVyeVZpZXciLCJBcnRpY2xlVmlldyIsIiRlbCIsImZpbmQiLCJodG1sIiwiYXJ0aWNsZS1kaXIiLCJjbGljayIsImVsdCIsInRtcGwiLCJlbXB0eSIsInRlbXBsYXRlIiwibWFwUGFydGlhbCIsIk1hcmtlclZpZXciLCJ0YWdOYW1lIiwiX2luaXRNYXAiLCJNYXAiLCJUaWxlTGF5ZXIiLCJ0aWxlTGF5ZXIiLCJhZGRUbyIsInJlbmV3Vmlld3MiLCJtdiIsImxlZ2VuZFBhcnRpYWwiLCJpbml0TWFya2VyTGF5ZXIiLCJpY29uQ29uZmlnIiwiZmVhdHVyZXMiLCJpY29uIiwiZ2VvSnNvbiIsIm9uRWFjaEZlYXR1cmUiLCJmZWF0dXJlIiwicG9wdXAiLCJzZXRDb250ZW50IiwiYmluZFBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBvaW50VG9MYXllciIsImxhdGxuZyIsImNsaWNrYWJsZSIsInRleHQiLCJtYXJrZXJuYW1lIiwib3BhY2l0eSIsInJpc2VPbkhvdmVyIiwibWVudVRtcGwiLCJBcnRpY2xlTWVudVZpZXciLCJpdGVtcyIsIm1lbnUiLCJwcm9taXNlcyIsInRlbXBsYXRlcyIsImNvbGxlY3Rpb25zIiwiY29sbGVjdGlvbiIsInRlbXBsIiwiY29udGVudCIsInNvcnRlciIsInN1YkNvbnRlbnQiLCJzb3J0S2V5cyIsImoiLCIkbGkiLCJyZXBsYWNlIiwiYW12IiwiRWxlbWVudCIsIm5vZGVOYW1lIiwib3V0ZXJIVE1MIiwiY2xvbmUiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwibGFiZWwiLCJ0aGVuIiwiJGZhaWxEZWYiLCJQYWdlVmlldyIsIlBhcnRpYWxWaWV3IiwiJHdhdGNoRGVmIiwiUGxhY2VUeXBlQ29udHJvbGxlciIsIlRpbWVsaW5lQ29udHJvbGxlciIsInBsYWNlVHlwZUNvbnRyb2xsZXIiLCJ2aWV3cyIsInRpbWVsaW5lQ29udHJvbGxlciIsInNpdGVjb25maWciLCJzdWJDb250cm9sbGVycyIsInN1YkNvbnRyb2xsZXIiLCJfdXBkYXRlTWFya2VycyIsInNob3ciLCJoaWRlIiwicmVzIiwiZ2V0RmlsdGVyU3RhdGUiLCJmb3VuZCIsImhpZGRlbkxheWVyIiwiYWRkTGF5ZXIiLCJyZW1vdmVMYXllciIsIl9maXRNYXJrZXJCb3VuZHMiLCJnZXRFbGVtZW50QnlJZCIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJtc2ciLCJtZXNzYWdlIiwiQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyIsIkFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3IiwiQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3IiwiQXJ0aWNsZUdhbGxlcnlWaWV3Iiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJkZWZzIiwiaW1nIiwibG9hZCIsImFtWHNsIiwibWVudWl0ZW0iLCJtb2RhbCIsImtleWJvYXJkIiwibGVnZW5kVGVtcGwiLCJsYXllck1hcmtlcnMiLCJncm91cEJ5IiwiZ2V0Q29udGFpbmVyIiwiT2JqZWN0IiwibGF5ZXJOYW1lIiwia2xhc3MiLCJsYXllckxlZ2VuZCIsIm1hcmtlckxheWVycyIsImxheWVyR3JvdXAiLCJhZGRPdmVybGF5IiwiX29uSW5wdXRDbGljayIsImlucHV0IiwiaW5wdXRzIiwiX2Zvcm0iLCJpbnB1dHNMZW4iLCJfaGFuZGxpbmdDbGljayIsIl9sYXllcnMiLCJsYXllcklkIiwiY2hlY2tlZCIsIl9yZWZvY3VzT25NYXAiLCJUaW1lbGluZVZpZXciLCJUaW1lbGluZU1vZGVsIiwiX2hhbmRsZUZpbHRlckV2ZW50Iiwic2hvd0xheWVycyIsImhpZGVMYXllcnMiLCJzaG93SWRzIiwiZmlsdGVyIiwiVGltZWxpbmVJdGVtIiwiYm9va2NvbmZpZyIsImJvb2siLCJfaW5pdGlhbGl6ZSIsImJvb2tDaGFwdGVyIiwiZmluZFdoZXJlIiwiY2hhcHRlcnMiLCJwYXJ0IiwiY2hhcHRlciIsInBhcmFncmFwaHMiLCJwYXJhZ3JhcGgiLCJtaW4iLCJ2YWx1ZXMiLCJwIiwibGlnaHRib3hUaXRsZVRlbXBsIiwibWFnbmlmaWNQb3B1cCIsImdhbGxlcnkiLCJlbmFibGVkIiwiaW1hZ2UiLCJ0aXRsZVNyYyIsIiRpdGVtIiwiJHBvIiwicGN0IiwicG9wb3ZlclRlbXBsIiwicG9wb3ZlckNvbnRlbnRUZW1wbCIsImdldEF0dHJpYnV0ZSIsInBvcG92ZXIiLCJwbGFjZW1lbnQiLCJzbGlkZXNqcyIsIm5hdmlnYXRpb24iLCJhY3RpdmUiLCJlZmZlY3QiLCJwYWdpbmF0aW9uIiwiZmFkZSIsInNwZWVkIiwiY3Jvc3NmYWRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJudW1iZXIiLCIkaW1nIiwidmlzaWJpbGl0eSIsIm1heEhlaWdodCIsIm1heFdpZHRoIiwicGFyc2VJbnQiLCJjb21wbGV0ZSIsIm5ld0ltZyIsInRpbWVsaW5lQ29udHJvbFBhcnRpYWwiLCJfdGltZWxpbmVDb2xsYXBzZSIsIl9oYW5kbGVGaWx0ZXIiLCJjb21wYXJlVG8iLCJwYXRocyIsImJhY2tib25lIiwiYm9vdHN0cmFwIiwianF1ZXJ5IiwibGVhZmxldCIsImxpZ2h0Ym94IiwidW5kZXJzY29yZSIsInBhcnRpYWxzIiwic2hpbSIsImRlcHMiLCJleHBvcnRzIiwiY29uZmlnZmlsZSIsInJvdXRlcyIsImRlYnVnIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBTyx3QkFDSCxTQUNBLGFBQ0EsV0FDQSxrQkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTQyxHQUNyQixZQUNBLElBQUlDLEdBQXFCRixFQUFTRyxXQUFXQyxRQUN6Q0MsTUFBT0osR0FFWCxPQUFPQztBQ1ZYTCxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLGtDQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNNLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJQLEVBQVNHLFdBQVdDLFFBQ3pD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N0IyWSxHQUNBbGlCLEVBQUU4UixRQUFRb1EsRUFBWSxTQUFTcEosR0FDM0IsSUFDSSxHQUFJaEYsR0FDSixHQUFJck8sSUFDRTBjLE9BQVFySixFQUFXeEcsTUFBTTZQLE9BQ3pCNWdCLE9BQVF1WCxJQUVoQixNQUFPbEssR0FDQWtLLEVBQVdzSixPQUNaLEdBQUlqUSxJQUNBNVIsTUFBTyxHQUFJMlIsSUFDUHdKLElBQUs5TSxFQUFFQyxrQkFLeEJVLEtBQUssU0FBU3dDLEVBQU9sRixFQUFZRixHQUNoQyxHQUFJd0YsSUFDQTVSLE1BQU8sR0FBSTJSLElBQ1B3SixJQUFLLG9DQUFzQ3dHLEVBQWEsS0FBT3ZWLFFBSzNFLEdBQUl3RixJQUNBNVIsTUFBTyxHQUFJMlIsSUFDUHdKLElBQUsiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdjb2xsZWN0aW9ucy9hcnRpY2xlcycsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVzQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IEFydGljbGVNb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gQXJ0aWNsZXNDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvdGltZWxpbmUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lSXRlbU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUNvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBUaW1lbGluZUl0ZW1Nb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVGltZWxpbmVDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICd2aWV3cy9pc3N1ZSdcbiAgICAsICdtb2RlbHMvaXNzdWUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixBc3luY0luaXQsSXNzdWVWaWV3LElzc3VlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtb2RlbDogbnVsbFxuICAgICAgICAsIHZpZXcgOiBudWxsXG4gICAgICAgICwgcm91dGVyOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgSXNzdWVNb2RlbCh7IGNvbmZpZzogYXJncy5jb25maWcgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgSXNzdWVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IGFyZ3MuY29uZmlnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubW9kZWwuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oYXJ0aWNsZSwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAnYXJ0aWNsZS8nICsgYXJ0aWNsZS5nZXQoJ2FydGljbGVpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yb3V0ZXIubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlckFydGljbGUoYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbW9kZWxzL21hcCdcbiAgICAsICd2aWV3cy9tYXAnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdjb250cm9sbGVycy9tYXAvcGFuJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllcidcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLE1hcE1vZGVsLE1hcFZpZXcsQXN5bmNJbml0LE1hcFBhbkNvbnRyb2xsZXIsTWFwTGF5ZXJDb250cm9sbGVyLE1hcFRpbWVsaW5lQ29udHJvbGxlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtb2RlbDogbnVsbFxuICAgICAgICAsIHZpZXc6ICBudWxsXG4gICAgICAgICwgaXNzdWU6IG51bGxcbiAgICAgICAgLCBtYXBQYW5Db250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIE1hcExheWVyQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBtYXBUaW1lbGluZUNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBNYXBNb2RlbChhcmdzKTtcbiAgICAgICAgICAgIHRoYXQudmlldyA9IG5ldyBNYXBWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiAgdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0LnJvdXRlclxuICAgICAgICAgICAgICAgICwgaXNzdWU6IHRoYXQuaXNzdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3LmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlciA9IG5ldyBNYXBQYW5Db250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgbWFwOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXBMYXllckNvbnRyb2xsZXIgPSBuZXcgTWFwTGF5ZXJDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3ICA6IHRoYXQudmlld1xuICAgICAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgICAgICAsIG1vZGVsIDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZzogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8odGhhdC52aWV3LCAnbWFya2VycycsIGZ1bmN0aW9uKG1hcmtlclZpZXdzKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fcmVnaXN0ZXJNYXJrZXJzKG1hcmtlclZpZXdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQYW5Db250cm9sbGVyLmZpdE1hcmtlckJvdW5kcyh0aGF0LnZpZXcubWFya2VyVmlld3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsW3RoYXQubW9kZWwuaW5pdCgpLCB0aGF0LnZpZXcuaW5pdCgpXSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX3JlZ2lzdGVyTWFya2VycyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBfLmZvckVhY2gobWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICdhY3RpdmUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBPcGVuKG1hcmtlclZpZXcubWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gdGhhdC5fZ2V0TWFya2VyTGF5ZXIobWFya2VyVmlldy5tYXJrZXJMYXllciwgJ2dldFBvcHVwJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIuaGFuZGxlUG9wdXBQb3NpdGlvbihtYXJrZXIuZ2V0UG9wdXAoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAndG9nZ2xlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwVG9nZ2xlKG1hcmtlclZpZXcubWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gdGhhdC5fZ2V0TWFya2VyTGF5ZXIobWFya2VyVmlldy5tYXJrZXJMYXllciwgJ2dldFBvcHVwJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXIgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIuaGFuZGxlUG9wdXBQb3NpdGlvbihtYXJrZXIuZ2V0UG9wdXAoKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3LCAnY2xpY2snLCBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cE9wZW4oZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyVmlldy5tb2RlbC50cmlnZ2VyKCdhY3RpdmUnLCBtYXJrZXJWaWV3Lm1vZGVsKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcsJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQudmlldy5tYXAuaG92ZXJQb3B1cCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3BlbnBvcHVwW3BvcHVwaWQobWFwTWFya2VyLmdldExhdExuZygpKV0pIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfZ2V0TWFya2VyTGF5ZXIgOiBmdW5jdGlvbihvYmosbWV0aG9kKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIsIGxheWVycztcbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBMLkxheWVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kIGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iajtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXllcnMgPSBvYmouZ2V0TGF5ZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChvYmogPSBsYXllcnMucG9wKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmo7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKG9iaiwgJ29yaWdpbmFsRXZlbnQnKSkge1xuICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqLnRhcmdldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYXBNYXJrZXJMYXllcjtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwT3BlbjogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICdvcGVuUG9wdXAnKTtcbiAgICAgICAgICAgIGlmICghbWFwTWFya2VyTGF5ZXIpIHJldHVybjtcbiAgICAgICAgICAgIG1hcE1hcmtlckxheWVyLm9wZW5Qb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBUb2dnbGU6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAndG9nZ2xlUG9wdXAnKTtcbiAgICAgICAgICAgIGlmICghbWFwTWFya2VyTGF5ZXIpIHJldHVybjtcbiAgICAgICAgICAgIG1hcE1hcmtlckxheWVyLnRvZ2dsZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cENsb3NlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ2Nsb3NlUG9wdXAnKTtcbiAgICAgICAgICAgIGlmICghbWFwTWFya2VyTGF5ZXIpIHJldHVybjtcbiAgICAgICAgICAgIG1hcE1hcmtlckxheWVyLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcENvbnRyb2xsZXIucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcENvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL3Byb3RvdHlwZScsIFtcbiAgICAgICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQ29udHJvbGxlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ2NvbnRyb2xsZXInKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgICBDb250cm9sbGVyLmV4dGVuZCA9IEJhY2tib25lLlJvdXRlci5leHRlbmQ7XG4gICAgXy5leHRlbmQoQ29udHJvbGxlci5wcm90b3R5cGUsIEJhY2tib25lLkV2ZW50cyk7XG4gICAgXy5leHRlbmQoQ29udHJvbGxlci5wcm90b3R5cGUsIHsgXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmltcGxlbWVudGVkIGluaXRpYWxpemUoKScpO1xuICAgICAgICB9IFxuICAgIH0pO1xuICAgIHJldHVybiBDb250cm9sbGVyO1xufSk7IiwiZGVmaW5lKCdjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUnLCBbXG4gICAgICAnbGVhZmxldCdcbiAgICAsICdkMydcbl0sIGZ1bmN0aW9uIChMLGQzKSB7XG4gICAgaWYgKEwuQ29udHJvbC5UaW1lbGluZSkgcmV0dXJuIEw7XG4gICAgTC5Db250cm9sLlRpbWVsaW5lID0gTC5Db250cm9sLmV4dGVuZCh7XG4gICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uIDogJ2xlZnQnXG4gICAgICAgICAgICAgICwgaGVpZ2h0ICAgICAgOiA1MDBcbiAgICAgICAgICAgICAgLCB3aWR0aCAgICAgICA6IDEwMFxuICAgICAgICAgICAgICAsIG1hcmdpbiAgICAgIDogeyBsZWZ0OiAzLCByaWdodDogMywgdG9wOiAxMCwgYm90dG9tOiA1IH1cbiAgICAgICAgICAgICAgLCBjb2xsYXBzZWQgICA6IHRydWVcbiAgICAgICAgICAgICAgLCBpdGVtICAgICAgICA6IHttaW5IZWlnaHQ6MX1cbiAgICAgICAgICAgICAgLCBvbiAgICAgICAgICA6IG51bGxcbiAgICAgICAgICAgICAgLCB0aXRsZSAgICAgICA6ICdUaW1lbGluZSdcbiAgICAgICAgICAgICAgLCBwb3NpdGlvbiAgICA6ICd0b3BsZWZ0J1xuICAgICAgICB9XG4gICAgICAgICwgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKG1hcCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgICAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUgbGVhZmxldC1jb250cm9sJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhjb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZSA9IHRoaXMuX3RvZ2dsZSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2EnLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLXRvZ2dsZScsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnRpdGxlID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5saW5rID0gJyMnO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmdW5jdGlvbigpIHsgdGhhdC5fZXhwYW5kKCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKEwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgICAgICBMLkRvbUV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFMLkJyb3dzZXIudG91Y2gpIHtcbiAgICAgICAgICAgICAgICBMLkRvbUV2ZW50LmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy5fY29udGFpbmVyLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgb25SZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gZG8gYW55IGNsZWFudXAgaGVyZVxuICAgICAgICB9XG4gICAgICAgICwgb25BZGQ6IGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAsIF9leHBhbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoYXQuX2V4cGFuZGVkKSByZXR1cm47XG4gICAgICAgICAgICB0aGF0Ll9leHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9tYXAub24oJ2NsaWNrJywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuXG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fdGltZWxpbmUpIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGlubmVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLmhlaWdodCAtIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICAgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmJvdHRvbTtcbiAgICAgICAgICAgIHZhciBpbm5lcldpZHRoICA9IHRoaXMub3B0aW9ucy53aWR0aCAgLSB0aGlzLm9wdGlvbnMubWFyZ2luLnJpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi5sZWZ0O1xuXG4gICAgICAgICAgICB2YXIgeFNjYWxlID0gdGhpcy5feFNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJXaWR0aF0pO1xuXG4gICAgICAgICAgICB2YXIgeVNjYWxlID0gdGhpcy5feVNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAuZG9tYWluKFt0aGlzLl9zb3VyY2Uuc3RhcnQsdGhpcy5fc291cmNlLmVuZF0pXG4gICAgICAgICAgICAgICAgLnJhbmdlKFswLGlubmVySGVpZ2h0XSk7XG5cbiAgICAgICAgICAgIHZhciB0aW1lbGluZSA9IHRoaXMuX3RpbWVsaW5lID0gZDMuc2VsZWN0KCcubGVhZmxldC1jb250cm9sLXRpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsICd0aW1lbGluZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgdGhpcy5vcHRpb25zLndpZHRoKTtcblxuICAgICAgICAgICAgdmFyIGJhbmQgPSB0aW1lbGluZS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsJ2JhbmQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIChpbm5lcldpZHRoLzIgLSB0aGlzLm9wdGlvbnMubWFyZ2luLnJpZ2h0KSlcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaW5uZXJIZWlnaHQpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsXG4gICAgICAgICAgICAgICAgICAgICAgJ3RyYW5zbGF0ZSgnICsgLjI1KmlubmVyV2lkdGggKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKSdcbiAgICAgICAgICAgICAgICAgICAgKyAnIHNjYWxlKC43NSAxLjApJ1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGJhbmQuc2VsZWN0QWxsKCdnJylcbiAgICAgICAgICAgICAgICAuZGF0YSh0aGlzLl9zb3VyY2UuZ2V0SXRlbXMoKSlcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsJ3RpbWVsaW5lLWl0ZW0nKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5tYXgoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9wdGlvbnMuaXRlbS5taW5IZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgeVNjYWxlKGQuZHVyYXRpb24oKSlcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLGlubmVyV2lkdGgpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0cmFuc2xhdGUoMCwgJyArIHlTY2FsZShkLnN0YXJ0KSArICcpJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGJydXNoID0gdGhpcy5fYnJ1c2ggPSBkMy5zdmcuYnJ1c2goKVxuICAgICAgICAgICAgICAgIC55KHlTY2FsZSlcbiAgICAgICAgICAgICAgICAub24oJ2JydXNoZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRTdGFydCA9IHlTY2FsZShicnVzaC5leHRlbnQoKVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRFbmQgICA9IHlTY2FsZShicnVzaC5leHRlbnQoKVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhcjogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICwgc2VsZWN0ZWQgOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0U3RhcnQgIT09IGV4dEVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcjYmFuZCcpLnNlbGVjdEFsbCgncmVjdC50aW1lbGluZS1pdGVtJykuZWFjaChmdW5jdGlvbihpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHlTY2FsZShpLnN0YXJ0KSA8PSBleHRFbmQpICYmICh5U2NhbGUoaS5lbmQpICAgPj0gZXh0U3RhcnQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnNlbGVjdGVkLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuY2xlYXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5vbi5icnVzaGVuZChyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgeUJydXNoID0gYmFuZC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYnJ1c2gnKVxuICAgICAgICAgICAgICAgIC5jYWxsKGJydXNoKTtcbiAgICAgICAgICAgIHlCcnVzaC5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aCk7XG5cbiAgICAgICAgICAgIHZhciB5QXhpcyA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYXhpcycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnICsgKCguMjUqaW5uZXJXaWR0aCkgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQpICsgJywnICsgdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgKyAgJyknKTtcblxuICAgICAgICAgICAgdmFyIGF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAgICAgLnNjYWxlKHlTY2FsZSlcbiAgICAgICAgICAgICAgICAub3JpZW50KHRoaXMub3B0aW9ucy5vcmllbnRhdGlvbilcbiAgICAgICAgICAgICAgICAudGlja1NpemUoNiwgMClcbiAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyh0aGlzLl9zb3VyY2UudGlja1ZhbHVlcygpKVxuICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc291cmNlLnRpY2tGb3JtYXQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB5QXhpcy5jYWxsKGF4aXMpO1xuICAgICAgICB9XG4gICAgICAgICwgX2NvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2V4cGFuZGVkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAgKHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSB8fCB0eXBlb2YgdGhpcy5vcHRpb25zLm9uLmNvbGxhcHNlID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub24uY29sbGFwc2UoKTtcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVsaW5lJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLl9leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1jb2xsYXBzZWQnKTtcbiAgICAgICAgICAgIEwuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIHRoaXMuX21hcC5vZmYoJ2NsaWNrJywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgTC5jb250cm9sLnRpbWVsaW5lID0gZnVuY3Rpb24obWFwLHNvdXJjZSxvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTC5Db250cm9sLlRpbWVsaW5lKG1hcCxzb3VyY2Usb3B0aW9ucyk7XG4gICAgfTtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9hc3luY0luaXQnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnXG5dLCBmdW5jdGlvbigkLF8pIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFzeW5jSW5pdCA9IHtcbiAgICAgICAgICAkZGVmOiBudWxsXG4gICAgICAgICwgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZGVmLnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jSW5pdDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9kb213YXRjaGVyJywgW1xuICAgICdqcXVlcnknIFxuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRE9NV2F0Y2hlciA9IHtcbiAgICAgICAgd2F0Y2hET00gOiBmdW5jdGlvbihtcyxzZWwsJGRlZikge1xuICAgICAgICAgICAgaWYgKCFzZWwpIHRocm93IFwiRW1wdHkgc2VsZWN0b3IgaW4gd2F0Y2hET00oKVwiO1xuICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJChzZWwpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0sIG1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBET01XYXRjaGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2ZldGNoeG1sJywgW1xuICAgICdqcXVlcnknXG5dLCBmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBGZXRjaFhNTCA9IHtcbiAgICAgICAgLy8gcmV0dXJuIGFuIG9iamVjdCBpbXBsZW1lbnRpbmcgdGhlIFByb21pc2UgaW50ZXJmYWNlXG4gICAgICAgIC8vIHdoZW4gc3VjY2Vzc2Z1bCwgdGhlIFByb21pc2UgcmV0dXJucyB0aGUgZGF0YSBmZXRjaGVkXG4gICAgICAgIC8vIGJ5IHRoZSBhamF4IHJlcXVlc3RcbiAgICAgICAgLy8gZGF0YSByZXR1cm5lZCBieSB0aGUgcHJvbWlzZSBpcyBhIERvY3VtZW50XG4gICAgICAgIGZldGNoWE1MIDogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICB2YXIgJGdldCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogICAgICB1cmwsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd4bWwnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICRnZXQucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgJGdldC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiAkZ2V0LnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEZldGNoWE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL3htbDJodG1sJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBYTUwySFRNTCA9IHtcbiAgICAgICAgX2RvYzogZnVuY3Rpb24oeG1sKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB4bWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyh4bWwsJ3RleHQveG1sJyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHhtbCBpbnN0YW5jZW9mIERvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgeG1sRG9jID0geG1sO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgZG9jdW1lbnQgaW5wdXQgaW4gWE1MMkhUTUxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoeG1sRG9jID09IG51bGwgfHwgKCF4bWxEb2MuaGFzT3duUHJvcGVydHkoJ2dldEVsZW1lbnRzQnlUYWdOYW1lJykgJiYgeG1sRG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdwYXJzZXJlcnJvcicpLmxlbmd0aCA+IDApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGRvY3VtZW50IGluIHhtbDJodG1sXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhtbERvYztcbiAgICAgICAgfSxcbiAgICAgICAgLy8gcmV0dXJuIEhUTUwgb3IgSlNPTiBzdHJpbmcgZnJvbSBYU0xUIHRyYW5zZm9ybWF0aW9uXG4gICAgICAgIHhtbDJodG1sOiBmdW5jdGlvbih4bWwseHNsLHBhcmFtcyxtb2RlKSB7XG4gICAgICAgICAgICB2YXIgeG1sRG9jID0gdGhpcy5fZG9jKHhtbCksXG4gICAgICAgICAgICAgICAgeHNsRG9jID0gdGhpcy5fZG9jKHhzbCk7XG4gICAgICAgICAgICB2YXIgeHNsdFByb2Nlc3NvciA9IG5ldyBYU0xUUHJvY2Vzc29yKCk7XG4gICAgICAgICAgICB4c2x0UHJvY2Vzc29yLmltcG9ydFN0eWxlc2hlZXQoeHNsRG9jKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIF8uZWFjaChfLmtleXMocGFyYW1zKSwgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5zZXRQYXJhbWV0ZXIobnVsbCxrZXkscGFyYW1zW2tleV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvYyA9IHhzbHRQcm9jZXNzb3IudHJhbnNmb3JtVG9Eb2N1bWVudCh4bWxEb2MpO1xuICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLzx0cmFuc2Zvcm1paXg6cmVzdWx0Pi4uLjwvdHJhbnNmb3JtaWl4OnJlc3VsdD5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0ID0gZG9jLmJvZHkuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgaW4gWFNMVCB0cmFuc2Zvcm06ICcgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFhNTDJIVE1MO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2ZldGNoeG1sJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2dlb2pzb24ueHNsJ1xuICAgICwgJ3RleHQheHNsL2NpdGVkLXJhbmdlLnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxGZXRjaFhNTCxBc3luY0luaXQsWE1MMkhUTUwsZ2VvSnNvblhzbCxjaXRlZFJhbmdlWHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gdGhhdC5mZXRjaFhNTCh0aGF0LmdldCgncGF0aCcpKTtcbiAgICAgICAgICAgICQud2hlbigkZ2V0KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgneG1sJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhhdC5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICAgICAgdGhhdC5fbWtDaXRlZFJhbmdlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoYXQuZ2VvanNvbiAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3BsYWNlVHlwZScsIHRoYXQuZ2VvanNvbi5wcm9wZXJ0aWVzLmxheWVyKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAvL1RPRE86ICd4bWwnOiBzZXJpYWxpemU/IGFuZCBjYWNoZSB0byBsb2NhbHN0b3JhZ2VcbiAgICAgICAgICAgIC8vIGFkZCBhZGFwdGVyIGZvciBhY2Nlc3MgdGhyb3VnaCAuYXR0cmlidXRlc1xuICAgICAgICAgICAgICBcInhtbFwiICAgICAgIDogbnVsbCAgICAvLyBEb2N1bWVudFxuICAgICAgICAgICAgLCBcInBsYWNlVHlwZVwiIDogbnVsbFxuICAgICAgICAgICAgLCBcImljb25VcmxcIiAgIDogJydcbiAgICAgICAgICAgICwgXCJjaXRlZFJhbmdlXCI6IHt9XG4gICAgICAgIH0sXG4gICAgICAgIGdlb2pzb246IG51bGwsXG4gICAgICAgIGdldEdlb2pzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2VvanNvbiA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aGlzLl9ta0dlb2pzb24oKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlb2pzb247XG4gICAgICAgIH0sXG4gICAgICAgIF9ta0dlb2pzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IHRoaXMueG1sMmh0bWwodGhpcy5nZXQoJ3htbCcpLCBnZW9Kc29uWHNsLCB7fSwgJ3RleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdlb2pzb24gPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBnZW9qc29uOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9ta0NpdGVkUmFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IHRoaXMueG1sMmh0bWwodGhpcy5nZXQoJ3htbCcpLCBjaXRlZFJhbmdlWHNsLCB7fSwgJ3RleHQnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCgnY2l0ZWRSYW5nZScsIEpTT04ucGFyc2UoanNvblN0cmluZykpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBjaXRlZCByYW5nZSBqc29uOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEZldGNoWE1MKTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvYXJ0aWNsZSdcbiAgICAsICdjb2xsZWN0aW9ucy9hcnRpY2xlcydcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVNb2RlbCxBcnRpY2xlQ29sbGVjdGlvbixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgICA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciBhcnRkaXIgID0gYXJncy5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2U7XG4gICAgICAgICAgICBpZiAoIWFydGRpci5tYXRjaCgvXFwvJC8pKSBhcnRkaXIgKz0gJy8nO1xuICAgICAgICAgICAgdmFyIGZpbGVzICAgPSBhcmdzLmNvbmZpZy5hcnRpY2xlcy5maWxlcztcbiAgICAgICAgICAgIHZhciBjb2wgICAgID0gbmV3IEFydGljbGVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgLy8gZml4IGxlbmd0aCBvZiBhcnRpY2xlcyBhcnJheVxuICAgICAgICAgICAgdmFyIGFydGljbGVzID0gXy5tYXAoXy5yYW5nZShmaWxlcy5sZW5ndGgpLCBmdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWQ7fSk7XG4gICAgICAgICAgICAvLyBhcnRpY2xlcyBjb25zdHJ1Y3RlZCBzeW5jLCBzbyBhcnRpY2xlIG9iamVjdHMgYWRkZWQgdG8gbGlzdCBieSBpbmRleFxuICAgICAgICAgICAgXy5lYWNoKGZpbGVzLCBmdW5jdGlvbihmaWxlLGkpIHtcbiAgICAgICAgICAgICAgICBhcnRpY2xlc1tpXSA9IG5ldyBBcnRpY2xlTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICBpLFxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlZGlyOiBhcnRkaXIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6ICAgICAgIGFydGRpciArIGZpbGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGluaXRzID0gXy5tYXAoYXJ0aWNsZXMsIGZ1bmN0aW9uKGFydGljbGUpe3JldHVybiBhcnRpY2xlLmluaXQoKTt9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLGluaXRzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbC5hZGQoYXJ0aWNsZXMpO1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0SWNvbnMoKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaW5pdHMsIGZ1bmN0aW9uKCRwcm9taXNlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwcm9taXNlLnN0YXRlKCkgPT09ICdyZWplY3RlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpOyAvLyBub3QgcmUtc2V0IG9uIGZhaWx1cmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1hcCBtYXJrZXIgaWNvbnMgZmlsZW5hbWUgdmFsdWVzIGFyZSBzZXQgaGVyZTsgaWNvbiBjb2xvcnMgYXJlIGFzc2lnbmVkXG4gICAgICAgIC8vIHJhbmRvbWx5LCBzbyB0byBzdXBwb3J0IGEgY29uc2lzdGVuY3kgYmV0d2VlbiB0aGUgY29sb3IgYW5kIHRoZSBwbGFjZS10eXBlXG4gICAgICAgIC8vIGxheWVyLCB0aGV5IG11c3QgYmUgYXNzaWduZWQgYXMgYSBncm91cFxuICAgICAgICAsIHNldEljb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBpY2NvbmZpZyAgPSB0aGF0LmNvbmZpZy5tYXJrZXJzLmljb25zO1xuICAgICAgICAgICAgdmFyIGljb25GaWxlcyA9IF8uc2h1ZmZsZShfLmZsYXR0ZW4oXG4gICAgICAgICAgICAgICAgXy5tYXAoaWNjb25maWcsIGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm1hcChlbnRyeS5maWxlcywgZnVuY3Rpb24oZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5LmRpci5jb25jYXQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0SWNvbkZpbGUgPSBpY29uRmlsZXMucG9wKCk7XG4gICAgICAgICAgICB2YXIgaWNvbnMgPSBbXTtcbiAgICAgICAgICAgIC8vIGRvIG1hcCBtYXJrZXIgaWNvbiBpbml0aWFsaXphdGlvbjsgdGhpcyBzZWVtcyBsaWtlIGl0IHNob3VsZFxuICAgICAgICAgICAgLy8gYmUgaXNvbGF0ZWQgdG8gdGhlIE1hcFZpZXcgb3IgTWFya2VyVmlldywgYnV0IGlzIGRhdGEgdXNlZFxuICAgICAgICAgICAgLy8gZWxzZXdoZXJlIGluIHRoZSBhcHBsaWNhdGlvbiwgc28gdGhleSBhcmUgYXNzaWduZWQgaGVyZVxuICAgICAgICAgICAgdGhhdC5nZXQoJ2NvbGxlY3Rpb24nKS5mb3JFYWNoKGZ1bmN0aW9uKGFydGljbGUsaSkge1xuICAgICAgICAgICAgICAgIHZhciBnZW9qc29uID0gKGFydGljbGUuZ2V0R2VvanNvbigpIHx8IHtcInByb3BlcnRpZXNcIjp7fX0pO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGdlb2pzb24ucHJvcGVydGllcy5sYXllcjtcbiAgICAgICAgICAgICAgICBpY29uc1tsYXllcl0gPSBpY29uc1tsYXllcl0gfHwgaWNvbkZpbGVzLnBvcCgpIHx8IGRlZmF1bHRJY29uRmlsZTtcbiAgICAgICAgICAgICAgICBhcnRpY2xlLnNldCgnaWNvblVybCcsIGljb25zW2xheWVyXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXR1cm4gYXJ0aWNsZSBvYmplY3QgY29ycmVzcG9uZGluZyB0byBhcmd1bWVudDtcbiAgICAgICAgLy8gYXJndW1lbnQgbWF5IGJlIGVpdGhlciBhbiBpbmRleCBpbnRvIHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHByb3ZpZGVkIGJ5IGEgdXJsKSBvciBhbiBBcnRpY2xlTW9kZWxcbiAgICAgICAgLy8gKGUuZy4sIHdoZW4gc2VsZWN0ZWQgYnkgYSBtYXAgbWFya2VyKSBcbiAgICAgICAgLCBnZXRBcnRpY2xlOiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICB2YXIgYXJ0O1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFydGljbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgYXJ0ID0gYXJ0aWNsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFydGljbGUgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcnRpY2xlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFydCA9IGNvbC5hdChhcnRpY2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhcnQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChJc3N1ZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5nZXRKU09OKGFyZ3MuY29uZmlnLm1hcC5jb25maWcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgnbWFwY29uZmlnJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gbG9hZCBtYXAgY29uZmlnIGZpbGU6ICcgKyBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1hcGNvbmZpZ1wiIDoge31cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdyb3V0ZXMvcm91dGVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21vZGVscy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvY2xlYXInXG4gICAgLCAnY29udHJvbGxlcnMvaXNzdWUnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwJ1xuICAgICwgJ3ZpZXdzL21lbnUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyxDbGVhclZpZXcsSXNzdWVDb250cm9sbGVyLE1hcENvbnRyb2xsZXIsTWVudVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuICAgICAgICAgIHBhZ2VzICAgOiB7fSAgIC8vIGNvbmZpZyBmb3Igc3VwcG9ydGVkIHBhZ2VzXG4gICAgICAgICwgY29uZmlnICA6IHt9ICAgLy8gZ2xvYmFsIHNpdGUgY29uZmlndXJhdGlvbiwgaS5lLiwgc2l0ZS5qc29uXG4gICAgICAgICwgaXNzdWVDb250cm9sbGVyIDogbnVsbCAvLyBJc3N1ZU1vZGVsIGZvciB0aGlzIGFwcFxuICAgICAgICAsIG1hcENvbnRyb2xsZXIgICA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IG9wdHMuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5wYWdlcyAgPSBvcHRzLmNvbmZpZy5wYWdlcztcbiAgICAgICAgICAgIHRoaXMuaXNzdWVDb250cm9sbGVyID0gbmV3IElzc3VlQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICByb3V0ZXI6IHRoaXNcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogdGhpcy5jb25maWcgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVDb250cm9sbGVyLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIHBhZ2VzLnJvdXRlci5oaXN0b3J5ID0gdHJ1ZSBieSBkZWZhdWx0LCBpZiBtaXNzaW5nXG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKHRoYXQucGFnZXMucm91dGVyLCdoaXN0b3J5JykgJiYgISF0aGF0LnBhZ2VzLnJvdXRlci5oaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCxvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoQmFja2JvbmUuaGlzdG9yeS5mcmFnbWVudCA9PT0gZnJhZ21lbnQpIHJldHVybjtcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBwYWdlOiBmdW5jdGlvbihwYWdlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFnZUNvbmZpZztcbiAgICAgICAgICAgIHZhciBtYXBQYWdlID0gZmFsc2U7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghcGFnZSkgcGFnZSA9IHRoaXMucGFnZXMuaG9tZTtcbiAgICAgICAgICAgICAgICBwYWdlQ29uZmlnID0gdGhpcy5wYWdlcy5wYWdlc1twYWdlXTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZUNvbmZpZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29uZmlnIGluIHJvdXRlci9wYWdlJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFnZSgnNDA0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXcgQ2xlYXJWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICBfLmVhY2gocGFnZUNvbmZpZywgZnVuY3Rpb24ocGMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmlld05hbWU7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGNsb25lIGNvbmZpZyB0byBhdm9pZCBnbG9iYWwgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBjKSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGNvbmZpZywgJ3ZpZXcnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9IGNvbmZpZy52aWV3O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uZmlnLCAncGFydGlhbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gJ3ZpZXdzL3BhcnRpYWwnO1xuICAgICAgICAgICAgICAgICAgICBjb25maWcucGFydGlhbC5wYWdlID0gdGhhdC5wYWdlcy5wYXRoQmFzZSArIGNvbmZpZy5wYXJ0aWFsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBfLmV4dGVuZChhcmdzLGNvbmZpZy5wYXJ0aWFsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmZnLCAnZnVsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29uZmlnLmZ1bGwucGFnZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcGFnZSB0eXBlIGluIHJvdXRlcjogJyArIHBhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmlld05hbWUgPT09ICd2aWV3cy9tYXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwQ29udHJvbGxlciA9IG5ldyBNYXBDb250cm9sbGVyKGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICBtYXBQYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFt2aWV3TmFtZV0sIGZ1bmN0aW9uKFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gbmV3IFZpZXcoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghbWFwUGFnZSkgdGhhdC5tYXBDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAsIGFydGljbGUgOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVDb250cm9sbGVyLm1vZGVsXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoJCgnI3RpdGxlcGFnZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcjdGl0bGVwYWdlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI3BhZ2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI3BhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGF0Lm1hcENvbnRyb2xsZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcENvbnRyb2xsZXIgPSBuZXcgTWFwQ29udHJvbGxlcihhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjbWVudScpLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE1lbnVWaWV3KGFyZ3MpLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2VsZWN0IHRoZSBhcnRpY2xlIGluZGljYXRlZCBieSB0aGUgdXJsJ3Mgcm91dGUgb25seSBhZnRlclxuICAgICAgICAgICAgLy8gdGhlIG1hcCBoYXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIHRoYXQubWFwQ29udHJvbGxlci5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJ0aWNsZSA9IHRoYXQuaXNzdWVDb250cm9sbGVyLm1vZGVsLmdldEFydGljbGUoaWQpOyBcbiAgICAgICAgICAgICAgICBhcnRpY2xlLnRyaWdnZXIoJ2FjdGl2ZScsIGFydGljbGUpO1xuICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBSb3V0ZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCd2aWV3cy9hcHAnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgc2lnbmFsID0ge307XG4gICAgdmFyIEFwcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFwcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9hcnRpY2xlLnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxHYWxsZXJ5VmlldyxYTUwySFRNTCx4c2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBpZDogJ2FydGljbGUnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGVsID0gJCgnIycgKyB0aGF0LmlkKTtcbiAgICAgICAgICAgIGlmICh0aGF0LiRlbC5maW5kKCcjJyArIHRoYXQubW9kZWwuY2lkKS5sZW5ndGggIT09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnhtbDJodG1sKFxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuZ2V0KCd4bWwnKSwgeHNsLCBcbiAgICAgICAgICAgICAgICB7XCJhcnRpY2xlLWRpclwiOiB0aGF0LmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZVxuICAgICAgICAgICAgICAgICwgXCJpY29uVXJsXCIgICAgOiB0aGF0Lm1vZGVsLmdldCgnaWNvblVybCcpXG4gICAgICAgICAgICAgICAgLCBcImNpZFwiICAgICAgICA6IHRoYXQubW9kZWwuY2lkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgJCgnLmFydGljbGUtY29udGVudCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQoJyMnK3RoaXMuaWQpLmFwcGVuZChodG1sKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImFydGljbGUgbG9hZCBlcnJvcjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCAkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IEdhbGxlcnlWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNmb290ZXInKS5yZW1vdmUoKVxuICAgICAgICAgICAgICAgICQoJ2FydGljbGUnKS5yZW1vdmVDbGFzcygnYmVmb3JlLWZvb3RlcicpLmFkZENsYXNzKCduby1mb290ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoYXQuJGVsLmZpbmQoJy5hcnRpY2xlLW1hcmtlcicpLmNsaWNrKGZ1bmN0aW9uKGksZWx0KSB7XG4gICAgICAgICAgICAgICAgdGhhdC5tb2RlbC50cmlnZ2VyKCd0b2dnbGUnLCB0aGF0Lm1vZGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL30sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2NsZWFyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQ2xlYXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmVtcHR5KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQ2xlYXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2lzc3VlLmh0bWwnXG4gICAgLCAndmlld3MvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLEFydGljbGVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAgICAgICAgICcjaXNzdWUnLFxuICAgICAgICB0ZW1wbGF0ZTogICBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0bXBsKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyQXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgbmV3IEFydGljbGVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiAgYXJ0aWNsZVxuICAgICAgICAgICAgICAgICwgY29uZmlnOiB0aGlzLm1vZGVsLmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGlzXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoaXMubW9kZWwucm91dGVyXG4gICAgICAgICAgICB9KS5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBJc3N1ZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdsZWFmbGV0J1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFwLmh0bWwnXG4gICAgLCAndmlld3MvbWFya2VyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCxtYXBQYXJ0aWFsLE1hcmtlclZpZXcsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAgICAgICdtYXAnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBtYXJrZXJWaWV3czogW10gLy8gc3Vidmlld3NcbiAgICAgICAgLCBtYXBjb25maWc6IHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IGFyZ3MubW9kZWw7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxbdGhhdC5pc3N1ZS5pbml0KCksIHRoYXQubW9kZWwuaW5pdCgpXSkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IHRoYXQubW9kZWwuZ2V0KCdtYXBjb25maWcnKTtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRNYXAgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQobWFwUGFydGlhbCk7XG4gICAgICAgICAgICAgICAgdGhhdC5tYXAgPSBuZXcgTC5NYXAodGhhdC5tYXBjb25maWcuaWQsIHRoYXQubWFwY29uZmlnLm1hcCk7XG4gICAgICAgICAgICAgICAgbmV3IEwuVGlsZUxheWVyKHRoYXQubWFwY29uZmlnLnRpbGVMYXllci51cmwsIHRoYXQubWFwY29uZmlnLnRpbGVMYXllci5vcHRzKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICAgICAgbmV3IEwuY29udHJvbC5zY2FsZSh0aGF0Lm1hcGNvbmZpZy5zY2FsZSkuYWRkVG8odGhhdC5tYXApOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcmtlclZpZXdzID0gXy5tYXAodGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXJrZXJWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgICAgIDogYXJ0aWNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWcgOiB0aGF0Lm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAsIHJlbmV3Vmlld3MgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBfLm1hcCh0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgIGlmICghYXJ0aWNsZS5tYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGUubWFya2VyVmlldyA9IG5ldyBNYXJrZXJWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgICAgIDogYXJ0aWNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXAgICAgICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWcgOiB0aGF0Lm1hcGNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFydGljbGUubWFya2VyVmlldztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG12KSB7IG12LnJlbmRlcigpOyB9KTtcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbWFya2VycycsIHRoYXQubWFya2VyVmlld3MpO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuX2luaXRNYXAoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtdikgeyBtdi5yZW5kZXIoKSB9KTtcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignbWFya2VycycsIHRoYXQubWFya2VyVmlld3MpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwVmlldy5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gTWFwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFya2VyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFya2VyLmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXItbGVnZW5kLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCxsZWdlbmRQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKHRtcGwpXG4gICAgICAgICwgZWw6ICcnXG4gICAgICAgICwgbWFya2VyTGF5ZXI6IG51bGxcbiAgICAgICAgLCBtYXA6IG51bGxcbiAgICAgICAgLCBtYXBjb25maWc6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuaW5pdE1hcmtlckxheWVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBpbml0TWFya2VyTGF5ZXIgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciBnZW9qc29uID0gdGhpcy5tb2RlbC5nZXRHZW9qc29uKCk7XG4gICAgICAgICAgICB2YXIgaWNvbkNvbmZpZyA9IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLmljb247XG4gICAgICAgICAgICBpY29uQ29uZmlnLmljb25VcmwgPSAodGhpcy5tb2RlbC5nZXQoJ2ljb25VcmwnKSB8fCAnJyk7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IEwuaWNvbihpY29uQ29uZmlnKTtcbiAgICAgICAgICAgIHRoYXQubWFya2VyTGF5ZXIgPSBMLmdlb0pzb24oZ2VvanNvbiwge1xuICAgICAgICAgICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIChmZWF0dXJlLCBtYXBNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBwb3B1cCB0byB0aGlzIG1hcmtlclxuICAgICAgICAgICAgICAgICAgICB2YXIgcG9wdXAgPSBMLnBvcHVwKHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLnBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXAuc2V0Q29udGVudChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQudGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFydGljbGVpZDogIHRoYXQubW9kZWwuZ2V0KCdhcnRpY2xlaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uOiAgICB0aGF0Lm1vZGVsLmdldEdlb2pzb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLmJpbmRQb3B1cChwb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGNsaWNrIGhhbmRsZXIgZm9yIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBtYXJrZXIsIHdoaWNoIHdvdWxkIGNsb3NlIHRoZSBwb3B1cCBpZiBpdFxuICAgICAgICAgICAgICAgICAgICAvLyB3ZXJlIGFscmVhZHkgb3BlblxuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdjbGljaycsIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtb3VzZW92ZXInLCBldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBvaW50VG9MYXllcjogZnVuY3Rpb24gKGZlYXR1cmUsIGxhdGxuZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTC5tYXJrZXIobGF0bG5nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGljb24gICAgICAgIDogaWNvblxuICAgICAgICAgICAgICAgICAgICAgICAgLCBjbGlja2FibGUgICA6ICEhZmVhdHVyZS5wcm9wZXJ0aWVzLnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICwgdGl0bGUgICAgICAgOiAoZmVhdHVyZS5wcm9wZXJ0aWVzLm1hcmtlcm5hbWUgfHwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG9wYWNpdHkgICAgIDogdGhhdC5tYXBjb25maWcuZmVhdHVyZXMub3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgLCByaXNlT25Ib3ZlciA6IHRoYXQubWFwY29uZmlnLmZlYXR1cmVzLnJpc2VPbkhvdmVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMubWFya2VyTGF5ZXIuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcmtlclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21lbnUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tZW51Lmh0bWwnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAndmlld3MvYXJ0aWNsZS9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLG1lbnVUbXBsLERPTVdhdGNoZXIsQXJ0aWNsZU1lbnVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUobWVudVRtcGwpLFxuICAgICAgICAgIGlkOiAgICAgICdtZW51J1xuICAgICAgICAsIHRhZ05hbWU6ICdkaXYnXG4gICAgICAgICwgaXNzdWU6ICAgbnVsbFxuICAgICAgICAsIGNvbmZpZzogIHt9XG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gYXJncy5pc3N1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIGlmICgkKCcjJyArIHRoYXQuaWQpLmNoaWxkcmVuKCkubGVuZ3RoICE9PSAwKSByZXR1cm47XG4gICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmNvbmZpZy5tZW51O1xuICAgICAgICAgICAgLy8gcmVuZGVyIGVhY2ggaXRlbSBmcm9tIHRoZSBjb25maWcgZmlsZSB0byBhIDxsaT5cbiAgICAgICAgICAgIC8vIG11c3QgYmUgZG9uZSBhc3luYyBkdWUgdG8gcmV0cmlldmFsIG9mIHBhcnRpYWwgZmlsZXNcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgIC8vIGNhY2hlIG9mIHRlbXBsYXRlIHN0cmluZ3M6IHVybCA9PiB0ZW1wbFxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb25zID0ge307XG4gICAgICAgICAgICBfLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlc1tpdGVtLnBhcnRpYWxdID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggaXRlbS5jb2xsZWN0aW9uID09PSBcImNvbGxlY3Rpb25zL2FydGljbGVzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0gPSB0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5oYW5kbGVkIGNvbGxlY3Rpb24gdHlwZSByZXF1ZXN0ZWQ6IFwiICsgaXRlbS5jb2xsZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyh0ZW1wbGF0ZXMpLCBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgdXJsXSwgZnVuY3Rpb24odGVtcGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzW3VybF0gPSBfLnRlbXBsYXRlKHRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkZGVmLnByb21pc2UoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbmRlciB0aGUgbWVudSBhcyBhIDxkaXY+XG4gICAgICAgICAgICB2YXIgY29udGVudCA9ICcnO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KCQsIHByb21pc2VzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSxpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBpdGVtLnBhcnRpYWw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRLZXlzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdwYWdlJyB8fCBpdGVtLnR5cGUgPT09ICdzZXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25zW2l0ZW0uY29sbGVjdGlvbl0ubW9kZWxzLmZvckVhY2goZnVuY3Rpb24obW9kZWwsaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBocmVmICAgID0gaXRlbS5pdGVtLmhyZWYucmVwbGFjZSgnOmknLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW12ICAgICA9IG5ldyBBcnRpY2xlTWVudVZpZXcoe21vZGVsOm1vZGVsfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCAgPSBhbXYucmVuZGVyKHtocmVmOiAnIycgKyBocmVmfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRsaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkIGFuIDxsaT4gZWxlbWVudCBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0JPRFknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5pbm5lckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5ub2RlTmFtZSA9PT0gJ0xJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQub3V0ZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZG9jdW1lbnQgZWxlbWVudCBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcmVzdWx0IHR5cGUgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkbGkuYXR0cignZGF0YS1zb3J0LWtleScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuYXR0cignZGF0YS1zb3J0LWtleScpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRlclskbGkuZmluZCgnYScpLnRleHQoKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzID0gXy5rZXlzKHNvcnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cy5zb3J0KGZ1bmN0aW9uKGEsYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmxvY2FsZUNvbXBhcmUoYik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChzb3J0S2V5cywgZnVuY3Rpb24oa2V5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJDb250ZW50ICs9IHNvcnRlcltrZXldWzBdLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogc3ViQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCgnIycgKyB0aGF0LmlkKS5lbXB0eSgpLmFwcGVuZCh0aGF0LnRlbXBsYXRlKHtjb250ZW50OiBjb250ZW50fSkpO1xuICAgICAgICAgICAgICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgbWVudSBoYXMgbG9hZGVkXG4gICAgICAgICAgICAgICAgdmFyICRmYWlsRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgICRmYWlsRGVmLmZhaWwoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LndhdGNoRE9NKDUwMCwgJyMnICsgdGhhdC5pZCwgJGZhaWxEZWYpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gYnVpbGQgbWVudS5cIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1lbnVWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhZ2UnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL2RvbXdhdGNoZXInLFxuICAgICd0ZXh0IXBhcnRpYWxzL3BhZ2UuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLHBhZ2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhZ2VWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJGRlZi50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkZGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhZ2VWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICByZXR1cm4gUGFnZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL3BhcnRpYWwnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxET01XYXRjaGVyLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFydGlhbFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnJyxcbiAgICAgICAgcGFnZTogJycsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmVsICAgPSBvcHRzLmVsO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIG9wdHMucGFnZV0sIGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnBhZ2UgPSBodG1sO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICR3YXRjaERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuaW5pdCgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQodGhhdC5wYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJHdhdGNoRGVmKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gUGFydGlhbFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnY29udHJvbGxlcnMvbWFwL2xheWVyL3BsYWNldHlwZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAvbGF5ZXIvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixQbGFjZVR5cGVDb250cm9sbGVyLFRpbWVsaW5lQ29udHJvbGxlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwTGF5ZXJDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIHZpZXcgICA6IG51bGxcbiAgICAgICAgLCByb3V0ZXIgOiBudWxsXG4gICAgICAgICwgbWFwICAgIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBhcmdzLnZpZXc7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5tb2RlbDtcbiAgICAgICAgICAgIHZhciBwbGFjZVR5cGVDb250cm9sbGVyID0gbmV3IFBsYWNlVHlwZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgdmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgICwgbWFwY29uZmlnOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMubWFwY29uZmlnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB0aW1lbGluZUNvbnRyb2xsZXIgPSBuZXcgVGltZWxpbmVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXdzIDogdGhhdC52aWV3Lm1hcmtlclZpZXdzXG4gICAgICAgICAgICAgICAgLCBtYXAgICAgICAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAsIHNpdGVjb25maWcgIDogdGhhdC5tb2RlbC5hdHRyaWJ1dGVzLmNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnN1YkNvbnRyb2xsZXJzID0gW3BsYWNlVHlwZUNvbnRyb2xsZXIsIHRpbWVsaW5lQ29udHJvbGxlcl07XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5zdWJDb250cm9sbGVycywgZnVuY3Rpb24oc3ViQ29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oc3ViQ29udHJvbGxlciwgJ2ZpbHRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll91cGRhdGVNYXJrZXJzKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbHRlciB0aGUgdmlzaWJsZSBtYXAgbWFya2VycyBiYXNlZCBvbiB0aGUgcGxhY2V0eXBlIGFuZCB0aGVcbiAgICAgICAgLy8gdGltZWxpbmUgbGF5ZXIgY29udHJvbHM7IHRoZSBcImhpZGVcIiBzdGF0ZSB0YWtlcyBwcmVjZWRlbmNlIGlmXG4gICAgICAgIC8vIHRoZSBjb250cm9scyBkaXNhZ3JlZSAoaS5lLiwgYSBtYXJrZXIgdGhhdCBpcyBoaWRkZW4gb24gYW55XG4gICAgICAgIC8vIGNvbnRyb2wgaXMgaGlkZGVuIG9uIHRoZSBtYXApXG4gICAgICAgICwgX3VwZGF0ZU1hcmtlcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQuc3ViQ29udHJvbGxlcnMsIGZ1bmN0aW9uKHN1YkNvbnRyb2xsZXIpe1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBzdWJDb250cm9sbGVyLmdldEZpbHRlclN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaGlkZS5wdXNoKHJlcy5oaWRlKVxuICAgICAgICAgICAgICAgIGhpZGUgPSBfLmZsYXR0ZW4oaGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGF0LnZpZXcubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBfLmZpbmQoaGlkZSwgZnVuY3Rpb24oaGlkZGVuTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuTGF5ZXIgPT09IG1hcmtlclZpZXcubWFya2VyTGF5ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKVxuICAgICAgICAgICAgICAgICAgICBzaG93LnB1c2gobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChzaG93LCBmdW5jdGlvbihtYXJrZXJMYXllcikge1xuICAgICAgICAgICAgICAgIHRoYXQudmlldy5tYXAuYWRkTGF5ZXIobWFya2VyTGF5ZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2goaGlkZSwgZnVuY3Rpb24obWFya2VyTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZXcubWFwLnJlbW92ZUxheWVyKG1hcmtlckxheWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcExheWVyQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL3BhbicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixET01XYXRjaGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBQYW5Db250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWFwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaW5pdGlhbGl6ZWQgbWFwXCIpO1xuICAgICAgICB9XG4gICAgICAgICwgX2ZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKTtcbiAgICAgICAgICAgIGlmICghZWx0KSByZXR1cm47XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCA9IEwuRG9tVXRpbC5nZXRWaWV3cG9ydE9mZnNldChlbHQpLng7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXy5tYXAobWFya2VyVmlld3MsZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBsbmdMYXQgPSBtYXJrZXJWaWV3Lm1vZGVsLmdldEdlb2pzb24oKS5nZW9tZXRyeS5jb29yZGluYXRlcy5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTC5sYXRMbmcobG5nTGF0LnJldmVyc2UoKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAoZWRnZVB0WCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlZGdlUHRYICE9IHRoYXQubWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIHVuZGVybmVhdGggYXJ0aWNsZVxuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmdCb3R0b21SaWdodCcgOiBbZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIGVkZ2VQdFgsMF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIGJlc2lkZSBhcnRpY2xlXG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Lm1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkanVzdCBtYXAgcGFuL3pvb20gdG8gbWFrZSBhbGwgbWFwIG1hcmtlcnMgb2NjdXIgdG8gdGhlIFxuICAgICAgICAvLyBsZWZ0IG9mIGRpdiNhcnRpY2xlIGluIHdpZGUgbW9kZVxuICAgICAgICAsIGZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9maXRNYXJrZXJCb3VuZHMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsJyNhcnRpY2xlJywkZGVmKTtcbiAgICAgICAgfVxuICAgICAgICAsIGhhbmRsZVBvcHVwUG9zaXRpb24gOiBmdW5jdGlvbihwb3B1cCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG1hcCA9IHRoYXQubWFwO1xuICAgICAgICAgICAgdmFyIGlkID0gJChwb3B1cC5nZXRDb250ZW50KCkpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCwgJHBvcHVwV3JhcCwgcG9wdXBMYXRMbmcsIHBvcHVwUmlnaHRYLCBwYWQ7XG4gICAgICAgICAgICBwb3B1cExhdExuZyA9IHBvcHVwLmdldExhdExuZygpO1xuICAgICAgICAgICAgaWYgKHBvcHVwTGF0TG5nID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKSkueDtcbiAgICAgICAgICAgIC8vIG1hcCBzaG91bGQgcGFuIHJpZ2h0L2Vhc3QgaWYgdGhlIHBvcHVwIGJhbGxvb24gaXMgY292ZXJlZCBieSB0aGUgYXJ0aWNsZTtcbiAgICAgICAgICAgIC8vIHBhZCBpcyBhIHNsaWdodCByZWxpZWYgYmV0d2VlbiB0aGUgcG9wdXAgYW5kIHRoZSBhcnRpY2xlXG4gICAgICAgICAgICAkcG9wdXBXcmFwID0gJCgnIycgKyBpZCkuY2xvc2VzdCgnLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyJykuZmlyc3QoKTtcbiAgICAgICAgICAgIHBhZCA9IEwucG9pbnQocG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IHx8IHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmcpO1xuICAgICAgICAgICAgcGFkID0gcGFkID8gcGFkLnggOiAwO1xuICAgICAgICAgICAgcG9wdXBSaWdodFggPSAoJHBvcHVwV3JhcC5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICA/ICRwb3B1cFdyYXAub2Zmc2V0KCkubGVmdCArICRwb3B1cFdyYXAud2lkdGgoKSArIHBhZFxuICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYICE9IDAgJiYgcG9wdXBSaWdodFggPiBlZGdlUHRYICYmIGVkZ2VQdFggIT0gbWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgbWFwLnBhbkJ5KFtwb3B1cFJpZ2h0WCAtIGVkZ2VQdFgsMF0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbWFwLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvcHVwLmdldExhdExuZygpKSkge1xuICAgICAgICAgICAgICAgIG1hcC5jbG9zZVBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBtYXAub3BlblBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFBhbkNvbnRyb2xsZXIucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNYXBQYW5Db250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibXNnXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdtc2cnLCBhcmdzLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBVc2VyRXJyb3JNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9nYWxsZXJ5JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveCdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcsQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcsQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGp1c3QgaGVpZ2h0IG9mIGFydGljbGUgYm9keVxuICAgICAgICAgICAgLy8gVE9ETzogaGFuZGxlIGluIGNzc1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQoJyNhcnRpY2xlIGFydGljbGUnKS5oZWlnaHQoKSAtICQoJyNoZWFkZXInKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgICQoJyNib2R5JykuY3NzKHtoZWlnaHQ6aGVpZ2h0fSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpbWFnZXMgdGhhdCBmYWlsIHRvIGxvYWQsIHNpbmNlIHdlIGNhbm5vdCBkb1xuICAgICAgICAgICAgLy8gYSBmaWxlIHRlc3Qgd2hlbiBydW5uaW5nIHRoZSB4c2xcbiAgICAgICAgICAgIHZhciBkZWZzID0gW107XG4gICAgICAgICAgICAkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKGksaW1nKXtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkKGltZykubG9hZChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkKGltZykucmVtb3ZlQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGltZykuZXJyb3IoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgc29tZSB0aW1lIGJlZm9yZSBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9LDUwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGVmcy5wdXNoKCRkZWYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sZGVmcykuYWx3YXlzKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlLnJlbW92ZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQoJy5pbWFnZS1sb2FkaW5nJykucmVtb3ZlQ2xhc3MoJ2ltYWdlLWxvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIG5ldyBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldygpLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIG5ldyBBcnRpY2xlR2FsbGVyeVNsaWRlc1ZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFydGljbGVHYWxsZXJ5Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbi8qXG4gKiBUaGlzIGlzIG1lYW50IHRvIGJlIGV4dGVuZGVkIGFzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHRoZVxuICogc2VjdGlvbnMgb2YgYW4gYXJ0aWNsZS5cbiAqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL21lbnUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL3htbDJodG1sJyxcbiAgICAndGV4dCF4c2wvYXJ0aWNsZS1tZW51LnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxYTUwySFRNTCxhbVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gdGhpcyB2aWV3IGlzIG1lYW50IHRvIGJlIGNhbGxlZCBvbmx5IGFmdGVyIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICAgICAgICAvLyBhcnRpY2xlIG1vZGVsIGhhcyBiZWVuIGluaXRpYWxpemVkXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5pbml0KCkuc3RhdGUoKSAhPT0gJ3Jlc29sdmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVW5pbml0aWFsaXplZCBhcnRpY2xlIGluIEFydGljbGVNZW51Vmlld1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1lbnVpdGVtID0gdGhhdC54bWwyaHRtbCh0aGF0Lm1vZGVsLmdldCgneG1sJyksIGFtWHNsLCBwYXJhbXMpO1xuICAgICAgICAgICAgcmV0dXJuIG1lbnVpdGVtO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1lbnVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvZXJyb3IvdXNlcicsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ2JhY2tib25lJywgXG4gICAgJ3RleHQhcGFydGlhbHMvZXJyb3IvdXNlci5odG1sJ1xuXSwgZnVuY3Rpb24oJCxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgZWw6ICQoJyNlcnJvckRpYWxvZycpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLm1vZGFsKHtrZXlib2FyZDogdHJ1ZSwgc2hvdzogdHJ1ZX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL2xheWVyL3BsYWNldHlwZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXItbGVnZW5kLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixsZWdlbmRQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBMYXllckNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgdmlld3MgIDogbnVsbFxuICAgICAgICAsIHJvdXRlciA6IG51bGxcbiAgICAgICAgLCBtYXAgICAgOiBudWxsXG4gICAgICAgICwgY29udHJvbCA6IG51bGxcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LnZpZXdzID0gYXJncy52aWV3cztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IGFyZ3MubWFwY29uZmlnOyAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGxlZ2VuZFRlbXBsID0gXy50ZW1wbGF0ZShsZWdlbmRQYXJ0aWFsKTtcbiAgICAgICAgICAgIHZhciBsYXllck1hcmtlcnMgPSBfLmdyb3VwQnkodGhhdC52aWV3cywgZnVuY3Rpb24obWFya2VyVmlldyl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubW9kZWwuZ2V0R2VvanNvbigpLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBjb250cm9sID0gdGhhdC5jb250cm9sID0gTC5jb250cm9sLmxheWVycyhudWxsLCBudWxsLCB0aGF0Lm1hcGNvbmZpZy5jb250cm9sLmxheWVycy5vcHRpb25zKS5hZGRUbyh0aGF0Lm1hcCk7XG4gICAgICAgICAgICAvLyBkaXNhYmxlIG1vdXNlb3Zlci9tb3VzZW91dCBldmVudHMgZm9yIHRoaXMgY29udHJvbCwgd2hpY2ggYXJlIHNldCBieSBkZWZhdWx0IGluIFxuICAgICAgICAgICAgLy8gTGVhZmxldDsgZW5hYmxlcyAnY2xpY2snIGNvbnRyb2xcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjb250cm9sLmdldENvbnRhaW5lcigpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKE9iamVjdC5rZXlzKGNvbnRhaW5lciksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5tYXRjaCgnbW91c2VvdmVyJykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBjb250YWluZXJba2V5XSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5tYXRjaCgnbW91c2VvdXQnKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmVhY2goXy5rZXlzKGxheWVyTWFya2VycyksIGZ1bmN0aW9uKGxheWVyTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBrbGFzcyA9IGxheWVyTmFtZS5yZXBsYWNlKC9cXHMrL2csICctJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyTGVnZW5kID0gbGVnZW5kVGVtcGwoe1xuICAgICAgICAgICAgICAgICAgICAgIGljb25Vcmw6IGxheWVyTWFya2Vyc1tsYXllck5hbWVdWzBdLm1vZGVsLmdldCgnaWNvblVybCcpXG4gICAgICAgICAgICAgICAgICAgICwgdGl0bGUgIDogbGF5ZXJOYW1lXG4gICAgICAgICAgICAgICAgICAgICwga2xhc3MgIDoga2xhc3NcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyTGF5ZXJzID0gXy5tYXAobGF5ZXJNYXJrZXJzW2xheWVyTmFtZV0sIGZ1bmN0aW9uKHZpZXcpeyByZXR1cm4gdmlldy5tYXJrZXJMYXllcjsgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gTC5sYXllckdyb3VwKG1hcmtlckxheWVycyk7XG4gICAgICAgICAgICAgICAgY29udHJvbC5hZGRPdmVybGF5KGxheWVyLGxheWVyTGVnZW5kKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnaW5wdXQubGVhZmxldC1jb250cm9sLWxheWVycy1zZWxlY3RvcicpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICQoZWx0KS5jbGljaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250cm9sLm1hcExheWVyQ29udHJvbGxlciA9IHRoYXQ7XG4gICAgICAgICAgICBjb250cm9sLl9vbklucHV0Q2xpY2sgPSB0aGF0Ll9vbklucHV0Q2xpY2s7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBkbyBub3Qgb3ZlcnJpZGUgdGhpcyBwcml2YXRlIG1ldGhvZDsgc2FmZXIgdG8gcmVwbGFjZVxuICAgICAgICAvLyAgTC5jb250cm9sLmxheWVycygpIHdpdGggYSBjdXN0b20gY29udHJvbFxuICAgICAgICAsIF9vbklucHV0Q2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHNob3cgPSBbXSwgaGlkZSA9IFtdO1xuICAgIFx0XHR2YXIgaSwgaW5wdXQsIG9iaixcbiAgICBcdFx0ICAgIGlucHV0cyA9IGNvbnRyb2wuX2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JyksXG4gICAgXHRcdCAgICBpbnB1dHNMZW4gPSBpbnB1dHMubGVuZ3RoO1xuICAgIFx0XHRjb250cm9sLl9oYW5kbGluZ0NsaWNrID0gdHJ1ZTtcbiAgICBcdFx0Zm9yIChpID0gMDsgaSA8IGlucHV0c0xlbjsgaSsrKSB7XG4gICAgXHRcdFx0aW5wdXQgPSBpbnB1dHNbaV07XG4gICAgXHRcdFx0b2JqID0gY29udHJvbC5fbGF5ZXJzW2lucHV0LmxheWVySWRdOyAgICBcbiAgICBcdFx0XHRpZiAoaW5wdXQuY2hlY2tlZCkge1xuICAgIFx0XHRcdFx0b2JqLmxheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICBcdFx0XHRcdCAgICBzaG93LnB1c2gobGF5ZXIpO1xuICAgIFx0XHRcdCAgICB9KTtcbiAgICBcdFx0XHR9IGVsc2Uge1xuICAgIFx0XHRcdFx0b2JqLmxheWVyLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcbiAgICBcdFx0XHRcdCAgICBoaWRlLnB1c2gobGF5ZXIpO1xuICAgIFx0XHRcdCAgICB9KTtcbiAgICBcdFx0XHR9XG4gICAgXHRcdH1cbiAgICBcdFx0Y29udHJvbC5faGFuZGxpbmdDbGljayA9IGZhbHNlO1xuICAgIFx0XHRjb250cm9sLl9yZWZvY3VzT25NYXAoKTtcbiAgICBcdFx0Y29udHJvbC5tYXBMYXllckNvbnRyb2xsZXIuc2hvdyA9IHNob3c7XG4gICAgXHRcdGNvbnRyb2wubWFwTGF5ZXJDb250cm9sbGVyLmhpZGUgPSBoaWRlO1xuICAgIFx0XHRjb250cm9sLm1hcExheWVyQ29udHJvbGxlci50cmlnZ2VyKCdmaWx0ZXInKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBMYXllckNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllci90aW1lbGluZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndmlld3MvbWFwL2xheWVyL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixUaW1lbGluZVZpZXcsVGltZWxpbmVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFwVGltZWxpbmVDb250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcCAgICA6IG51bGxcbiAgICAgICAgLCBtb2RlbCAgOiBudWxsXG4gICAgICAgICwgdmlldyAgIDogbnVsbFxuICAgICAgICAsIHNpdGVjb25maWc6IG51bGxcbiAgICAgICAgLCBtYXJrZXJWaWV3czogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQudmlld3MgPSBhcmdzLnZpZXdzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBhcmdzLm1hcmtlclZpZXdzO1xuICAgICAgICAgICAgXy5mb3JFYWNoKGFyZ3MubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpe1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ3Nob3cnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnaGlkZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC5tb2RlbCA9IG5ldyBUaW1lbGluZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgIHNpdGVjb25maWcgIDogYXJncy5zaXRlY29uZmlnXG4gICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3cyA6IGFyZ3MubWFya2VyVmlld3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3ID0gbmV3IFRpbWVsaW5lVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbCA6IHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIG1hcCAgIDogdGhhdC5tYXBcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZXN1bHRzLmNsZWFyIGlzIGEgZmxhZyB0aGF0IHRoZSBicnVzaCBpcyBlbXB0eVxuICAgICAgICAgICAgLy8gcmVzdWx0cy5pbmNsIGlzIGFuIGFycmF5IG9mIE1hcFRpbWVsaW5lSXRlbSdzXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNob3cvaGlkZSBvbiBsaXN0cyBvZiBBcnRpY2xlTW9kZWwnc1xuICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdmaWx0ZXInLCB0aGF0Ll9oYW5kbGVGaWx0ZXJFdmVudCk7XG4gICAgICAgICAgICB0aGF0LnZpZXcucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaGFuZGxlRmlsdGVyRXZlbnQgOiBmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgc2hvd0xheWVycyA9IFtdLCBoaWRlTGF5ZXJzID0gW10sIHNob3dJZHMgPSB7fTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmNsZWFyKSB7XG4gICAgICAgICAgICAgICAgc2hvd0xheWVycyA9IF8ubWFwKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob3dMYXllcnMgPSBfLm1hcChyZXN1bHRzLnNlbGVjdGVkLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dJZHNbaXRlbS5tYXJrZXJWaWV3Lm1vZGVsLmNpZF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaGlkZUxheWVycyA9IF8ubWFwKF8uZmlsdGVyKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEobWFya2VyVmlldy5tb2RlbC5jaWQgaW4gc2hvd0lkcyk7XG4gICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtlclZpZXcubWFya2VyTGF5ZXI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0LnNob3cgPSBzaG93TGF5ZXJzO1xuICAgICAgICAgICAgdGhhdC5oaWRlID0gaGlkZUxheWVycztcbiAgICAgICAgICAgIHRoYXQudHJpZ2dlcignZmlsdGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBnZXRGaWx0ZXJTdGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIHNob3c6ICh0aGlzLnNob3cgfHwgW10pXG4gICAgICAgICAgICAgICAgLCBoaWRlOiAodGhpcy5oaWRlIHx8IFtdKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBUaW1lbGluZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvbWFwL2xheWVyL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy9tYXAvbGF5ZXIvdGltZWxpbmUvaXRlbSdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lQ29sbGVjdGlvbixUaW1lbGluZUl0ZW0sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgICBtYXJrZXJWaWV3czogbnVsbFxuICAgICAgICAsIHN0YXJ0OiBudWxsXG4gICAgICAgICwgZW5kOiBudWxsXG4gICAgICAgICwgc2l0ZWNvbmZpZyA6IG51bGxcbiAgICAgICAgLCBib29rY29uZmlnIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBhcmdzLm1hcmtlclZpZXdzO1xuICAgICAgICAgICAgdGhhdC5zaXRlY29uZmlnID0gYXJncy5zaXRlY29uZmlnO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5nZXRKU09OKHRoYXQuc2l0ZWNvbmZpZy5ib29rLmZpbGUsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LmJvb2tjb25maWcgPSBkYXRhLmJvb2s7XG4gICAgICAgICAgICAgICAgdGhhdC5faW5pdGlhbGl6ZSgpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9pbml0aWFsaXplIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gbmV3IFRpbWVsaW5lQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBtYXJrZXJWaWV3Lm1vZGVsO1xuICAgICAgICAgICAgICAgIHZhciBib29rQ2hhcHRlciA9IF8uZmluZFdoZXJlKHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywge1xuICAgICAgICAgICAgICAgICAgICAgIHBhcnQgICAgOiBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UucGFydFxuICAgICAgICAgICAgICAgICAgICAsIGNoYXB0ZXIgOiBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UuY2hhcHRlclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghYm9va0NoYXB0ZXIpIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBib29rQ2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICsgbW9kZWwuYXR0cmlidXRlcy5jaXRlZFJhbmdlLnBhcmFncmFwaDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gc3RhcnQgKyAxO1xuICAgICAgICAgICAgICAgIGNvbC5hZGQobmV3IFRpbWVsaW5lSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICwgZW5kOiBlbmRcbiAgICAgICAgICAgICAgICAgICAgLCBtYXJrZXJWaWV3OiBtYXJrZXJWaWV3XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnN0YXJ0ID0gXy5taW4odGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIH0pLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB0aGF0LmVuZCA9IF8ubWF4KHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXB0ZXIucGFyYWdyYXBocy5lbmQ7XG4gICAgICAgICAgICB9KS5wYXJhZ3JhcGhzLmVuZDtcbiAgICAgICAgfVxuICAgICAgICAsIGdldEl0ZW1zIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHM7XG4gICAgICAgIH1cbiAgICAgICAgLCB0aWNrVmFsdWVzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gXy5tYXAodGhpcy5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YWx1ZXMuc29ydChmdW5jdGlvbihhLGIpIHsgcmV0dXJuIGEtYjsgfSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgICwgdGlja0Zvcm1hdCA6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgaSxjaGFwdGVyO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcHRlciA9IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHAgPD0gY2hhcHRlci5wYXJhZ3JhcGhzLmVuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGNoYXB0ZXIuY2hhcHRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJsYW5rIHRpY2sgZm9yIGVuZCBvZiBib29rXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocCA9PT0gdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIjtcblxuICAgICAgICAgICAgXy5maW5kSW5kZXgodGhpcy5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5jaWQgPT09IHRpbWVsaW5lSXRlbS5jaWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWkpIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnY29sbGVjdGlvbicpLmdldChpKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKFRpbWVsaW5lTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFRpbWVsaW5lTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQoJy5nYWxsZXJ5LWl0ZW0nKS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGdhbGxlcnk6e1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZVNyYzogZnVuY3Rpb24oJGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9ICRpdGVtLmVsLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHBvID0gJCgnLnBvcG92ZXIuJyArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKGxpZ2h0Ym94VGl0bGVUZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiAkcG8uZmluZCgnLmF0dHInKS50ZXh0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5nbHlwaGljb24uZ2x5cGhpY29uLWV4cGFuZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoJ29wZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXBsKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9saWdodGJveC10aXRsZS5odG1sJ1xuICAgICwgJ3NsaWRlc2pzJ1xuICAgICwgJ2xpZ2h0Ym94J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHBvcG92ZXJUZW1wbCxwb3BvdmVyQ29udGVudFRlbXBsLGxpZ2h0Ym94VGl0bGVUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gY29uZmlndXJlIHNsaWRlc2pzOyB1cCB0byBub3csICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICAvLyBoYXMgYXBwbGllZFxuICAgICAgICAgICAgJChcIiNzbGlkZXNcIikuc2xpZGVzanMoe1xuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdDoge1xuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICBjcm9zc2ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG9uIGxvYWQgb2YgZmlyc3QgcGljXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIChudW1iZXIgLSAxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gKCQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKCkgLSAkaW1nLndpZHRoKCkpLzI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IHBhcnNlSW50KCRpbWcuY3NzKCdwYWRkaW5nLWxlZnQnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIHN0YXJ0IG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGVuZCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IG51bWJlciAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIG5ld0ltZyArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAvbGF5ZXIvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL3RpbWVsaW5lLmh0bWwnXG4gICAgLCAnY29udHJvbHMvTC5Db250cm9sLlRpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsdGltZWxpbmVDb250cm9sUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAndGltZWxpbmUnXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgfVxuICAgICAgICAsIF90aW1lbGluZUNvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9oYW5kbGVGaWx0ZXIoe2NsZWFyOnRydWV9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXIgOiBmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdmaWx0ZXInLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tb2RlbC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnRpbWVsaW5lID0gTC5jb250cm9sLnRpbWVsaW5lKHRoYXQubWFwLHRoYXQubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHsgb246IHsgYnJ1c2hlbmQ6IGZ1bmN0aW9uKGEpIHsgdGhhdC5faGFuZGxlRmlsdGVyKGEpOyB9fX1cbiAgICAgICAgICAgICAgICApLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFRpbWVsaW5lVmlldztcbn0pO1xuXG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcC9sYXllci90aW1lbGluZS9pdGVtJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUl0ZW1Nb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgICAgbWFya2VyVmlldzogbnVsbFxuICAgICAgICAsIHN0YXJ0OiBudWxsICAgICAgIC8vIFwiYWJzb2x1dGVcIiBzdGFydCAoaWUsIHBhcmFncmFwaCBpbmRleCB3L28gY2hhcHRlcilcbiAgICAgICAgLCBlbmQ6IG51bGwgICAgICAgICAvLyBcImFic29sdXRlXCIgZW5kXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3ID0gYXJncy5tYXJrZXJWaWV3O1xuICAgICAgICAgICAgdGhhdC5zdGFydCA9IGFyZ3Muc3RhcnQ7XG4gICAgICAgICAgICB0aGF0LmVuZCA9IGFyZ3MuZW5kO1xuICAgICAgICB9XG4gICAgICAgICwgZHVyYXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5kLXRoaXMuc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgLCBjb21wYXJlVG86IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgICAgIHJldHVybiBcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBUaW1lbGluZUl0ZW1Nb2RlbDtcbn0pO1xuIiwicmVxdWlyZS5jb25maWcoe1xuICBwYXRoczoge1xuICAgICAgYmFja2JvbmUgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2JhY2tib25lLmpzLzEuMS4yL2JhY2tib25lLW1pbidcbiAgICAsIGJvb3RzdHJhcCA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy90d2l0dGVyLWJvb3RzdHJhcC8zLjMuNS9qcy9ib290c3RyYXAubWluJ1xuICAgICwgZDMgICAgICAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2QzLzMuNS42L2QzLm1pbidcbiAgICAsIGpxdWVyeSAgICA6ICcvL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMi4xLjQubWluJ1xuICAgICwgbGVhZmxldCAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMC43LjMvbGVhZmxldCdcbiAgICAsIGxpZ2h0Ym94ICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tYWduaWZpYy1wb3B1cC5qcy8xLjAuMC9qcXVlcnkubWFnbmlmaWMtcG9wdXAubWluJ1xuICAgICwgc2xpZGVzanMgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3NsaWRlc2pzLzMuMC9qcXVlcnkuc2xpZGVzLm1pbidcbiAgICAsIHRleHQgICAgICA6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9yZXF1aXJlLXRleHQvMi4wLjEyL3RleHQubWluJ1xuICAgICwgdW5kZXJzY29yZTogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3VuZGVyc2NvcmUuanMvMS44LjMvdW5kZXJzY29yZS1taW4nXG4gICAgLCBwYXJ0aWFscyAgOiAnLi4vcGFydGlhbHMnXG4gICAgLCB4c2wgICAgICAgOiAnLi4vc2NyaXB0L3hzbCdcbiAgICAsIHBhZ2VzICAgICA6ICcuLi9wYWdlcydcbiAgfSxcbiAgc2hpbToge1xuICAgIGJvb3RzdHJhcDoge1xuICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH0sXG4gICAgYmFja2JvbmU6IHtcbiAgICAgICAgJ2RlcHMnOiBbJ2pxdWVyeScsICd1bmRlcnNjb3JlJ10sXG4gICAgICAgICdleHBvcnRzJzogJ0JhY2tib25lJ1xuICAgIH0sXG4gICAgdW5kZXJzY29yZToge1xuICAgICAgICAnZXhwb3J0cyc6ICdfJ1xuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgICAnZGVwcyc6IFtdXG4gICAgfSxcbiAgICBzbGlkZXNqczoge1xuICAgICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBsaWdodGJveDoge1xuICAgICAgZGVwczogWydqcXVlcnknXVxuICAgIH1cbiAgfVxufSk7XG5yZXF1aXJlKFtcbiAgICAnanF1ZXJ5JyxcbiAgICAnbW9kZWxzL2Vycm9yL3VzZXInLFxuICAgICd2aWV3cy9lcnJvci91c2VyJyxcbiAgICAncm91dGVzL3JvdXRlcicsXG4gICAgJ3ZpZXdzL2FwcCcsXG4gICAgJ2Jvb3RzdHJhcCdcbl0sIGZ1bmN0aW9uKCQsVXNlckVycm9yTW9kZWwsVXNlckVycm9yVmlldyxSb3V0ZXIsQXBwVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgY29uZmlnZmlsZSA9ICQoJyNtYWluJykuYXR0cignZGF0YS1jb25maWcnKTtcbiAgICBpZiAoY29uZmlnZmlsZSkge1xuICAgICAgICAkLmdldEpTT04oY29uZmlnZmlsZSwgZnVuY3Rpb24oc2l0ZWNvbmZpZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgQXBwVmlldygpO1xuICAgICAgICAgICAgICAgIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIHJvdXRlczogc2l0ZWNvbmZpZy5wYWdlcy5yb3V0ZXNcbiAgICAgICAgICAgICAgICAgICAgLCBjb25maWc6IHNpdGVjb25maWdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNpdGVjb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkZhaWxlZCB0byBsb2FkIHNpdGUgY29uZmlnIGZpbGUgJ1wiICsgY29uZmlnZmlsZSArIFwiJyBcIiArIGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICBtc2c6IFwiTm8gY29uZmlndXJhdGlvbiBmaWxlbmFtZSBzcGVjaWZpZWQgaW4gaG9tZSBwYWdlLlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
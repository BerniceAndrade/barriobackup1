define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/markers",["jquery","underscore","backbone","models/marker"],function(e,r,n,o){"use strict";var c=n.Collection.extend({model:o});return c});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/app",["jquery","underscore","backbone","routes/router","models/issue"],function(e,n,o,i,r){"use strict";var s=o.Model.extend({initialize:function(e){var n=new r({config:e.config});new i({routes:e.config.pages.routes,config:e.config,issue:n})}});return s});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl"],function(e,t,n,r,i,o,s){"use strict";var l=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,marker:null},select:function(){this.trigger("active")},unselect:function(){this.trigger("inactive")},geojson:function(){var e="{}";try{var t=this.get("xml"),n=this.xml2html(t,s,{},"text");e=JSON.parse(n)}catch(r){throw new Error("Failed to parse to json: "+r.toString())}return e}});return t.extend(l.prototype,r),t.extend(l.prototype,i),t.extend(l.prototype,o),l});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,i,n,c,l){"use strict";var r=i.Model.extend({initialize:function(i){var l=this;l.$def=e.Deferred();var r=i.config.articles.pathBase;r.match(/\/$/)||(r+="/");var a=i.config.articles.files,o=new c;l.config=i.config,l.set("collection",o);var s=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){s[t]=new n({articleid:t,articledir:r,path:r+e})});var f=t.map(s,function(e){return e.init()});e.when({},f).fail(function(){l.$def.reject()}),e.when.apply(null,f).done(function(){o.add(s),l.on("select",function(e){l._selectArticle(e)}),l.$def.resolve(l)}),e.when.apply(null,f).always(function(){t.forEach(f,function(e){"rejected"===e.state()&&l.$def.reject()}),l.$def.resolve(l)})},defaults:{activeArticle:null},_selectArticle:function(e){var t,i=this,n=i.get("collection");if("object"==typeof e)t=e;else{if("number"!=typeof e&&"string"!=typeof e)throw"Bad argument to models/issue";t=n.at(e)}(null===this.get("activeArticle")||this.get("activeArticle")!=e)&&(this.get("activeArticle")&&this.get("activeArticle").unselect(),i.set("activeArticle",t),t.init().done(function(){i.trigger("update",t),t.select()}))}});return t.extend(r.prototype,l),r});
define("models/map",["jquery","underscore","backbone","collections/markers","models/marker","mixins/asyncInit"],function(e,n,o,i,r,t){"use strict";var s=o.Model.extend({initialize:function(n){var o=this;if(o.$def=e.Deferred(),o.issue=n.issue,void 0===o.issue)throw new Error("Missing issue model in map model");if(o.set("router",n.router),!n.router)throw new Error("No router in MapModel");var i=e.Deferred();e.getJSON(n.config.map.config,function(e){o.set("mapconfig",e),i.resolve()}).fail(function(e,n,o){i.reject(),console.log("Failed to load map config file: "+o)}),e.when.apply({},[o.issue.init(),i]).done(function(){o._makeCollection(o.issue.get("collection").models,{success:function(){o.$def.resolve(o)},fail:function(){o.$def.reject()}})}).fail(function(){o.$def.reject()}).always(function(){o.$def.reject()})},defaults:{mapconfig:{}},_makeCollection:function(o,t){var s=this,c=[],f=new i;s.set("collection",f);var a=n.map(n.range(o.length),function(){return void 0}),u=!1,l="";o.forEach(function(n,o){var i=e.Deferred();c.push(i),n.init().done(function(){var e;try{e=new r({issue:s.issue,article:n,json:n.geojson(),router:s.router})}catch(t){return u=!0,l+="\n"+t.toString(),void i.resolve()}a[o]=e,i.resolve()})}),e.when.apply({},c).done(function(){if(f.add(a),u)throw new Error(l);t.success()}).fail(function(){t.fail()})}});return n.extend(s.prototype,t),s});
define("models/marker",["jquery","underscore","backbone"],function(e,i,t){"use strict";var r=t.Model.extend({article:null,json:{},initialize:function(e){var i=this;i.app=e.app,i.article=e.article,i.router=e.router,e.issue.init().done(function(e){i.listenTo(i.article,"active",function(){i.trigger("active")})})}});return r});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","views/issue","views/map","views/menu"],function(e,i,r,s,t,n,a,o,u){var g=r.Router.extend({pages:{},config:{},issue:null,initialize:function(e){var s=this;this.config=e.config,this.pages=e.config.pages,this.issue=e.issue,this.issue.init().done(function(){i.has(s.pages.router,"history")&&s.pages.router.history&&r.history.start()})},navigate:function(e,i){r.history.fragment!==e&&r.history.navigate(e,i)},page:function(e){var r,s=this;try{if(e||(e=this.pages.home),r=this.pages.pages[e],void 0===r)throw new Error("Missing config in router/page")}catch(t){return this.page("404")}(new n).render(),i.each(r,function(r){var t,n={config:s.config,issue:s.issue,router:s},a=JSON.parse(JSON.stringify(r));if(i.has(a,"view"))t=a.view;else{if(!i.has(a,"partial")){if(i.has(a,"full"))return void(window.location.href=a.full.page);throw new Error("Unsupported page type in router: "+e)}t="views/partial",a.partial.page=s.pages.pathBase+a.partial.page,n=i.extend(n,a.partial)}require([t],function(e){var i=new e(n);i.render()})})},article:function(i){e("#titlepage").remove();var r=this,s={config:r.config,issue:r.issue,router:r};if(0===e("#issue").length){var t=new a(s);t.render()}if(0===e("#map").length){var n=new o(s);n.render()}if(0===e("#menu").children().length){var g=new u(s);g.render()}r.issue.trigger("select",i)}});return g});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","mixins/domwatcher","mixins/xml2html","text!xsl/article.xsl","text!partials/popover.html","text!partials/popover-content.html","slidesjs"],function(e,t,i,s,r,o,a,n){"use strict";var l=i.View.extend({id:"article",initialize:function(e){var t=this;t.config=e.config},render:function(){var t=this;t.$el=e("#"+t.id);var i=this.xml2html(this.model.get("xml"),o,{"article-dir":t.config.articles.pathBase});try{e(".article-content").remove(),e("#"+this.id).append(i)}catch(s){console.log("article load error: "+s.toString())}if(0===e("img.slidesjs-slide").length)e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer");else try{t.postprocess()}catch(s){throw new Error("Failed to handle article images")}return t},remove:function(){},postprocess:function(){var i=this,s=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:s});var r=t.template(n);e("img.slidesjs-slide").each(function(t,i){var s=i.getAttribute("id"),o=e(".popover."+s).remove(),n=o.find(".head").text();e(i).attr("alt",o.find(".desc").text());var l=r({attr:o.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:n,template:a,trigger:"hover",placement:"left"})});var o=[];return i.$el.find("img.slidesjs-slide").each(function(t,i){var s=e.Deferred();e(i).load(function(){e(i).removeClass("remove"),s.resolve()}),e(i).error(function(){window.setTimeout(function(){s.reject()},500)}),o.push(s)}),e.when.apply({},o).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),e("#slides").slidesjs({navigation:{active:e("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:e("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(t){var i=e(".slidesjs-control").children(":eq("+(t-1)+")");i.css({visibility:"hidden"}),i.css({height:"auto",width:"auto",maxHeight:e(".slidesjs-container").height(),maxWidth:e(".slidesjs-container").width(),position:"relative"});var s=(e(".slidesjs-container").width()-i.width())/2;s-=parseInt(i.css("padding-left"),10),i.css({left:s}),i.css({visibility:"visible"})},start:function(t){e(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(t){var i=t-1,s=e(".slidesjs-control").children(":eq("+i+")");s.css({height:"auto",width:"auto",maxHeight:e(".slidesjs-container").height(),maxWidth:e(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}})}),i}});return t.extend(l.prototype,s),t.extend(l.prototype,r),l});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,o){"use strict";var r=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.model=e.issue,i.model.on("update",function(e){i.select(e)})},render:function(){this.$el.remove(),e("body").append(n)},select:function(e){var i=this,t=new o({model:e,config:i.model.config,issue:i,router:i.model.router});e.on("active",t.render,t),e.on("inactive",t.remove,t)}});return r});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","models/map","views/marker"],function(e,n,o,t,i,r,a){"use strict";var p=o.View.extend({id:"map",tagName:"div",initialize:function(e){var n=this;n.config=e.config,n.model=new r(e),n.router=e.router},render:function(){var n=this;e("#"+n.id).children().length>0||(e("body").append(i),this.model.init().done(function(){var e=n.model.get("collection"),o=n.model.get("mapconfig"),i=new t.Map(o.id,o.map),r={},a=function(e){return e.lat.toString()+e.lng.toString()};n.configureMap(i,o,r,a),i.invalidateSize(),window.setTimeout(function(){e.forEach(function(e){n.addMarkerToMap(e,i,r,a,o)})},n.config.map.markerDelay)}))},configureMap:function(e,n,o,i){var r=new t.TileLayer(n.tileLayer.url,n.tileLayer.opts),a=t.control.scale(n.scale);e.setView(new t.LatLng(n.view.lat,n.view.lng),n.view.zoom),e.addLayer(r),a.addTo(e),e.on("popupopen",function(e){o[i(e.popup.getLatLng())]=-1!=navigator.userAgent.indexOf("Firefox")?!0:!0}),e.on("popupclose",function(e){o[i(e.popup.getLatLng())]=-1!=navigator.userAgent.indexOf("Firefox")?!1:!1})},addMarkerToMap:function(e,n,o,i,r){var p=this,c=e.get("json"),u=new a({model:e,router:p.router});u.render(),t.geoJson(c,{onEachFeature:function(n,a){var c=t.popup(r.features.popup);c.setContent(u.el),a.bindPopup(c),a.removeEventListener("click"),a.on("click",function(){e.trigger("active")}),a.on("mouseover",function(){p.config.map.hoverPopup&&(o[i(a.getLatLng())]||a.openPopup())}),e.on("active",function(e){o[i(a.getLatLng())]||a.openPopup()}),o[i(a.getLatLng())]=!1},pointToLayer:function(e,n){return t.marker(n,{icon:t.icon(r.features.icon),clickable:!!e.properties.text,title:e.properties.markername||"",opacity:r.features.opacity,riseOnHover:r.features.riseOnHover})}}).addTo(n)}});return p});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html"],function(e,t,r,i){"use strict";var l=r.View.extend({template:t.template(i),el:"",router:null,initialize:function(e){var t=this;t.router=e.router,t.model.on("active",function(){var e="article/"+t.model.article.get("articleid");t.router.navigate(e,{trigger:!0}),t.model.get("issue").trigger("select",t.model.get("article"))})},render:function(){this.$el.html(this.template({articleid:this.model.article.get("articleid"),geojson:this.model.article.geojson()}))}});return l});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
require.config({paths:{text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",jquery:"//code.jquery.com/jquery-2.1.4.min",bootstrap:"//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","models/app","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var n=e("#main").attr("data-config");n?e.getJSON(n,function(e){try{{new a({model:new r({config:e})})}}catch(n){opts.config.debug||new o({model:new s({msg:n.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+n+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvbWFya2Vycy5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcHAuanMiLCJtb2RlbHMvYXJ0aWNsZS5qcyIsIm1vZGVscy9pc3N1ZS5qcyIsIm1vZGVscy9tYXAuanMiLCJtb2RlbHMvbWFya2VyLmpzIiwicm91dGVzL3JvdXRlci5qcyIsInZpZXdzL2FwcC5qcyIsInZpZXdzL2FydGljbGUuanMiLCJ2aWV3cy9jbGVhci5qcyIsInZpZXdzL2lzc3VlLmpzIiwidmlld3MvbWFwLmpzIiwidmlld3MvbWFya2VyLmpzIiwidmlld3MvbWVudS5qcyIsInZpZXdzL3BhZ2UuanMiLCJ2aWV3cy9wYXJ0aWFsLmpzIiwibW9kZWxzL2Vycm9yL3VzZXIuanMiLCJ2aWV3cy9hcnRpY2xlL21lbnUuanMiLCJ2aWV3cy9lcnJvci91c2VyLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCIkIiwiXyIsIkJhY2tib25lIiwiQXJ0aWNsZU1vZGVsIiwiQXJ0aWNsZXNDb2xsZWN0aW9uIiwiQ29sbGVjdGlvbiIsImV4dGVuZCIsIm1vZGVsIiwiTWFya2VyTW9kZWwiLCJNYXJrZXJzQ29sbGVjdGlvbiIsIkFzeW5jSW5pdCIsIiRkZWYiLCJpbml0IiwidGhpcyIsInByb21pc2UiLCJET01XYXRjaGVyIiwid2F0Y2hET00iLCJtcyIsInNlbCIsImxlbmd0aCIsImYiLCJkb2N1bWVudCIsImJvZHkiLCJvZmYiLCJyZXNvbHZlIiwib24iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwicmVqZWN0IiwiRmV0Y2hYTUwiLCJmZXRjaFhNTCIsInVybCIsIiRnZXQiLCJEZWZlcnJlZCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJYTUwySFRNTCIsIl9kb2MiLCJ4bWwiLCJ4bWxEb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJEb2N1bWVudCIsIkVycm9yIiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImVhY2giLCJrZXlzIiwia2V5Iiwic2V0UGFyYW1ldGVyIiwicmVzdWx0IiwiZG9jIiwidHJhbnNmb3JtVG9Eb2N1bWVudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJkb2N1bWVudEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImlubmVySFRNTCIsImUiLCJ0b1N0cmluZyIsIlJvdXRlciIsIklzc3VlTW9kZWwiLCJBcHBNb2RlbCIsIk1vZGVsIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJpc3N1ZSIsImNvbmZpZyIsInJvdXRlcyIsInBhZ2VzIiwiZ2VvSnNvblhzbCIsInRoYXQiLCJnZXQiLCJ3aGVuIiwiZG9uZSIsInNldCIsImZhaWwiLCJkZWZhdWx0cyIsIm1hcmtlciIsInNlbGVjdCIsInRyaWdnZXIiLCJ1bnNlbGVjdCIsImdlb2pzb24iLCJqc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwicHJvdG90eXBlIiwiQXJ0aWNsZUNvbGxlY3Rpb24iLCJhcmdzIiwiYXJ0ZGlyIiwiYXJ0aWNsZXMiLCJwYXRoQmFzZSIsIm1hdGNoIiwiZmlsZXMiLCJjb2wiLCJtYXAiLCJyYW5nZSIsInVuZGVmaW5lZCIsImZpbGUiLCJpIiwiYXJ0aWNsZWlkIiwiYXJ0aWNsZWRpciIsInBhdGgiLCJpbml0cyIsImFydGljbGUiLCJhcHBseSIsImFkZCIsIl9zZWxlY3RBcnRpY2xlIiwiYWx3YXlzIiwiZm9yRWFjaCIsIiRwcm9taXNlIiwic3RhdGUiLCJhY3RpdmVBcnRpY2xlIiwiYXJ0IiwiYXQiLCJNYXBNb2RlbCIsInJvdXRlciIsIiRjb25maWdEZWYiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiX21ha2VDb2xsZWN0aW9uIiwibW9kZWxzIiwibWFwY29uZmlnIiwiY2JzIiwiZGVmZXJyZWRzIiwibWFya2VycyIsImVycm9yTXNnIiwiJGFydERlZiIsInB1c2giLCJtbSIsImpzb24iLCJhcHAiLCJsaXN0ZW5UbyIsIlVzZXJFcnJvck1vZGVsIiwiVXNlckVycm9yVmlldyIsIkNsZWFyVmlldyIsIklzc3VlVmlldyIsIk1hcFZpZXciLCJNZW51VmlldyIsImhhcyIsImhpc3RvcnkiLCJzdGFydCIsIm5hdmlnYXRlIiwiZnJhZ21lbnQiLCJvcHRpb25zIiwicGFnZSIsInBhZ2VDb25maWciLCJob21lIiwicmVuZGVyIiwicGMiLCJ2aWV3TmFtZSIsImNvbmlmZyIsInN0cmluZ2lmeSIsInZpZXciLCJsb2NhdGlvbiIsImhyZWYiLCJmdWxsIiwicGFydGlhbCIsInJlcXVpcmUiLCJWaWV3IiwidiIsImlkIiwicmVtb3ZlIiwiaXN2IiwibXB2IiwiY2hpbGRyZW4iLCJtbnYiLCJBcHBWaWV3IiwiZWwiLCJyZXNpemUiLCJyZWxvYWQiLCJwb3BvdmVyVGVtcGwiLCJwb3BvdmVyQ29udGVudFRlbXAiLCJBcnRpY2xlVmlldyIsIiRlbCIsImh0bWwiLCJhcnRpY2xlLWRpciIsImFwcGVuZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJwb3N0cHJvY2VzcyIsImhlaWdodCIsIm91dGVySGVpZ2h0IiwiY3NzIiwicGN0IiwidGVtcGxhdGUiLCJlbHQiLCJnZXRBdHRyaWJ1dGUiLCIkcG8iLCJ0aXRsZSIsImZpbmQiLCJ0ZXh0IiwiYXR0ciIsImNvbnRlbnQiLCJwb3BvdmVyIiwiY29udGFpbmVyIiwicGxhY2VtZW50IiwiZGVmcyIsImltZyIsImxvYWQiLCJzbGlkZXNqcyIsIm5hdmlnYXRpb24iLCJhY3RpdmUiLCJlZmZlY3QiLCJwYWdpbmF0aW9uIiwiZmFkZSIsInNwZWVkIiwiY3Jvc3NmYWRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJudW1iZXIiLCIkaW1nIiwidmlzaWJpbGl0eSIsIndpZHRoIiwibWF4SGVpZ2h0IiwibWF4V2lkdGgiLCJwb3NpdGlvbiIsImxlZnQiLCJwYXJzZUludCIsImNvbXBsZXRlIiwibmV3SW1nIiwidG1wbCIsImVtcHR5IiwiYXYiLCJMIiwibWFwUGFydGlhbCIsIk1hcmtlclZpZXciLCJ0YWdOYW1lIiwiTWFwIiwib3BlbnBvcHVwIiwicG9wdXBpZCIsImxhdGxuZyIsImxhdCIsImxuZyIsImNvbmZpZ3VyZU1hcCIsImludmFsaWRhdGVTaXplIiwibWFya2VyTW9kZWwiLCJhZGRNYXJrZXJUb01hcCIsIm1hcmtlckRlbGF5IiwidGlsZWxheWVyIiwiVGlsZUxheWVyIiwidGlsZUxheWVyIiwic2NhbGUiLCJjb250cm9sIiwic2V0VmlldyIsIkxhdExuZyIsInpvb20iLCJhZGRMYXllciIsImFkZFRvIiwiZXZ0IiwicG9wdXAiLCJnZXRMYXRMbmciLCJtYXJrZXJWaWV3IiwiZ2VvSnNvbiIsIm9uRWFjaEZlYXR1cmUiLCJmZWF0dXJlIiwibWFwTWFya2VyIiwiZmVhdHVyZXMiLCJzZXRDb250ZW50IiwiYmluZFBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhvdmVyUG9wdXAiLCJvcGVuUG9wdXAiLCJhcnRpZCIsInBvaW50VG9MYXllciIsImljb24iLCJjbGlja2FibGUiLCJwcm9wZXJ0aWVzIiwibWFya2VybmFtZSIsIm9wYWNpdHkiLCJyaXNlT25Ib3ZlciIsIm1lbnVUbXBsIiwiQXJ0aWNsZU1lbnVWaWV3IiwiaXRlbXMiLCJtZW51IiwicHJvbWlzZXMiLCJ0ZW1wbGF0ZXMiLCJjb2xsZWN0aW9ucyIsIml0ZW0iLCJjb2xsZWN0aW9uIiwidGVtcGwiLCJzb3J0ZXIiLCJzdWJDb250ZW50Iiwic29ydEtleXMiLCJqIiwiJGxpIiwicmVwbGFjZSIsImFtdiIsIkVsZW1lbnQiLCJub2RlTmFtZSIsIm91dGVySFRNTCIsImNsb25lIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImxhYmVsIiwidGhlbiIsIiRmYWlsRGVmIiwiUGFnZVZpZXciLCJQYXJ0aWFsVmlldyIsIiR3YXRjaERlZiIsIm1zZyIsIm1lc3NhZ2UiLCJhbVhzbCIsIm1lbnVpdGVtIiwiYXR0cmlidXRlcyIsIm1vZGFsIiwia2V5Ym9hcmQiLCJzaG93IiwicGF0aHMiLCJqcXVlcnkiLCJib290c3RyYXAiLCJiYWNrYm9uZSIsInVuZGVyc2NvcmUiLCJsZWFmbGV0IiwicGFydGlhbHMiLCJzaGltIiwiZGVwcyIsImV4cG9ydHMiLCJjb25maWdmaWxlIiwic2l0ZWNvbmZpZyIsImRlYnVnIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBTyx3QkFDSCxTQUNBLGFBQ0EsV0FDQSxrQkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTQyxHQUNyQixZQUNBLElBQUlDLEdBQXFCRixFQUFTRyxXQUFXQyxRQUN6Q0MsTUFBT0osR0FFWCxPQUFPQztBQ1ZYTCxPQUFPLHVCQUNILFNBQ0EsYUFDQSxXQUNBLGlCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNNLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBb0JQLEVBQVNHLFdBQVdDLFFBQ3hDQyxNQUFPQyxHQUVYLE9BQU9DO0FDVlhWLE9BQU8sb0JBQ0gsU0FDQSxjQUNELFNBQVNDLEVBQUVDLEdBQ1YsWUFDQSxJQUFJUyxJQUNFQyxLQUFNLEtBQ05DLEtBQU0sV0FDSixNQUFPQyxNQUFLRixLQUFLRyxXQUd6QixPQUFPSjtBQ1hYWCxPQUFPLHFCQUNILFVBQ0QsU0FBU0MsR0FDUixZQUNBLElBQUllLElBQ0FDLFNBQVcsU0FBU0MsRUFBR0MsRUFBSVAsR0FDdkIsSUFBS08sRUFBSyxLQUFNLDhCQUNoQixJQUFzQixJQUFsQmxCLEVBQUVrQixHQUFLQyxPQUFjLENBQ3JCLEdBQUlDLEdBQUksV0FDQXBCLEVBQUVrQixHQUFLQyxPQUFTLElBQ2hCbkIsRUFBRXFCLFNBQVNDLE1BQU1DLElBQUksa0JBQW1C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QUFTa04sS0FBSyxjQUM3QmdJLEdBQ0FsVixFQUFFc0ksUUFBUTRNLEVBQVksU0FBU0MsR0FDM0IsSUFDSSxDQUFVLEdBQUkxSixJQUNWbEwsTUFBTyxHQUFLdUUsSUFBVUssT0FBUWdRLE9BRXBDLE1BQU96USxHQUNBTyxLQUFLRSxPQUFPaVEsT0FDYixHQUFJNUwsSUFDQWpKLE1BQU8sR0FBSWdKLElBQ1B5SyxJQUFLdFAsRUFBRUMsa0JBS3hCaUIsS0FBSyxTQUFTMkMsRUFBTzlGLEVBQVlGLEdBQ2hDLEdBQUlpSCxJQUNBakosTUFBTyxHQUFJZ0osSUFDUHlLLElBQUssb0NBQXNDa0IsRUFBYSxLQUFPM1MsUUFLM0UsR0FBSWlILElBQ0FqSixNQUFPLEdBQUlnSixJQUNQeUssSUFBSyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL2FydGljbGVzJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy9hcnRpY2xlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZXNDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgICAgICBtb2RlbDogQXJ0aWNsZU1vZGVsXG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBBcnRpY2xlc0NvbGxlY3Rpb247XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdjb2xsZWN0aW9ucy9tYXJrZXJzJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL21hcmtlcidcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxNYXJrZXJNb2RlbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFya2Vyc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBNYXJrZXJNb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gTWFya2Vyc0NvbGxlY3Rpb247XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvYXN5bmNJbml0JywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBc3luY0luaXQgPSB7XG4gICAgICAgICAgJGRlZjogbnVsbFxuICAgICAgICAsIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRlZi5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY0luaXQ7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZG9td2F0Y2hlcicsIFtcbiAgICAnanF1ZXJ5JyBcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIERPTVdhdGNoZXIgPSB7XG4gICAgICAgIHdhdGNoRE9NIDogZnVuY3Rpb24obXMsc2VsLCRkZWYpIHtcbiAgICAgICAgICAgIGlmICghc2VsKSB0aHJvdyBcIkVtcHR5IHNlbGVjdG9yIGluIHdhdGNoRE9NKClcIjtcbiAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRE9NV2F0Y2hlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9mZXRjaHhtbCcsIFtcbiAgICAnanF1ZXJ5J1xuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRmV0Y2hYTUwgPSB7XG4gICAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBQcm9taXNlIGludGVyZmFjZVxuICAgICAgICAvLyB3aGVuIHN1Y2Nlc3NmdWwsIHRoZSBQcm9taXNlIHJldHVybnMgdGhlIGRhdGEgZmV0Y2hlZFxuICAgICAgICAvLyBieSB0aGUgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaXMgYSBEb2N1bWVudFxuICAgICAgICBmZXRjaFhNTCA6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgdmFyICRnZXQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAneG1sJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICRnZXQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJGdldC5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGZXRjaFhNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy94bWwyaHRtbCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgWE1MMkhUTUwgPSB7XG4gICAgICAgIF9kb2M6IGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgdmFyIHhtbERvYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4bWwgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IHhtbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGRvY3VtZW50IGlucHV0IGluIFhNTDJIVE1MXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhtbERvYyA9PSBudWxsIHx8ICgheG1sRG9jLmhhc093blByb3BlcnR5KCdnZXRFbGVtZW50c0J5VGFnTmFtZScpICYmIHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCBpbiB4bWwyaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHJldHVybiBIVE1MIG9yIEpTT04gc3RyaW5nIGZyb20gWFNMVCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICB4bWwyaHRtbDogZnVuY3Rpb24oeG1sLHhzbCxwYXJhbXMsbW9kZSkge1xuICAgICAgICAgICAgdmFyIHhtbERvYyA9IHRoaXMuX2RvYyh4bWwpLFxuICAgICAgICAgICAgICAgIHhzbERvYyA9IHRoaXMuX2RvYyh4c2wpO1xuICAgICAgICAgICAgdmFyIHhzbHRQcm9jZXNzb3IgPSBuZXcgWFNMVFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5pbXBvcnRTdHlsZXNoZWV0KHhzbERvYyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHBhcmFtcyksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHhzbHRQcm9jZXNzb3Iuc2V0UGFyYW1ldGVyKG51bGwsa2V5LHBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB4c2x0UHJvY2Vzc29yLnRyYW5zZm9ybVRvRG9jdW1lbnQoeG1sRG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy88dHJhbnNmb3JtaWl4OnJlc3VsdD4uLi48L3RyYW5zZm9ybWlpeDpyZXN1bHQ+XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9IGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluIFhTTFQgdHJhbnNmb3JtOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBYTUwySFRNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9hcHAnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZScsXG4gICAgJ3JvdXRlcy9yb3V0ZXInLFxuICAgICdtb2RlbHMvaXNzdWUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsUm91dGVyLElzc3VlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFwcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIGlzc3VlID0gbmV3IElzc3VlTW9kZWwoeyBjb25maWc6IG9wdHMuY29uZmlnIH0pO1xuICAgICAgICAgICAgbmV3IFJvdXRlcih7XG4gICAgICAgICAgICAgICAgICByb3V0ZXM6IG9wdHMuY29uZmlnLnBhZ2VzLnJvdXRlc1xuICAgICAgICAgICAgICAgICwgY29uZmlnOiBvcHRzLmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICBpc3N1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXBwTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvYXJ0aWNsZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvZmV0Y2h4bWwnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdtaXhpbnMveG1sMmh0bWwnXG4gICAgLCAndGV4dCF4c2wvZ2VvanNvbi54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRmV0Y2hYTUwsQXN5bmNJbml0LFhNTDJIVE1MLGdlb0pzb25Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdmFyICRnZXQgPSB0aGF0LmZldGNoWE1MKHRoYXQuZ2V0KCdwYXRoJykpO1xuICAgICAgICAgICAgJC53aGVuKCRnZXQpLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0KCd4bWwnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICAvL1RPRE86ICd4bWwnOiBzZXJpYWxpemU/IGFuZCBjYWNoZSB0byBsb2NhbHN0b3JhZ2VcbiAgICAgICAgICAgIC8vIGFkZCBhZGFwdGVyIGZvciBhY2Nlc3MgdGhyb3VnaCAuYXR0cmlidXRlc1xuICAgICAgICAgICAgXCJ4bWxcIiAgIDogbnVsbCwgICAgIC8vIERvY3VtZW50XG4gICAgICAgICAgICBcIm1hcmtlclwiIDogbnVsbCAgICAgLy8gYXNzb2NpYXRlZCBtYXBtYXJrZXIgb2JqZWN0LCBuZWVkZWQgZm9yIFRPQyBsaW5rYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2FjdGl2ZScpO1xuICAgICAgICB9LFxuICAgICAgICB1bnNlbGVjdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2luYWN0aXZlJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGdlb2pzb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGdlb2pzb24gPSAne30nO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeG1sID0gdGhpcy5nZXQoJ3htbCcpO1xuICAgICAgICAgICAgICAgIHZhciBqc29uU3RyaW5nID0gdGhpcy54bWwyaHRtbCh4bWwsIGdlb0pzb25Yc2wsIHt9LCAndGV4dCcpO1xuICAgICAgICAgICAgICAgIGdlb2pzb24gPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSB0byBqc29uOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2VvanNvbjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsRmV0Y2hYTUwpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21vZGVscy9hcnRpY2xlJ1xuICAgICwgJ2NvbGxlY3Rpb25zL2FydGljbGVzJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsLEFydGljbGVDb2xsZWN0aW9uLEFzeW5jSW5pdCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgSXNzdWVNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiAgID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdmFyIGFydGRpciAgPSBhcmdzLmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZTtcbiAgICAgICAgICAgIGlmICghYXJ0ZGlyLm1hdGNoKC9cXC8kLykpIGFydGRpciArPSAnLyc7XG4gICAgICAgICAgICB2YXIgZmlsZXMgICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLmZpbGVzO1xuICAgICAgICAgICAgdmFyIGNvbCAgICAgPSBuZXcgQXJ0aWNsZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICAvLyBmaXggbGVuZ3RoIG9mIGFydGljbGVzIGFycmF5XG4gICAgICAgICAgICB2YXIgYXJ0aWNsZXMgPSBfLm1hcChfLnJhbmdlKGZpbGVzLmxlbmd0aCksIGZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZDt9KTtcbiAgICAgICAgICAgIC8vIGFydGljbGVzIGNvbnN0cnVjdGVkIHN5bmMsIHNvIGFydGljbGUgb2JqZWN0cyBhZGRlZCB0byBsaXN0IGJ5IGluZGV4XG4gICAgICAgICAgICBfLmVhY2goZmlsZXMsIGZ1bmN0aW9uKGZpbGUsaSkge1xuICAgICAgICAgICAgICAgIGFydGljbGVzW2ldID0gbmV3IEFydGljbGVNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVpZDogIGksXG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVkaXI6IGFydGRpcixcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogICAgICAgYXJ0ZGlyICsgZmlsZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciBpbml0cyA9IF8ubWFwKGFydGljbGVzLCBmdW5jdGlvbihhcnRpY2xlKXtyZXR1cm4gYXJ0aWNsZS5pbml0KCk7fSk7XG4gICAgICAgICAgICAvLyBOT1RFOiAuZmFpbCgpIGlzIG5vdCBjYWxsZWQ7IGZhaWx1cmUgaXMgaGFuZGxlZCBpbiAuYWx3YXlzKClcbiAgICAgICAgICAgICQud2hlbih7fSxpbml0cykuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLGluaXRzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbC5hZGQoYXJ0aWNsZXMpO1xuICAgICAgICAgICAgICAgIHRoYXQub24oJ3NlbGVjdCcsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fc2VsZWN0QXJ0aWNsZShhcnRpY2xlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsaW5pdHMpLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaW5pdHMsIGZ1bmN0aW9uKCRwcm9taXNlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwcm9taXNlLnN0YXRlKCkgPT09ICdyZWplY3RlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwiYWN0aXZlQXJ0aWNsZVwiIDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICAvLyBzaG93IGFuIGFydGljbGUgYW5kIHRoZSBjb3JyZXNwb25kaW5nIHBpblxuICAgICAgICAvLyBhcnRpY2xlIG1heSBiZSBlaXRoZXIgYW4gaW5kZXggaW50byB0aGUgY29sbGVjdGlvblxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBwcm92aWRlZCBieSBhIHVybCkgb3IgYW4gQXJ0aWNsZU1vZGVsXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHNlbGVjdGVkIGJ5IGEgbWFwIG1hcmtlcilcbiAgICAgICAgX3NlbGVjdEFydGljbGU6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGF0LmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgdmFyIGFydDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJ0aWNsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBhcnRpY2xlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJ0aWNsZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFydGljbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYXJ0ID0gY29sLmF0KGFydGljbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIkJhZCBhcmd1bWVudCB0byBtb2RlbHMvaXNzdWVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGF2b2lkIHVuLSBhbmQgcmUtcmVuZGVyaW5nIGFuIGFscmVhZHktdmlld2VkIGFydGljbGVcbiAgICAgICAgICAgIGlmICgodGhpcy5nZXQoJ2FjdGl2ZUFydGljbGUnKSAhPT0gbnVsbCkgJiZcbiAgICAgICAgICAgICAgICAodGhpcy5nZXQoJ2FjdGl2ZUFydGljbGUnKSA9PSAgYXJ0aWNsZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoJ2FjdGl2ZUFydGljbGUnKSkgdGhpcy5nZXQoJ2FjdGl2ZUFydGljbGUnKS51bnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdhY3RpdmVBcnRpY2xlJywgYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMgaW52b2x2ZXMgYXN5bmMgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgIGFydC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ3VwZGF0ZScsIGFydCk7XG4gICAgICAgICAgICAgICAgYXJ0LnNlbGVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChJc3N1ZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZU1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb2xsZWN0aW9ucy9tYXJrZXJzJ1xuICAgICwgJ21vZGVscy9tYXJrZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxNYXJrZXJzQ29sbGVjdGlvbixNYXJrZXJNb2RlbCxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlICA9IGFyZ3MuaXNzdWU7XG4gICAgICAgICAgICBpZiAodGhhdC5pc3N1ZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgaXNzdWUgbW9kZWwgaW4gbWFwIG1vZGVsJyk7XG4gICAgICAgICAgICB0aGF0LnNldCgncm91dGVyJywgYXJncy5yb3V0ZXIpO1xuICAgICAgICAgICAgaWYgKCFhcmdzLnJvdXRlcikgdGhyb3cgbmV3IEVycm9yKCdObyByb3V0ZXIgaW4gTWFwTW9kZWwnKTtcbiAgICAgICAgICAgIHZhciAkY29uZmlnRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5nZXRKU09OKGFyZ3MuY29uZmlnLm1hcC5jb25maWcsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgnbWFwY29uZmlnJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgJGNvbmZpZ0RlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICRjb25maWdEZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBsb2FkIG1hcCBjb25maWcgZmlsZTogJyArIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LFt0aGF0Lmlzc3VlLmluaXQoKSwgJGNvbmZpZ0RlZl0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5fbWFrZUNvbGxlY3Rpb24odGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKS5tb2RlbHMsIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oKSB7IHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpOyB9LFxuICAgICAgICAgICAgICAgICAgICBmYWlsOiAgICBmdW5jdGlvbigpIHsgdGhhdC4kZGVmLnJlamVjdCgpOyAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFRPRE86IGlzc3VlIGFzIHRvIHdoZXRoZXIgZmFpbCgpL2Fsd2F5cygpIGlzIGNhbGxlZCBvbiBmYWlsdXJlIGhlcmU7XG4gICAgICAgICAgICAvLyBmYWlsKCkgc2hvdWxkIGJlIGNhbGxlZCBvbiBmYWx1cmVcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1hcGNvbmZpZ1wiICAgICA6IHt9XG4gICAgICAgIH0sXG4gICAgICAgIF9tYWtlQ29sbGVjdGlvbiA6IGZ1bmN0aW9uKGFydGljbGVzLGNicykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGRlZmVycmVkcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNvbCA9IG5ldyBNYXJrZXJzQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgdmFyIG1hcmtlcnMgPSBfLm1hcChfLnJhbmdlKGFydGljbGVzLmxlbmd0aCksIGZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZDt9KTtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGVycm9yTXNnID0gJyc7XG4gICAgICAgICAgICBhcnRpY2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGFydGljbGUsaSl7XG4gICAgICAgICAgICAgICAgdmFyICRhcnREZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWRzLnB1c2goJGFydERlZik7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZS5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1tO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW0gPSBuZXcgTWFya2VyTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWUgICAgIDogdGhhdC5pc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYXJ0aWNsZSAgIDogYXJ0aWNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwganNvbiAgICAgIDogYXJ0aWNsZS5nZW9qc29uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHJvdXRlciAgICA6IHRoYXQucm91dGVyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gZmFpbHVyZSB0byBjcmVhdGUgZ2VvanNvbiBmcm9tIGFydGljbGUsIHdhcm5cbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGRvIG5vdCBibG9jayBtYXBcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNc2cgKz0gKFwiXFxuXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFydERlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnNbaV0gPSBtbTtcbiAgICAgICAgICAgICAgICAgICAgJGFydERlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxkZWZlcnJlZHMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY29sLmFkZChtYXJrZXJzKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihlcnJvck1zZyk7XG4gICAgICAgICAgICAgICAgY2JzLnN1Y2Nlc3MoKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgY2JzLmZhaWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL21hcmtlcicsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIFwiYXJ0aWNsZVwiICAgOiBudWxsLFxuICAgICAgICBcImpzb25cIiAgICAgIDoge30sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuYXBwID0gYXJncy5hcHA7XG4gICAgICAgICAgICB0aGF0LmFydGljbGUgPSBhcmdzLmFydGljbGU7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICAgICAgYXJncy5pc3N1ZS5pbml0KCkuZG9uZShmdW5jdGlvbihpc3N1ZSkge1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gYW4gYXJ0aWNsZSBpcyBtYWRlIGFjdGl2ZSAoZS5nLiwgdGhyb3VnaCB0aGVcbiAgICAgICAgICAgICAgICAvLyBUT0MpLCBwcm9wb2dhdGUgdGhyb3VnaCB0byB0aGUgbWFwIHBhcnQgb2YgdGhlIGFwcFxuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8odGhhdC5hcnRpY2xlLCAnYWN0aXZlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQudHJpZ2dlcignYWN0aXZlJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcmtlck1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgncm91dGVzL3JvdXRlcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9lcnJvci91c2VyJ1xuICAgICwgJ3ZpZXdzL2NsZWFyJ1xuICAgICwgJ3ZpZXdzL2lzc3VlJ1xuICAgICwgJ3ZpZXdzL21hcCdcbiAgICAsICd2aWV3cy9tZW51J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsQ2xlYXJWaWV3LElzc3VlVmlldyxNYXBWaWV3LE1lbnVWaWV3KSB7XG4gICAgLy8ndXNlIHN0cmljdCc7XG4gICAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xuICAgICAgICBwYWdlcyAgIDoge30sICAgLy8gY29uZmlnIGZvciBzdXBwb3J0ZWQgcGFnZXNcbiAgICAgICAgY29uZmlnICA6IHt9LCAgIC8vIGdsb2JhbCBzaXRlIGNvbmZpZ3VyYXRpb24sIGkuZS4sIHNpdGUuanNvblxuICAgICAgICBpc3N1ZSAgIDogbnVsbCwgLy8gSXNzdWVNb2RlbCBmb3IgdGhpcyBhcHBcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSBvcHRzLmNvbmZpZztcbiAgICAgICAgICAgIHRoaXMucGFnZXMgID0gb3B0cy5jb25maWcucGFnZXM7XG4gICAgICAgICAgICB0aGlzLmlzc3VlICA9IG9wdHMuaXNzdWU7XG4gICAgICAgICAgICB0aGlzLmlzc3VlLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIHBhZ2VzLnJvdXRlci5oaXN0b3J5ID0gdHJ1ZSBieSBkZWZhdWx0LCBpZiBtaXNzaW5nXG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKHRoYXQucGFnZXMucm91dGVyLCdoaXN0b3J5JykgJiYgISF0aGF0LnBhZ2VzLnJvdXRlci5oaXN0b3J5KSB7XG4gICAgICAgICAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChCYWNrYm9uZS5oaXN0b3J5LmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCxvcHRpb25zKTtcbiAgICAgICAgfSxcbiAgICAgICAgcGFnZTogZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHBhZ2VDb25maWc7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghcGFnZSkgcGFnZSA9IHRoaXMucGFnZXMuaG9tZTtcbiAgICAgICAgICAgICAgICBwYWdlQ29uZmlnID0gdGhpcy5wYWdlcy5wYWdlc1twYWdlXTtcbiAgICAgICAgICAgICAgICBpZiAocGFnZUNvbmZpZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY29uZmlnIGluIHJvdXRlci9wYWdlJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFnZSgnNDA0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjbGVhciB0aGUgPGJvZHk+XG4gICAgICAgICAgICAobmV3IENsZWFyVmlldygpKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIF8uZWFjaChwYWdlQ29uZmlnLCBmdW5jdGlvbihwYykge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3TmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlXG4gICAgICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBjbG9uZSBjb25maWcgdG8gYXZvaWQgZ2xvYmFsIGNoYW5nZXNcbiAgICAgICAgICAgICAgICB2YXIgY29uaWZnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYykpO1xuICAgICAgICAgICAgICAgIGlmIChfLmhhcyhjb25pZmcsICd2aWV3JykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSBjb25pZmcudmlldztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmlmZywgJ3BhcnRpYWwnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9ICd2aWV3cy9wYXJ0aWFsJztcbiAgICAgICAgICAgICAgICAgICAgY29uaWZnLnBhcnRpYWwucGFnZSA9IHRoYXQucGFnZXMucGF0aEJhc2UgKyBjb25pZmcucGFydGlhbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gXy5leHRlbmQoYXJncyxjb25pZmcucGFydGlhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25pZmcsICdmdWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb25pZmcuZnVsbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBwYWdlIHR5cGUgaW4gcm91dGVyOiAnICsgcGFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcXVpcmUoW3ZpZXdOYW1lXSwgZnVuY3Rpb24oVmlldykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBWaWV3KGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB2LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFydGljbGUgOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgJCgnI3RpdGxlcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICgkKCcjaXNzdWUnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgaXN2ID0gbmV3IElzc3VlVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICBpc3YucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21hcCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBtcHYgPSBuZXcgTWFwVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICBtcHYucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBtbnYgPSBuZXcgTWVudVZpZXcoYXJncyk7XG4gICAgICAgICAgICAgICAgbW52LnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC5pc3N1ZS50cmlnZ2VyKCdzZWxlY3QnLCBpZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUm91dGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgndmlld3MvYXBwJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIHNpZ25hbCA9IHt9O1xuICAgIHZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcHBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMvZG9td2F0Y2hlcicsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUueHNsJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wb3BvdmVyLmh0bWwnLFxuICAgICd0ZXh0IXBhcnRpYWxzL3BvcG92ZXItY29udGVudC5odG1sJyxcbiAgICAnc2xpZGVzanMnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixYTUwySFRNTCx4c2wscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGlkOiAnYXJ0aWNsZScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZWwgPSAkKCcjJyArIHRoYXQuaWQpO1xuICAgICAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnhtbDJodG1sKFxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuZ2V0KCd4bWwnKSxcbiAgICAgICAgICAgICAgICB4c2wsXG4gICAgICAgICAgICAgICAge1wiYXJ0aWNsZS1kaXJcIjogdGhhdC5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2V9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAkKCcuYXJ0aWNsZS1jb250ZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnIycrdGhpcy5pZCkuYXBwZW5kKGh0bWwpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXJ0aWNsZSBsb2FkIGVycm9yOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJyNmb290ZXInKS5yZW1vdmUoKVxuICAgICAgICAgICAgICAgICQoJ2FydGljbGUnKS5yZW1vdmVDbGFzcygnYmVmb3JlLWZvb3RlcicpLmFkZENsYXNzKCduby1mb290ZXInKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wb3N0cHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGhhbmRsZSBhcnRpY2xlIGltYWdlc1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfSxcbiAgICAgICAgcG9zdHByb2Nlc3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRqdXN0IGhlaWdodCBvZiBhcnRpY2xlIGJvZHlcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBpbiBjc3NcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjYXJ0aWNsZSBhcnRpY2xlJykuaGVpZ2h0KCkgLSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAkKCcjYm9keScpLmNzcyh7aGVpZ2h0OmhlaWdodH0pO1xuICAgICAgICAgICAgLy8gYWRkIHBvcG92ZXJzIHRvIGltYWdlc1xuICAgICAgICAgICAgdmFyIHBjdCA9IF8udGVtcGxhdGUocG9wb3ZlckNvbnRlbnRUZW1wKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpbWFnZXMgdGhhdCBmYWlsIHRvIGxvYWQsIHNpbmNlIHdlIGNhbm5vdCBkb1xuICAgICAgICAgICAgLy8gYSBmaWxlIHRlc3Qgd2hlbiBydW5uaW5nIHRoZSB4c2xcbiAgICAgICAgICAgIHZhciBkZWZzID0gW107XG4gICAgICAgICAgICB0aGF0LiRlbC5maW5kKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKGksaW1nKXtcbiAgICAgICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkKGltZykubG9hZChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkKGltZykucmVtb3ZlQ2xhc3MoJ3JlbW92ZScpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkKGltZykuZXJyb3IoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3cgc29tZSB0aW1lIGJlZm9yZSBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9LDUwMCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGVmcy5wdXNoKCRkZWYpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sZGVmcykuYWx3YXlzKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlLnJlbW92ZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICQoJy5pbWFnZS1sb2FkaW5nJykucmVtb3ZlQ2xhc3MoJ2ltYWdlLWxvYWRpbmcnKTtcbiAgICAgICAgICAgICAgICAvLyBjb25maWd1cmUgc2xpZGVzanM7IHVwIHRvIG5vdywgJ2Rpc3BsYXk6bm9uZSdcbiAgICAgICAgICAgICAgICAvLyBoYXMgYXBwbGllZFxuICAgICAgICAgICAgICAgICQoXCIjc2xpZGVzXCIpLnNsaWRlc2pzKHtcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IFwiZmFkZVwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogKCQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhZGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NmYWRlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgb24gbG9hZCBvZiBmaXJzdCBwaWNcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oJzplcSgnKyAobnVtYmVyIC0gMSkgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHt2aXNpYmlsaXR5OiBcImhpZGRlblwifSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4V2lkdGg6ICAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVmdCA9ICgkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS53aWR0aCgpIC0gJGltZy53aWR0aCgpKS8yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgLT0gcGFyc2VJbnQoJGltZy5jc3MoJ3BhZGRpbmctbGVmdCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIHN0YXJ0IG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbigpLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBlbmQgb2YgY2hhbmdlIG9mIHBpYyAoYWZ0ZXIgZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IG51bWJlciAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRpbWcgPSAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oJzplcSgnKyBuZXdJbWcgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0OiAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVWaWV3LnByb3RvdHlwZSxET01XYXRjaGVyKTtcbiAgICBfLmV4dGVuZChBcnRpY2xlVmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvY2xlYXInLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBDbGVhclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdib2R5JykuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDbGVhclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaXNzdWUuaHRtbCdcbiAgICAsICd2aWV3cy9hcnRpY2xlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwsQXJ0aWNsZVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICAgICAgICAgJyNpc3N1ZScsXG4gICAgICAgIHRlbXBsYXRlOiAgIF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgdGhhdC5tb2RlbC5vbigndXBkYXRlJywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2VsZWN0KGFydGljbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRtcGwpO1xuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhdiA9IG5ldyBBcnRpY2xlVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIGFydGljbGVcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogdGhhdC5tb2RlbC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdFxuICAgICAgICAgICAgICAgICwgcm91dGVyOiB0aGF0Lm1vZGVsLnJvdXRlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcnRpY2xlLm9uKCdhY3RpdmUnLCAgIGF2LnJlbmRlciwgYXYpO1xuICAgICAgICAgICAgYXJ0aWNsZS5vbignaW5hY3RpdmUnLCBhdi5yZW1vdmUsIGF2KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBJc3N1ZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdsZWFmbGV0J1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWFwLmh0bWwnXG4gICAgLCAnbW9kZWxzL21hcCdcbiAgICAsICd2aWV3cy9tYXJrZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCxtYXBQYXJ0aWFsLE1hcE1vZGVsLE1hcmtlclZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGlkOiAgICAgICdtYXAnLFxuICAgICAgICB0YWdOYW1lOiAnZGl2JyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgTWFwTW9kZWwoYXJncyk7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICB9XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGF0LmlkKS5jaGlsZHJlbigpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICAgIC8vIHB1dCBkaXYjbWFwIGluIHBsYWNlXG4gICAgICAgICAgICAvLyBub3RlOiBtYXAuanNvbiBoYXMgdGhlIEBpZCB2YWx1ZToge1wiaWRcIiA6IFwibWFwXCJ9XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG1hcFBhcnRpYWwpO1xuICAgICAgICAgICAgLy8gTGVhZmxldCBjb25maWdcbiAgICAgICAgICAgIHRoaXMubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCAgICAgICA9IHRoYXQubW9kZWwuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcGNvbmZpZyA9IHRoYXQubW9kZWwuZ2V0KCdtYXBjb25maWcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbWFwICAgICAgID0gbmV3IEwuTWFwKG1hcGNvbmZpZy5pZCwgbWFwY29uZmlnLm1hcCk7XG4gICAgICAgICAgICAgICAgdmFyIG9wZW5wb3B1cCA9IHt9O1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cGlkID0gZnVuY3Rpb24obGF0bG5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXRsbmcubGF0LnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgICArIGxhdGxuZy5sbmcudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhhdC5jb25maWd1cmVNYXAobWFwLG1hcGNvbmZpZyxvcGVucG9wdXAscG9wdXBpZCk7XG4gICAgICAgICAgICAgICAgLy8gbGV0IG1hcCByZW5kZXIgd2hpbGUgbWFya2VycyBhcmUgYWRkZWRcbiAgICAgICAgICAgICAgICBtYXAuaW52YWxpZGF0ZVNpemUoKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sLmZvckVhY2goZnVuY3Rpb24obWFya2VyTW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYWRkTWFya2VyVG9NYXAobWFya2VyTW9kZWwsbWFwLG9wZW5wb3B1cCxwb3B1cGlkLG1hcGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSwgdGhhdC5jb25maWcubWFwLm1hcmtlckRlbGF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgY29uZmlndXJlTWFwIDogZnVuY3Rpb24obWFwLG1hcGNvbmZpZyxvcGVucG9wdXAscG9wdXBpZCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0aWxlbGF5ZXIgICA9IG5ldyBMLlRpbGVMYXllcihtYXBjb25maWcudGlsZUxheWVyLnVybCwgbWFwY29uZmlnLnRpbGVMYXllci5vcHRzKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9IEwuY29udHJvbC5zY2FsZShtYXBjb25maWcuc2NhbGUpO1xuICAgICAgICAgICAgbWFwLnNldFZpZXcobmV3IEwuTGF0TG5nKG1hcGNvbmZpZy52aWV3LmxhdCwgbWFwY29uZmlnLnZpZXcubG5nKSwgbWFwY29uZmlnLnZpZXcuem9vbSk7XG4gICAgICAgICAgICBtYXAuYWRkTGF5ZXIodGlsZWxheWVyKTtcbiAgICAgICAgICAgIHNjYWxlLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICAvLyB0cmFjayB0aGUgY3VycmVudGx5IG9wZW4gcG9wdXBcbiAgICAgICAgICAgIG1hcC5vbigncG9wdXBvcGVuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgLy8gZXZlbnQgbGF0ZW5jeSBiZXR3ZWVuIGxlYWZsZXQgYW5kIGJhY2tib25lXG4gICAgICAgICAgICAgICAgLy8gYXBwZWFycyB0byBjYXVzZSBwb3B1cHMgdG8gY29sbGFwc2UgZXJyYXRpY2FsbHlcbiAgICAgICAgICAgICAgICAvLyBpbiBGaXJlZm94IHdoZW4gY2xpY2tpbmcgbWFwIHBpbnNcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbnBvcHVwW3BvcHVwaWQoZXZ0LnBvcHVwLmdldExhdExuZygpKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKGV2dC5wb3B1cC5nZXRMYXRMbmcoKSldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1hcC5vbigncG9wdXBjbG9zZScsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKGV2dC5wb3B1cC5nZXRMYXRMbmcoKSldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbnBvcHVwW3BvcHVwaWQoZXZ0LnBvcHVwLmdldExhdExuZygpKV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIGFkZE1hcmtlclRvTWFwOiBmdW5jdGlvbihtYXJrZXJNb2RlbCxtYXAsb3BlbnBvcHVwLHBvcHVwaWQsbWFwY29uZmlnKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICAgICAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdlb2pzb24gICAgID0gbWFya2VyTW9kZWwuZ2V0KCdqc29uJyk7XG4gICAgICAgICAgICB2YXIgbWFya2VyVmlldyAgPSBuZXcgTWFya2VyVmlldyh7bW9kZWw6IG1hcmtlck1vZGVsLCByb3V0ZXI6IHRoYXQucm91dGVyfSk7XG4gICAgICAgICAgICBtYXJrZXJWaWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgTC5nZW9Kc29uKGdlb2pzb24sIHtcbiAgICAgICAgICAgICAgICAvLyBmZWF0dXJlIGlzIHRoZSBnZW9qc29uLCBhIHJhdyBKUyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBtYXBNYXJrZXIgaXNcbiAgICAgICAgICAgICAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbWFwTWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgcG9wdXAgdG8gdGhpcyBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gTC5wb3B1cChtYXBjb25maWcuZmVhdHVyZXMucG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zZXRDb250ZW50KG1hcmtlclZpZXcuZWwpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIuYmluZFBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgY2xpY2sgaGFuZGxlciBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciwgd2hpY2ggd291bGQgY2xvc2UgdGhlIHBvcHVwIGlmIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJNb2RlbC50cmlnZ2VyKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC5jb25maWcubWFwLmhvdmVyUG9wdXApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBwbGljYXRpb24gb2JqZWN0LCBub3QgbGVhZmxldGpzXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlck1vZGVsLm9uKCdhY3RpdmUnLCBmdW5jdGlvbihhcnRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5wb3B1cFtwb3B1cGlkKG1hcE1hcmtlci5nZXRMYXRMbmcoKSldKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICAgICAgICAgICBMLmljb24obWFwY29uZmlnLmZlYXR1cmVzLmljb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2thYmxlOiAgICAgICEhZmVhdHVyZS5wcm9wZXJ0aWVzLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogICAgICAgICAgKGZlYXR1cmUucHJvcGVydGllcy5tYXJrZXJuYW1lIHx8ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICAgICAgICBtYXBjb25maWcuZmVhdHVyZXMub3BhY2l0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpc2VPbkhvdmVyOiAgICBtYXBjb25maWcuZmVhdHVyZXMucmlzZU9uSG92ZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuYWRkVG8obWFwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXJrZXInLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZScsXG4gICAgJ3RleHQhcGFydGlhbHMvbWFya2VyLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFya2VyVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGVsOiAnJyxcbiAgICAgICAgcm91dGVyOiBudWxsLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LnJvdXRlciA9IGFyZ3Mucm91dGVyO1xuICAgICAgICAgICAgLy8gd2hlbiBhIG1hcmtlciBpcyBtYWRlIGFjdGl2ZSAoZS5nLiwgYnkgc2VsZWN0aW9uXG4gICAgICAgICAgICAvLyBvZiBhIG1hcmsgaW4gdGhlIG1hcCksIHByb3BvZ2F0ZSB0aGUgZXZlbnQgdG8gdGhlXG4gICAgICAgICAgICAvLyBpc3N1ZSwgZm9yIHVwZGF0ZXMgZWxzZXdoZXJlIGluIHRoZSBhcHBsaWNhdGlvblxuICAgICAgICAgICAgdGhhdC5tb2RlbC5vbignYWN0aXZlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9ICdhcnRpY2xlLycgKyB0aGF0Lm1vZGVsLmFydGljbGUuZ2V0KCdhcnRpY2xlaWQnKTtcbiAgICAgICAgICAgICAgICB0aGF0LnJvdXRlci5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIGFydGljbGUgaXMgaGFzIGJlZW4gc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICB0aGF0Lm1vZGVsLmdldCgnaXNzdWUnKS50cmlnZ2VyKCdzZWxlY3QnLCB0aGF0Lm1vZGVsLmdldCgnYXJ0aWNsZScpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGFpbiBlbXB0eSBmdW5jdGlvbiB0byBhdm9pZCByZWRyYXcvY29sbGFwc2Ugb2ZcbiAgICAgICAgLy8gbWFwIG1hcmtlciBwb3BvdmVyXG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwoXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFydGljbGVpZDogIHRoaXMubW9kZWwuYXJ0aWNsZS5nZXQoJ2FydGljbGVpZCcpLFxuICAgICAgICAgICAgICAgICAgICBnZW9qc29uOiAgICB0aGlzLm1vZGVsLmFydGljbGUuZ2VvanNvbigpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFya2VyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWVudScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21lbnUuaHRtbCdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL21lbnUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbWVudVRtcGwsRE9NV2F0Y2hlcixBcnRpY2xlTWVudVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZShtZW51VG1wbCksXG4gICAgICAgICAgaWQ6ICAgICAgJ21lbnUnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBpc3N1ZTogICBudWxsXG4gICAgICAgICwgY29uZmlnOiAge31cbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZSAgPSBhcmdzLmlzc3VlO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhhdC5pZCkuY2hpbGRyZW4oKS5sZW5ndGggIT09IDApIHJldHVybjtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuY29uZmlnLm1lbnU7XG4gICAgICAgICAgICAvLyByZW5kZXIgZWFjaCBpdGVtIGZyb20gdGhlIGNvbmZpZyBmaWxlIHRvIGEgPGxpPlxuICAgICAgICAgICAgLy8gbXVzdCBiZSBkb25lIGFzeW5jIGR1ZSB0byByZXRyaWV2YWwgb2YgcGFydGlhbCBmaWxlc1xuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgLy8gY2FjaGUgb2YgdGVtcGxhdGUgc3RyaW5nczogdXJsID0+IHRlbXBsXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0ge307XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIF8uZWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzW2l0ZW0ucGFydGlhbF0gPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtLmNvbGxlY3Rpb24gPT09IFwiY29sbGVjdGlvbnMvYXJ0aWNsZXNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXSA9IHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgY29sbGVjdGlvbiB0eXBlIHJlcXVlc3RlZDogXCIgKyBpdGVtLmNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmVhY2goXy5rZXlzKHRlbXBsYXRlcyksIGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyB1cmxdLCBmdW5jdGlvbih0ZW1wbCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbdXJsXSA9IF8udGVtcGxhdGUodGVtcGwpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCRkZWYucHJvbWlzZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVuZGVyIHRoZSBtZW51IGFzIGEgPGRpdj5cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gJyc7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoJCwgcHJvbWlzZXMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGl0ZW0ucGFydGlhbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlciA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViQ29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3BhZ2UnIHx8IGl0ZW0udHlwZSA9PT0gJ3NlcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXS5tb2RlbHMuZm9yRWFjaChmdW5jdGlvbihtb2RlbCxqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgICAgPSBpdGVtLml0ZW0uaHJlZi5yZXBsYWNlKCc6aScsIGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbXYgICAgID0gbmV3IEFydGljbGVNZW51Vmlldyh7bW9kZWw6bW9kZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ICA9IGFtdi5yZW5kZXIoe2hyZWY6ICcjJyArIGhyZWZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGxpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYW4gPGxpPiBlbGVtZW50IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0LmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnTEknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5vdXRlckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkb2N1bWVudCBlbGVtZW50IGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCByZXN1bHQgdHlwZSBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JyldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5maW5kKCdhJykudGV4dCgpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMgPSBfLmtleXMoc29ydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzLnNvcnQoZnVuY3Rpb24oYSxiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHNvcnRLZXlzLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRlbnQgKz0gc29ydGVyW2tleV1bMF0ub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBzdWJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHRoYXQuaWQpLmVtcHR5KCkuYXBwZW5kKHRoYXQudGVtcGxhdGUoe2NvbnRlbnQ6IGNvbnRlbnR9KSk7XG4gICAgICAgICAgICAgICAgLy8gY29uZmlybSB0aGF0IHRoZSBtZW51IGhhcyBsb2FkZWRcbiAgICAgICAgICAgICAgICB2YXIgJGZhaWxEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJGZhaWxEZWYuZmFpbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQud2F0Y2hET00oNTAwLCAnIycgKyB0aGF0LmlkLCAkZmFpbERlZik7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBidWlsZCBtZW51LlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWVudVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFnZScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMvZG9td2F0Y2hlcicsXG4gICAgJ3RleHQhcGFydGlhbHMvcGFnZS5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIscGFnZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFnZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkZGVmLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQocGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCRkZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFnZVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBQYWdlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFydGlhbCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYXJ0aWFsVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICcnLFxuICAgICAgICBwYWdlOiAnJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuZWwgICA9IG9wdHMuZWw7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgb3B0cy5wYWdlXSwgZnVuY3Rpb24oaHRtbCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFnZSA9IGh0bWw7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHdhdGNoRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5pbml0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZCh0aGF0LnBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkd2F0Y2hEZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBQYXJ0aWFsVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9lcnJvci91c2VyJywgW1xuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1zZ1wiIDogXCJcIlxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnNldCgnbXNnJywgYXJncy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVXNlckVycm9yTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG4vKlxuICogVGhpcyBpcyBtZWFudCB0byBiZSBleHRlbmRlZCBhcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aGVcbiAqIHNlY3Rpb25zIG9mIGFuIGFydGljbGUuXG4gKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9tZW51JywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUtbWVudS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsWE1MMkhUTUwsYW1Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIHRoaXMgdmlldyBpcyBtZWFudCB0byBiZSBjYWxsZWQgb25seSBhZnRlciB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gYXJ0aWNsZSBtb2RlbCBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwuaW5pdCgpLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlVuaW5pdGlhbGl6ZWQgYXJ0aWNsZSBpbiBBcnRpY2xlTWVudVZpZXdcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZW51aXRlbSA9IHRoYXQueG1sMmh0bWwodGhhdC5tb2RlbC5nZXQoJ3htbCcpLCBhbVhzbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiBtZW51aXRlbTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNZW51Vmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICdiYWNrYm9uZScsIFxuICAgICd0ZXh0IXBhcnRpYWxzL2Vycm9yL3VzZXIuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGVsOiAkKCcjZXJyb3JEaWFsb2cnKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5tb2RhbCh7a2V5Ym9hcmQ6IHRydWUsIHNob3c6IHRydWV9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFVzZXJFcnJvclZpZXc7XG59KTtcbiIsInJlcXVpcmUuY29uZmlnKHtcbiAgcGF0aHM6IHtcbiAgICB0ZXh0OiAgICAgICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcmVxdWlyZS10ZXh0LzIuMC4xMi90ZXh0Lm1pbicsXG4gICAganF1ZXJ5OiAgICAgJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5taW4nLFxuICAgIGJvb3RzdHJhcDogICcvL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjMuNC9qcy9ib290c3RyYXAubWluJyxcbiAgICBiYWNrYm9uZTogICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYmFja2JvbmUuanMvMS4xLjIvYmFja2JvbmUtbWluJyxcbiAgICB1bmRlcnNjb3JlOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdW5kZXJzY29yZS5qcy8xLjguMy91bmRlcnNjb3JlLW1pbicsXG4gICAgbGVhZmxldDogICAgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMC43LjMvbGVhZmxldCcsXG4gICAgc2xpZGVzanM6ICAgJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3NsaWRlc2pzLzMuMC9qcXVlcnkuc2xpZGVzLm1pbicsXG4gICAgcGFydGlhbHM6ICAgJy4uL3BhcnRpYWxzJyxcbiAgICB4c2w6ICAgICAgICAnLi4vc2NyaXB0L3hzbCcsXG4gICAgcGFnZXM6ICAgICAgJy4uL3BhZ2VzJ1xuICB9LFxuICBzaGltOiB7XG4gICAgYm9vdHN0cmFwOiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBiYWNrYm9uZToge1xuICAgICAgICAnZGVwcyc6IFsnanF1ZXJ5JywgJ3VuZGVyc2NvcmUnXSxcbiAgICAgICAgJ2V4cG9ydHMnOiAnQmFja2JvbmUnXG4gICAgfSxcbiAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICdleHBvcnRzJzogJ18nXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICAgICdkZXBzJzogW11cbiAgICB9LFxuICAgIHNsaWRlc2pzOiB7XG4gICAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9XG4gIH1cbn0pO1xucmVxdWlyZShbXG4gICAgJ2pxdWVyeScsXG4gICAgJ21vZGVscy9lcnJvci91c2VyJyxcbiAgICAndmlld3MvZXJyb3IvdXNlcicsXG4gICAgJ21vZGVscy9hcHAnLFxuICAgICd2aWV3cy9hcHAnLFxuICAgICdib290c3RyYXAnXG5dLCBmdW5jdGlvbigkLFVzZXJFcnJvck1vZGVsLFVzZXJFcnJvclZpZXcsQXBwTW9kZWwsQXBwVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgY29uZmlnZmlsZSA9ICQoJyNtYWluJykuYXR0cignZGF0YS1jb25maWcnKTtcbiAgICBpZiAoY29uZmlnZmlsZSkge1xuICAgICAgICAkLmdldEpTT04oY29uZmlnZmlsZSwgZnVuY3Rpb24oc2l0ZWNvbmZpZykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgYXBwID0gbmV3IEFwcFZpZXcoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogKG5ldyBBcHBNb2RlbCh7Y29uZmlnOiBzaXRlY29uZmlnfSkpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRzLmNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBtc2c6IFwiRmFpbGVkIHRvIGxvYWQgc2l0ZSBjb25maWcgZmlsZSAnXCIgKyBjb25maWdmaWxlICsgXCInIFwiICsgZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgIG1zZzogXCJObyBjb25maWd1cmF0aW9uIGZpbGVuYW1lIHNwZWNpZmllZCBpbiBob21lIHBhZ2UuXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
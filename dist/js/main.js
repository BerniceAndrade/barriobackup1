define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/markers",["jquery","underscore","backbone","models/marker"],function(e,r,n,o){"use strict";var c=n.Collection.extend({model:o});return c});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/app",["jquery","underscore","backbone","routes/router","models/issue"],function(e,n,o,i,r){"use strict";var s=o.Model.extend({initialize:function(e){var n=new r({config:e.config});new i({routes:e.config.pages.routes,config:e.config,issue:n})}});return s});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl"],function(e,t,n,r,i,o,s){"use strict";var l=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,marker:null},select:function(){this.trigger("active")},unselect:function(){this.trigger("inactive")},geojson:function(){var e="{}";try{var t=this.get("xml"),n=this.xml2html(t,s,{},"text");e=JSON.parse(n)}catch(r){throw new Error("Failed to parse to json: "+r.toString())}return e}});return t.extend(l.prototype,r),t.extend(l.prototype,i),t.extend(l.prototype,o),l});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,i,n,c,l){"use strict";var r=i.Model.extend({initialize:function(i){var l=this;l.$def=e.Deferred();var r=i.config.articles.pathBase;r.match(/\/$/)||(r+="/");var a=i.config.articles.files,o=new c;l.config=i.config,l.set("collection",o);var s=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){s[t]=new n({articleid:t,articledir:r,path:r+e})});var f=t.map(s,function(e){return e.init()});e.when({},f).fail(function(){l.$def.reject()}),e.when.apply(null,f).done(function(){o.add(s),l.on("select",function(e){l._selectArticle(e)}),l.$def.resolve(l)}),e.when.apply(null,f).always(function(){t.forEach(f,function(e){"rejected"===e.state()&&l.$def.reject()}),l.$def.resolve(l)})},defaults:{activeArticle:null},_selectArticle:function(e){var t,i=this,n=i.get("collection");if("object"==typeof e)t=e;else{if("number"!=typeof e&&"string"!=typeof e)throw"Bad argument to models/issue";t=n.at(e)}(null===this.get("activeArticle")||this.get("activeArticle")!=e)&&(this.get("activeArticle")&&this.get("activeArticle").unselect(),i.set("activeArticle",t),t.init().done(function(){i.trigger("update",t),t.select()}))}});return t.extend(r.prototype,l),r});
define("models/map",["jquery","underscore","backbone","collections/markers","models/marker","mixins/asyncInit"],function(e,n,o,i,r,t){"use strict";var s=o.Model.extend({initialize:function(n){var o=this;if(o.$def=e.Deferred(),o.issue=n.issue,void 0===o.issue)throw new Error("Missing issue model in map model");if(o.set("router",n.router),!n.router)throw new Error("No router in MapModel");var i=e.Deferred();e.getJSON(n.config.map.config,function(e){o.set("mapconfig",e),i.resolve()}).fail(function(e,n,o){i.reject(),console.log("Failed to load map config file: "+o)}),e.when.apply({},[o.issue.init(),i]).done(function(){o._makeCollection(o.issue.get("collection").models,{success:function(){o.$def.resolve(o)},fail:function(){o.$def.reject()}})}).fail(function(){o.$def.reject()}).always(function(){o.$def.reject()})},defaults:{mapconfig:{}},_makeCollection:function(o,t){var s=this,c=[],f=new i;s.set("collection",f);var a=n.map(n.range(o.length),function(){return void 0}),u=!1,l="";o.forEach(function(n,o){var i=e.Deferred();c.push(i),n.init().done(function(){var e;try{e=new r({issue:s.issue,article:n,json:n.geojson(),router:s.router})}catch(t){return u=!0,l+="\n"+t.toString(),void i.resolve()}a[o]=e,i.resolve()})}),e.when.apply({},c).done(function(){if(f.add(a),u)throw new Error(l);t.success()}).fail(function(){t.fail()})}});return n.extend(s.prototype,t),s});
define("models/marker",["jquery","underscore","backbone"],function(e,i,t){"use strict";var r=t.Model.extend({article:null,json:{},initialize:function(e){var i=this;i.app=e.app,i.article=e.article,i.router=e.router,e.issue.init().done(function(e){i.listenTo(i.article,"active",function(){i.trigger("active")})})}});return r});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","views/issue","views/map","views/menu"],function(e,i,r,n,s,t,a,o,u){"use strict";var g=r.Router.extend({pages:{},config:{},issue:null,mapView:null,initialize:function(e){var n=this;this.config=e.config,this.pages=e.config.pages,this.issue=e.issue,this.issue.init().done(function(){i.has(n.pages.router,"history")&&n.pages.router.history&&r.history.start()})},navigate:function(e,i){r.history.fragment!==e&&r.history.navigate(e,i)},page:function(e){var r,n=this;try{if(e||(e=this.pages.home),r=this.pages.pages[e],void 0===r)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new t).render(),i.each(r,function(r){var s,t={config:n.config,issue:n.issue,router:n},a=JSON.parse(JSON.stringify(r));if(i.has(a,"view"))s=a.view;else{if(!i.has(a,"partial")){if(i.has(confg,"full"))return void(window.location.href=a.full.page);throw new Error("Unsupported page type in router: "+e)}s="views/partial",a.partial.page=n.pages.pathBase+a.partial.page,t=i.extend(t,a.partial)}require([s],function(e){var i=new e(t);i.render()})})},article:function(i){e("#titlepage").remove();var r=this,n={config:r.config,issue:r.issue,router:r};if(0===e("#issue").length){var s=new a(n);s.render()}if(0===e("#map").length&&(r.mapView=new o(n),r.mapView.render()),0===e("#menu").children().length){var t=new u(n);t.render()}e.when.apply({},[r.mapView.init()]).done(function(){r.issue.trigger("select",i)})}});return g});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","mixins/domwatcher","mixins/xml2html","text!xsl/article.xsl","text!partials/popover.html","text!partials/popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(e,t,i,s,r,o,a,l,n){"use strict";var d=i.View.extend({id:"article",initialize:function(e){var t=this;t.config=e.config},render:function(){var t=this;t.$el=e("#"+t.id);var i=this.xml2html(this.model.get("xml"),o,{"article-dir":t.config.articles.pathBase});try{e(".article-content").remove(),e("#"+this.id).append(i)}catch(s){console.log("article load error: "+s.toString())}if(0===e("img.slidesjs-slide").length)e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer");else try{t.postprocess()}catch(s){throw new Error("Failed to handle article images")}return t},remove:function(){},postprocess:function(){var i=this,s=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:s});var r=t.template(l);e("img.slidesjs-slide").each(function(t,i){var s=i.getAttribute("id"),o=e(".popover."+s),l=o.find(".head").text();e(i).attr("alt",o.find(".desc").text());var n=r({attr:o.find(".attr").text()});e(i).popover({container:"body",html:!0,content:n,title:l,template:a,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})});var o=[];return i.$el.find("img.slidesjs-slide").each(function(t,i){var s=e.Deferred();e(i).load(function(){e(i).removeClass("remove"),s.resolve()}),e(i).error(function(){window.setTimeout(function(){s.reject()},500)}),o.push(s)}),e.when.apply({},o).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),e("#slides").slidesjs({navigation:{active:e("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:e("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(t){var i=e(".slidesjs-control").children(":eq("+(t-1)+")");i.css({visibility:"hidden"}),i.css({height:"auto",width:"auto",maxHeight:e(".slidesjs-container").height(),maxWidth:e(".slidesjs-container").width(),position:"relative"});var s=(e(".slidesjs-container").width()-i.width())/2;s-=parseInt(i.css("padding-left"),10),i.css({left:s}),i.css({visibility:"visible"})},start:function(t){e(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(t){var i=t-1,s=e(".slidesjs-control").children(":eq("+i+")");s.css({height:"auto",width:"auto",maxHeight:e(".slidesjs-container").height(),maxWidth:e(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}})}),e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var s=i.el.attr("id"),r=e(".popover."+s),o=t.template(n),a=o({title:r.find(".head").text(),attr:r.find(".attr").text()});return a}}}),i}});return t.extend(d.prototype,s),t.extend(d.prototype,r),d});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,o){"use strict";var r=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.model=e.issue,i.model.on("update",function(e){i.select(e)})},render:function(){this.$el.remove(),e("body").append(n)},select:function(e){var i=this,t=new o({model:e,config:i.model.config,issue:i,router:i.model.router});e.on("active",t.render,t),e.on("inactive",t.remove,t)}});return r});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","models/map","views/marker","mixins/asyncInit"],function(e,t,n,o,i,r,a,p){"use strict";var c=n.View.extend({id:"map",tagName:"div",initialize:function(t){var n=this;n.$def=e.Deferred(),n.config=t.config,n.model=new r(t),n.router=t.router},render:function(){var t=this;e("#"+t.id).children().length>0||(e("body").append(i),this.model.init().done(function(){var e=t.model.get("collection"),n=t.model.get("mapconfig"),i=new o.Map(n.id,n.map),r={},a=function(e){return e.lat.toString()+e.lng.toString()};t.configureMap(i,n,r,a),i.invalidateSize(),window.setTimeout(function(){e.forEach(function(e){t.addMarkerToMap(e,i,r,a,n)}),t.$def.resolve(t)},t.config.map.markerDelay)}))},configureMap:function(t,n,i,r){var a=new o.TileLayer(n.tileLayer.url,n.tileLayer.opts),p=o.control.scale(n.scale);t.setView(new o.LatLng(n.view.lat,n.view.lng),n.view.zoom),t.addLayer(a),p.addTo(t),t.on("popupopen",function(n){var a,p,c,u=n.popup,g=u.getLatLng(),l=t.containerPointToLatLng(o.DomUtil.getViewportOffset(document.getElementById("article")));g.lng>l.lng&&(p=e(u.getContent()).closest(".leaflet-popup-content-wrapper").first().width()/2-(t.latLngToLayerPoint(l).x-t.latLngToLayerPoint(t.getCenter()).x),c=o.point(u.options.autoPanPaddingBottomRight||u.options.autoPanPadding),c=c?c.x:0,a=t.latLngToLayerPoint(g).x-t.latLngToLayerPoint(t.getCenter()).x,t.panBy([a+p+c,0])),i[r(g)]=-1!=navigator.userAgent.indexOf("Firefox")?!0:!0}),t.on("popupclose",function(e){i[r(e.popup.getLatLng())]=-1!=navigator.userAgent.indexOf("Firefox")?!1:!1})},addMarkerToMap:function(e,t,n,i,r){var p=this,c=e.get("json"),u=new a({model:e,router:p.router});u.render(),o.geoJson(c,{onEachFeature:function(t,a){var c=o.popup(r.features.popup);c.setContent(u.el),a.bindPopup(c),a.removeEventListener("click"),a.on("click",function(){e.trigger("active")}),a.on("mouseover",function(){p.config.map.hoverPopup&&(n[i(a.getLatLng())]||a.openPopup())}),e.on("active",function(e){n[i(a.getLatLng())]||a.openPopup()}),n[i(a.getLatLng())]=!1},pointToLayer:function(e,t){return o.marker(t,{icon:o.icon(r.features.icon),clickable:!!e.properties.text,title:e.properties.markername||"",opacity:r.features.opacity,riseOnHover:r.features.riseOnHover})}}).addTo(t)}});return t.extend(c.prototype,p),c});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html"],function(e,t,r,i){"use strict";var l=r.View.extend({template:t.template(i),el:"",router:null,initialize:function(e){var t=this;t.router=e.router,t.model.on("active",function(){var e="article/"+t.model.article.get("articleid");t.router.navigate(e,{trigger:!0}),t.model.get("issue").trigger("select",t.model.get("article"))})},render:function(){this.$el.html(this.template({articleid:this.model.article.get("articleid"),geojson:this.model.article.geojson()}))}});return l});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
require.config({paths:{text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",jquery:"//code.jquery.com/jquery-2.1.4.min",bootstrap:"//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min",backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","models/app","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{{new a({model:new r({config:e})})}}catch(i){opts.config.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvbWFya2Vycy5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcHAuanMiLCJtb2RlbHMvYXJ0aWNsZS5qcyIsIm1vZGVscy9pc3N1ZS5qcyIsIm1vZGVscy9tYXAuanMiLCJtb2RlbHMvbWFya2VyLmpzIiwicm91dGVzL3JvdXRlci5qcyIsInZpZXdzL2FwcC5qcyIsInZpZXdzL2FydGljbGUuanMiLCJ2aWV3cy9jbGVhci5qcyIsInZpZXdzL2lzc3VlLmpzIiwidmlld3MvbWFwLmpzIiwidmlld3MvbWFya2VyLmpzIiwidmlld3MvbWVudS5qcyIsInZpZXdzL3BhZ2UuanMiLCJ2aWV3cy9wYXJ0aWFsLmpzIiwibW9kZWxzL2Vycm9yL3VzZXIuanMiLCJ2aWV3cy9hcnRpY2xlL21lbnUuanMiLCJ2aWV3cy9lcnJvci91c2VyLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCIkIiwiXyIsIkJhY2tib25lIiwiQXJ0aWNsZU1vZGVsIiwiQXJ0aWNsZXNDb2xsZWN0aW9uIiwiQ29sbGVjdGlvbiIsImV4dGVuZCIsIm1vZGVsIiwiTWFya2VyTW9kZWwiLCJNYXJrZXJzQ29sbGVjdGlvbiIsIkFzeW5jSW5pdCIsIiRkZWYiLCJpbml0IiwidGhpcyIsInByb21pc2UiLCJET01XYXRjaGVyIiwid2F0Y2hET00iLCJtcyIsInNlbCIsImxlbmd0aCIsImYiLCJkb2N1bWVudCIsImJvZHkiLCJvZmYiLCJyZXNvbHZlIiwib24iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwicmVqZWN0IiwiRmV0Y2hYTUwiLCJmZXRjaFhNTCIsInVybCIsIiRnZXQiLCJEZWZlcnJlZCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZGF0YSIsImVycm9yIiwianFYSFIiLCJ0ZXh0U3RhdHVzIiwiZXJyb3JUaHJvd24iLCJYTUwySFRNTCIsIl9kb2MiLCJ4bWwiLCJ4bWxEb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJEb2N1bWVudCIsIkVycm9yIiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImVhY2giLCJrZXlzIiwia2V5Iiwic2V0UGFyYW1ldGVyIiwicmVzdWx0IiwiZG9jIiwidHJhbnNmb3JtVG9Eb2N1bWVudCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJkb2N1bWVudEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImlubmVySFRNTCIsImUiLCJ0b1N0cmluZyIsIlJvdXRlciIsIklzc3VlTW9kZWwiLCJBcHBNb2RlbCIsIk1vZGVsIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJpc3N1ZSIsImNvbmZpZyIsInJvdXRlcyIsInBhZ2VzIiwiZ2VvSnNvblhzbCIsInRoYXQiLCJnZXQiLCJ3aGVuIiwiZG9uZSIsInNldCIsImZhaWwiLCJkZWZhdWx0cyIsIm1hcmtlciIsInNlbGVjdCIsInRyaWdnZXIiLCJ1bnNlbGVjdCIsImdlb2pzb24iLCJqc29uU3RyaW5nIiwiSlNPTiIsInBhcnNlIiwicHJvdG90eXBlIiwiQXJ0aWNsZUNvbGxlY3Rpb24iLCJhcmdzIiwiYXJ0ZGlyIiwiYXJ0aWNsZXMiLCJwYXRoQmFzZSIsIm1hdGNoIiwiZmlsZXMiLCJjb2wiLCJtYXAiLCJyYW5nZSIsInVuZGVmaW5lZCIsImZpbGUiLCJpIiwiYXJ0aWNsZWlkIiwiYXJ0aWNsZWRpciIsInBhdGgiLCJpbml0cyIsImFydGljbGUiLCJhcHBseSIsImFkZCIsIl9zZWxlY3RBcnRpY2xlIiwiYWx3YXlzIiwiZm9yRWFjaCIsIiRwcm9taXNlIiwic3RhdGUiLCJhY3RpdmVBcnRpY2xlIiwiYXJ0IiwiYXQiLCJNYXBNb2RlbCIsInJvdXRlciIsIiRjb25maWdEZWYiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiX21ha2VDb2xsZWN0aW9uIiwibW9kZWxzIiwibWFwY29uZmlnIiwiY2JzIiwiZGVmZXJyZWRzIiwibWFya2VycyIsImVycm9yTXNnIiwiJGFydERlZiIsInB1c2giLCJtbSIsImpzb24iLCJhcHAiLCJsaXN0ZW5UbyIsIlVzZXJFcnJvck1vZGVsIiwiVXNlckVycm9yVmlldyIsIkNsZWFyVmlldyIsIklzc3VlVmlldyIsIk1hcFZpZXciLCJNZW51VmlldyIsIm1hcFZpZXciLCJoYXMiLCJoaXN0b3J5Iiwic3RhcnQiLCJuYXZpZ2F0ZSIsImZyYWdtZW50Iiwib3B0aW9ucyIsInBhZ2UiLCJwYWdlQ29uZmlnIiwiaG9tZSIsInJlbmRlciIsInBjIiwidmlld05hbWUiLCJzdHJpbmdpZnkiLCJ2aWV3IiwiY29uZmciLCJsb2NhdGlvbiIsImhyZWYiLCJmdWxsIiwicGFydGlhbCIsInJlcXVpcmUiLCJWaWV3IiwidiIsImlkIiwicmVtb3ZlIiwiaXN2IiwiY2hpbGRyZW4iLCJtbnYiLCJBcHBWaWV3IiwiZWwiLCJyZXNpemUiLCJyZWxvYWQiLCJwb3BvdmVyVGVtcGwiLCJwb3BvdmVyQ29udGVudFRlbXBsIiwibGlnaHRib3hUaXRsZVRlbXBsIiwiQXJ0aWNsZVZpZXciLCIkZWwiLCJodG1sIiwiYXJ0aWNsZS1kaXIiLCJhcHBlbmQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicG9zdHByb2Nlc3MiLCJoZWlnaHQiLCJvdXRlckhlaWdodCIsImNzcyIsInBjdCIsInRlbXBsYXRlIiwiZWx0IiwiZ2V0QXR0cmlidXRlIiwiJHBvIiwidGl0bGUiLCJmaW5kIiwidGV4dCIsImF0dHIiLCJjb250ZW50IiwicG9wb3ZlciIsImNvbnRhaW5lciIsInBsYWNlbWVudCIsImNsaWNrIiwiZXZ0IiwiZGVmcyIsImltZyIsImxvYWQiLCJzbGlkZXNqcyIsIm5hdmlnYXRpb24iLCJhY3RpdmUiLCJlZmZlY3QiLCJwYWdpbmF0aW9uIiwiZmFkZSIsInNwZWVkIiwiY3Jvc3NmYWRlIiwiY2FsbGJhY2siLCJsb2FkZWQiLCJudW1iZXIiLCIkaW1nIiwidmlzaWJpbGl0eSIsIndpZHRoIiwibWF4SGVpZ2h0IiwibWF4V2lkdGgiLCJwb3NpdGlvbiIsImxlZnQiLCJwYXJzZUludCIsImNvbXBsZXRlIiwibmV3SW1nIiwibWFnbmlmaWNQb3B1cCIsImdhbGxlcnkiLCJlbmFibGVkIiwiaW1hZ2UiLCJ0aXRsZVNyYyIsIiRpdGVtIiwidG1wbCIsImVtcHR5IiwiYXYiLCJMIiwibWFwUGFydGlhbCIsIk1hcmtlclZpZXciLCJ0YWdOYW1lIiwiTWFwIiwib3BlbnBvcHVwIiwicG9wdXBpZCIsImxhdGxuZyIsImxhdCIsImxuZyIsImNvbmZpZ3VyZU1hcCIsImludmFsaWRhdGVTaXplIiwibWFya2VyTW9kZWwiLCJhZGRNYXJrZXJUb01hcCIsIm1hcmtlckRlbGF5IiwidGlsZWxheWVyIiwiVGlsZUxheWVyIiwidGlsZUxheWVyIiwic2NhbGUiLCJjb250cm9sIiwic2V0VmlldyIsIkxhdExuZyIsInpvb20iLCJhZGRMYXllciIsImFkZFRvIiwiZHgiLCJvZmZzZXQiLCJwYWQiLCJwb3B1cCIsInBvcHVwTGF0TG5nIiwiZ2V0TGF0TG5nIiwiZWRnZUxhdExuZyIsImNvbnRhaW5lclBvaW50VG9MYXRMbmciLCJEb21VdGlsIiwiZ2V0Vmlld3BvcnRPZmZzZXQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJsYXRMbmdUb0xheWVyUG9pbnQiLCJ4IiwiZ2V0Q2VudGVyIiwicG9pbnQiLCJhdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IiwiYXV0b1BhblBhZGRpbmciLCJwYW5CeSIsIm1hcmtlclZpZXciLCJnZW9Kc29uIiwib25FYWNoRmVhdHVyZSIsImZlYXR1cmUiLCJtYXBNYXJrZXIiLCJmZWF0dXJlcyIsInNldENvbnRlbnQiLCJiaW5kUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaG92ZXJQb3B1cCIsIm9wZW5Qb3B1cCIsImFydGlkIiwicG9pbnRUb0xheWVyIiwiaWNvbiIsImNsaWNrYWJsZSIsInByb3BlcnRpZXMiLCJtYXJrZXJuYW1lIiwib3BhY2l0eSIsInJpc2VPbkhvdmVyIiwibWVudVRtcGwiLCJBcnRpY2xlTWVudVZpZXciLCJpdGVtcyIsIm1lbnUiLCJwcm9taXNlcyIsInRlbXBsYXRlcyIsImNvbGxlY3Rpb25zIiwiaXRlbSIsImNvbGxlY3Rpb24iLCJ0ZW1wbCIsInNvcnRlciIsInN1YkNvbnRlbnQiLCJzb3J0S2V5cyIsImoiLCIkbGkiLCJyZXBsYWNlIiwiYW12IiwiRWxlbWVudCIsIm5vZGVOYW1lIiwib3V0ZXJIVE1MIiwiY2xvbmUiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwibGFiZWwiLCJ0aGVuIiwiJGZhaWxEZWYiLCJQYWdlVmlldyIsIlBhcnRpYWxWaWV3IiwiJHdhdGNoRGVmIiwibXNnIiwibWVzc2FnZSIsImFtWHNsIiwibWVudWl0ZW0iLCJhdHRyaWJ1dGVzIiwibW9kYWwiLCJrZXlib2FyZCIsInNob3ciLCJwYXRocyIsImpxdWVyeSIsImJvb3RzdHJhcCIsImJhY2tib25lIiwidW5kZXJzY29yZSIsImxlYWZsZXQiLCJsaWdodGJveCIsInBhcnRpYWxzIiwic2hpbSIsImRlcHMiLCJleHBvcnRzIiwiY29uZmlnZmlsZSIsInNpdGVjb25maWciLCJkZWJ1ZyJdLCJtYXBwaW5ncyI6IkFBQ0FBLE9BQU8sd0JBQ0gsU0FDQSxhQUNBLFdBQ0Esa0JBQ0QsU0FBU0MsRUFBRUMsRUFBRUMsRUFBU0MsR0FDckIsWUFDQSxJQUFJQyxHQUFxQkYsRUFBU0csV0FBV0MsUUFDekNDLE1BQU9KLEdBRVgsT0FBT0M7QUNWWEwsT0FBTyx1QkFDSCxTQUNBLGFBQ0EsV0FDQSxpQkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTTSxHQUNyQixZQUNBLElBQUlDLEdBQW9CUCxFQUFTRyxX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S04sTUFBTXdWLGFBQ3ZDbFYsS0FBS29MLElBQUkrSixPQUFPQyxVQUFVLEVBQU1DLE1BQU0sSUFDL0JyVixPQUdmLE9BQU8ySTtBQ25CWHlCLFFBQVE5RixRQUNOZ1IsT0FDRWpKLEtBQVksZ0VBQ1prSixPQUFZLHFDQUNaQyxVQUFZLDZEQUNaQyxTQUFZLGtFQUNaQyxXQUFZLHNFQUNaQyxRQUFZLHlEQUNaM0ksU0FBWSxrRUFDWjRJLFNBQVkscUZBQ1pDLFNBQVksY0FDWnBULElBQVksZ0JBQ1orQixNQUFZLFlBRWRzUixNQUNFTixXQUNFTyxNQUFPLFdBRVROLFVBQ0lNLE1BQVMsU0FBVSxjQUNuQkMsUUFBVyxZQUVmTixZQUNJTSxRQUFXLEtBRWYzSixNQUNJMEosU0FFSi9JLFVBQ0krSSxNQUFPLFdBRVhILFVBQ0VHLE1BQU8sY0FJYjNMLFNBQ0ksU0FDQSxvQkFDQSxtQkFDQSxhQUNBLFlBQ0EsYUFDRCxTQUFTakwsRUFBRXVKLEVBQWVDLEVBQWMxRSxFQUFTMkcsR0FDaEQsWUFDQSxJQUFJcUwsR0FBYTlXLEVBQUUsU0FBU21OLEtBQUssY0FDN0IySixHQUNBOVcsRUFBRXNJLFFBQVF3TyxFQUFZLFNBQVNDLEdBQzNCLElBQ0ksQ0FBVSxHQUFJdEwsSUFDVmxMLE1BQU8sR0FBS3VFLElBQVVLLE9BQVE0UixPQUVwQyxNQUFPclMsR0FDQU8sS0FBS0UsT0FBTzZSLE9BQ2IsR0FBSXhOLElBQ0FqSixNQUFPLEdBQUlnSixJQUNQb00sSUFBS2pSLEVBQUVDLGtCQUt4QmlCLEtBQUssU0FBUzJDLEVBQU85RixFQUFZRixHQUNoQyxHQUFJaUgsSUFDQWpKLE1BQU8sR0FBSWdKLElBQ1BvTSxJQUFLLG9DQUFzQ21CLEVBQWEsS0FBT3ZVLFFBSzNFLEdBQUlpSCxJQUNBakosTUFBTyxHQUFJZ0osSUFDUG9NLElBQUsiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdjb2xsZWN0aW9ucy9hcnRpY2xlcycsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtb2RlbHMvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVzQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKHtcbiAgICAgICAgbW9kZWw6IEFydGljbGVNb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gQXJ0aWNsZXNDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvbWFya2VycycsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy9tYXJrZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTWFya2VyTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcmtlcnNDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoe1xuICAgICAgICBtb2RlbDogTWFya2VyTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIE1hcmtlcnNDb2xsZWN0aW9uO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2FzeW5jSW5pdCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXN5bmNJbml0ID0ge1xuICAgICAgICAgICRkZWY6IG51bGxcbiAgICAgICAgLCBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRkZWYucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNJbml0O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbWl4aW5zL2RvbXdhdGNoZXInLCBbXG4gICAgJ2pxdWVyeScgXG5dLCBmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBET01XYXRjaGVyID0ge1xuICAgICAgICB3YXRjaERPTSA6IGZ1bmN0aW9uKG1zLHNlbCwkZGVmKSB7XG4gICAgICAgICAgICBpZiAoIXNlbCkgdGhyb3cgXCJFbXB0eSBzZWxlY3RvciBpbiB3YXRjaERPTSgpXCI7XG4gICAgICAgICAgICBpZiAoJChzZWwpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBmID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub24oJ0RPTU5vZGVJbnNlcnRlZCcsIGYpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSwgbXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERPTVdhdGNoZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZmV0Y2h4bWwnLCBbXG4gICAgJ2pxdWVyeSdcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEZldGNoWE1MID0ge1xuICAgICAgICAvLyByZXR1cm4gYW4gb2JqZWN0IGltcGxlbWVudGluZyB0aGUgUHJvbWlzZSBpbnRlcmZhY2VcbiAgICAgICAgLy8gd2hlbiBzdWNjZXNzZnVsLCB0aGUgUHJvbWlzZSByZXR1cm5zIHRoZSBkYXRhIGZldGNoZWRcbiAgICAgICAgLy8gYnkgdGhlIGFqYXggcmVxdWVzdFxuICAgICAgICAvLyBkYXRhIHJldHVybmVkIGJ5IHRoZSBwcm9taXNlIGlzIGEgRG9jdW1lbnRcbiAgICAgICAgZmV0Y2hYTUwgOiBmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAgICAgJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiAgICAgIHVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ3htbCcsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgJGdldC5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuICRnZXQucHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRmV0Y2hYTUw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMveG1sMmh0bWwnLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnXG5dLCBmdW5jdGlvbigkLF8pIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFhNTDJIVE1MID0ge1xuICAgICAgICBfZG9jOiBmdW5jdGlvbih4bWwpIHtcbiAgICAgICAgICAgIHZhciB4bWxEb2M7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHhtbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB4bWxEb2MgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHhtbCwndGV4dC94bWwnKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoeG1sIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICB4bWxEb2MgPSB4bWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBkb2N1bWVudCBpbnB1dCBpbiBYTUwySFRNTFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh4bWxEb2MgPT0gbnVsbCB8fCAoIXhtbERvYy5oYXNPd25Qcm9wZXJ0eSgnZ2V0RWxlbWVudHNCeVRhZ05hbWUnKSAmJiB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3BhcnNlcmVycm9yJykubGVuZ3RoID4gMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgZG9jdW1lbnQgaW4geG1sMmh0bWxcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geG1sRG9jO1xuICAgICAgICB9LFxuICAgICAgICAvLyByZXR1cm4gSFRNTCBvciBKU09OIHN0cmluZyBmcm9tIFhTTFQgdHJhbnNmb3JtYXRpb25cbiAgICAgICAgeG1sMmh0bWw6IGZ1bmN0aW9uKHhtbCx4c2wscGFyYW1zLG1vZGUpIHtcbiAgICAgICAgICAgIHZhciB4bWxEb2MgPSB0aGlzLl9kb2MoeG1sKSxcbiAgICAgICAgICAgICAgICB4c2xEb2MgPSB0aGlzLl9kb2MoeHNsKTtcbiAgICAgICAgICAgIHZhciB4c2x0UHJvY2Vzc29yID0gbmV3IFhTTFRQcm9jZXNzb3IoKTtcbiAgICAgICAgICAgIHhzbHRQcm9jZXNzb3IuaW1wb3J0U3R5bGVzaGVldCh4c2xEb2MpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhwYXJhbXMpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgICAgICB4c2x0UHJvY2Vzc29yLnNldFBhcmFtZXRlcihudWxsLGtleSxwYXJhbXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZG9jID0geHNsdFByb2Nlc3Nvci50cmFuc2Zvcm1Ub0RvY3VtZW50KHhtbERvYyk7XG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vPHRyYW5zZm9ybWlpeDpyZXN1bHQ+Li4uPC90cmFuc2Zvcm1paXg6cmVzdWx0PlxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgPSBkb2MuYm9keS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvciBpbiBYU0xUIHRyYW5zZm9ybTogJyArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gWE1MMkhUTUw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvYXBwJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnLFxuICAgICdyb3V0ZXMvcm91dGVyJyxcbiAgICAnbW9kZWxzL2lzc3VlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFJvdXRlcixJc3N1ZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcHBNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciBpc3N1ZSA9IG5ldyBJc3N1ZU1vZGVsKHsgY29uZmlnOiBvcHRzLmNvbmZpZyB9KTtcbiAgICAgICAgICAgIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgICAgICAgcm91dGVzOiBvcHRzLmNvbmZpZy5wYWdlcy5yb3V0ZXNcbiAgICAgICAgICAgICAgICAsIGNvbmZpZzogb3B0cy5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgaXNzdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIEFwcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2FydGljbGUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2ZldGNoeG1sJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2dlb2pzb24ueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEZldGNoWE1MLEFzeW5jSW5pdCxYTUwySFRNTCxnZW9Kc29uWHNsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciAkZ2V0ID0gdGhhdC5mZXRjaFhNTCh0aGF0LmdldCgncGF0aCcpKTtcbiAgICAgICAgICAgICQud2hlbigkZ2V0KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgneG1sJywgZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgLy9UT0RPOiAneG1sJzogc2VyaWFsaXplPyBhbmQgY2FjaGUgdG8gbG9jYWxzdG9yYWdlXG4gICAgICAgICAgICAvLyBhZGQgYWRhcHRlciBmb3IgYWNjZXNzIHRocm91Z2ggLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgIFwieG1sXCIgICA6IG51bGwsICAgICAvLyBEb2N1bWVudFxuICAgICAgICAgICAgXCJtYXJrZXJcIiA6IG51bGwgICAgIC8vIGFzc29jaWF0ZWQgbWFwbWFya2VyIG9iamVjdCwgbmVlZGVkIGZvciBUT0MgbGlua2FnZVxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdhY3RpdmUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zZWxlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbmFjdGl2ZScpO1xuICAgICAgICB9LFxuICAgICAgICBnZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBnZW9qc29uID0gJ3t9JztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHhtbCA9IHRoaXMuZ2V0KCd4bWwnKTtcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IHRoaXMueG1sMmh0bWwoeG1sLCBnZW9Kc29uWHNsLCB7fSwgJ3RleHQnKTtcbiAgICAgICAgICAgICAgICBnZW9qc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgdG8ganNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdlb2pzb247XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEZldGNoWE1MKTtcbiAgICBfLmV4dGVuZChBcnRpY2xlTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtb2RlbHMvYXJ0aWNsZSdcbiAgICAsICdjb2xsZWN0aW9ucy9hcnRpY2xlcydcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEFydGljbGVNb2RlbCxBcnRpY2xlQ29sbGVjdGlvbixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgICA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHZhciBhcnRkaXIgID0gYXJncy5jb25maWcuYXJ0aWNsZXMucGF0aEJhc2U7XG4gICAgICAgICAgICBpZiAoIWFydGRpci5tYXRjaCgvXFwvJC8pKSBhcnRkaXIgKz0gJy8nO1xuICAgICAgICAgICAgdmFyIGZpbGVzICAgPSBhcmdzLmNvbmZpZy5hcnRpY2xlcy5maWxlcztcbiAgICAgICAgICAgIHZhciBjb2wgICAgID0gbmV3IEFydGljbGVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ2NvbGxlY3Rpb24nLCBjb2wpO1xuICAgICAgICAgICAgLy8gZml4IGxlbmd0aCBvZiBhcnRpY2xlcyBhcnJheVxuICAgICAgICAgICAgdmFyIGFydGljbGVzID0gXy5tYXAoXy5yYW5nZShmaWxlcy5sZW5ndGgpLCBmdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWQ7fSk7XG4gICAgICAgICAgICAvLyBhcnRpY2xlcyBjb25zdHJ1Y3RlZCBzeW5jLCBzbyBhcnRpY2xlIG9iamVjdHMgYWRkZWQgdG8gbGlzdCBieSBpbmRleFxuICAgICAgICAgICAgXy5lYWNoKGZpbGVzLCBmdW5jdGlvbihmaWxlLGkpIHtcbiAgICAgICAgICAgICAgICBhcnRpY2xlc1tpXSA9IG5ldyBBcnRpY2xlTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlaWQ6ICBpLFxuICAgICAgICAgICAgICAgICAgICBhcnRpY2xlZGlyOiBhcnRkaXIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6ICAgICAgIGFydGRpciArIGZpbGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgaW5pdHMgPSBfLm1hcChhcnRpY2xlcywgZnVuY3Rpb24oYXJ0aWNsZSl7cmV0dXJuIGFydGljbGUuaW5pdCgpO30pO1xuICAgICAgICAgICAgLy8gTk9URTogLmZhaWwoKSBpcyBub3QgY2FsbGVkOyBmYWlsdXJlIGlzIGhhbmRsZWQgaW4gLmFsd2F5cygpXG4gICAgICAgICAgICAkLndoZW4oe30saW5pdHMpLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKGFydGljbGVzKTtcbiAgICAgICAgICAgICAgICB0aGF0Lm9uKCdzZWxlY3QnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX3NlbGVjdEFydGljbGUoYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseShudWxsLGluaXRzKS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGluaXRzLCBmdW5jdGlvbigkcHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkcHJvbWlzZS5zdGF0ZSgpID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcImFjdGl2ZUFydGljbGVcIiA6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc2hvdyBhbiBhcnRpY2xlIGFuZCB0aGUgY29ycmVzcG9uZGluZyBwaW5cbiAgICAgICAgLy8gYXJ0aWNsZSBtYXkgYmUgZWl0aGVyIGFuIGluZGV4IGludG8gdGhlIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gKGUuZy4sIHdoZW4gcHJvdmlkZWQgYnkgYSB1cmwpIG9yIGFuIEFydGljbGVNb2RlbFxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBzZWxlY3RlZCBieSBhIG1hcCBtYXJrZXIpXG4gICAgICAgIF9zZWxlY3RBcnRpY2xlOiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgY29sID0gdGhhdC5nZXQoJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgIHZhciBhcnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFydGljbGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgYXJ0ID0gYXJ0aWNsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFydGljbGUgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcnRpY2xlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFydCA9IGNvbC5hdChhcnRpY2xlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJCYWQgYXJndW1lbnQgdG8gbW9kZWxzL2lzc3VlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhdm9pZCB1bi0gYW5kIHJlLXJlbmRlcmluZyBhbiBhbHJlYWR5LXZpZXdlZCBhcnRpY2xlXG4gICAgICAgICAgICBpZiAoKHRoaXMuZ2V0KCdhY3RpdmVBcnRpY2xlJykgIT09IG51bGwpICYmXG4gICAgICAgICAgICAgICAgKHRoaXMuZ2V0KCdhY3RpdmVBcnRpY2xlJykgPT0gIGFydGljbGUpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0KCdhY3RpdmVBcnRpY2xlJykpIHRoaXMuZ2V0KCdhY3RpdmVBcnRpY2xlJykudW5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldCgnYWN0aXZlQXJ0aWNsZScsIGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB0aGlzIGludm9sdmVzIGFzeW5jIGluaXRpYWxpemF0aW9uXG4gICAgICAgICAgICBhcnQuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCd1cGRhdGUnLCBhcnQpO1xuICAgICAgICAgICAgICAgIGFydC5zZWxlY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29sbGVjdGlvbnMvbWFya2VycydcbiAgICAsICdtb2RlbHMvbWFya2VyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTWFya2Vyc0NvbGxlY3Rpb24sTWFya2VyTW9kZWwsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgaWYgKHRoYXQuaXNzdWUgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGlzc3VlIG1vZGVsIGluIG1hcCBtb2RlbCcpO1xuICAgICAgICAgICAgdGhhdC5zZXQoJ3JvdXRlcicsIGFyZ3Mucm91dGVyKTtcbiAgICAgICAgICAgIGlmICghYXJncy5yb3V0ZXIpIHRocm93IG5ldyBFcnJvcignTm8gcm91dGVyIGluIE1hcE1vZGVsJyk7XG4gICAgICAgICAgICB2YXIgJGNvbmZpZ0RlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTihhcmdzLmNvbmZpZy5tYXAuY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ21hcGNvbmZpZycsIGRhdGEpO1xuICAgICAgICAgICAgICAgICRjb25maWdEZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAkY29uZmlnRGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gbG9hZCBtYXAgY29uZmlnIGZpbGU6ICcgKyBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxbdGhhdC5pc3N1ZS5pbml0KCksICRjb25maWdEZWZdKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuX21ha2VDb2xsZWN0aW9uKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgeyB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTsgfSxcbiAgICAgICAgICAgICAgICAgICAgZmFpbDogICAgZnVuY3Rpb24oKSB7IHRoYXQuJGRlZi5yZWplY3QoKTsgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBUT0RPOiBpc3N1ZSBhcyB0byB3aGV0aGVyIGZhaWwoKS9hbHdheXMoKSBpcyBjYWxsZWQgb24gZmFpbHVyZSBoZXJlO1xuICAgICAgICAgICAgLy8gZmFpbCgpIHNob3VsZCBiZSBjYWxsZWQgb24gZmFsdXJlXG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtYXBjb25maWdcIiAgICAgOiB7fVxuICAgICAgICB9LFxuICAgICAgICBfbWFrZUNvbGxlY3Rpb24gOiBmdW5jdGlvbihhcnRpY2xlcyxjYnMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZHMgPSBbXTtcbiAgICAgICAgICAgIHZhciBjb2wgPSBuZXcgTWFya2Vyc0NvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIHZhciBtYXJrZXJzID0gXy5tYXAoXy5yYW5nZShhcnRpY2xlcy5sZW5ndGgpLCBmdW5jdGlvbigpe3JldHVybiB1bmRlZmluZWQ7fSk7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBlcnJvck1zZyA9ICcnO1xuICAgICAgICAgICAgYXJ0aWNsZXMuZm9yRWFjaChmdW5jdGlvbihhcnRpY2xlLGkpe1xuICAgICAgICAgICAgICAgIHZhciAkYXJ0RGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkcy5wdXNoKCRhcnREZWYpO1xuICAgICAgICAgICAgICAgIGFydGljbGUuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtbTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tID0gbmV3IE1hcmtlck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlICAgICA6IHRoYXQuaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFydGljbGUgICA6IGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGpzb24gICAgICA6IGFydGljbGUuZ2VvanNvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByb3V0ZXIgICAgOiB0aGF0LnJvdXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIGZhaWx1cmUgdG8gY3JlYXRlIGdlb2pzb24gZnJvbSBhcnRpY2xlLCB3YXJuXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBkbyBub3QgYmxvY2sgbWFwXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yTXNnICs9IChcIlxcblwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcnREZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJzW2ldID0gbW07XG4gICAgICAgICAgICAgICAgICAgICRhcnREZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoe30sZGVmZXJyZWRzKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbC5hZGQobWFya2Vycyk7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgICAgICAgICAgIGNicy5zdWNjZXNzKCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNicy5mYWlsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcE1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXJrZXInLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWFya2VyTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICBcImFydGljbGVcIiAgIDogbnVsbCxcbiAgICAgICAgXCJqc29uXCIgICAgICA6IHt9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LmFwcCA9IGFyZ3MuYXBwO1xuICAgICAgICAgICAgdGhhdC5hcnRpY2xlID0gYXJncy5hcnRpY2xlO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIGFyZ3MuaXNzdWUuaW5pdCgpLmRvbmUoZnVuY3Rpb24oaXNzdWUpIHtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGFuIGFydGljbGUgaXMgbWFkZSBhY3RpdmUgKGUuZy4sIHRocm91Z2ggdGhlXG4gICAgICAgICAgICAgICAgLy8gVE9DKSwgcHJvcG9nYXRlIHRocm91Z2ggdG8gdGhlIG1hcCBwYXJ0IG9mIHRoZSBhcHBcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQuYXJ0aWNsZSwgJ2FjdGl2ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXJrZXJNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3JvdXRlcy9yb3V0ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9jbGVhcidcbiAgICAsICd2aWV3cy9pc3N1ZSdcbiAgICAsICd2aWV3cy9tYXAnXG4gICAgLCAndmlld3MvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LENsZWFyVmlldyxJc3N1ZVZpZXcsTWFwVmlldyxNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgICAgIHBhZ2VzICAgOiB7fSwgICAvLyBjb25maWcgZm9yIHN1cHBvcnRlZCBwYWdlc1xuICAgICAgICBjb25maWcgIDoge30sICAgLy8gZ2xvYmFsIHNpdGUgY29uZmlndXJhdGlvbiwgaS5lLiwgc2l0ZS5qc29uXG4gICAgICAgIGlzc3VlICAgOiBudWxsLCAvLyBJc3N1ZU1vZGVsIGZvciB0aGlzIGFwcFxuICAgICAgICBtYXBWaWV3IDogbnVsbCwgLy8gTWFwVmlld1xuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IG9wdHMuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5wYWdlcyAgPSBvcHRzLmNvbmZpZy5wYWdlcztcbiAgICAgICAgICAgIHRoaXMuaXNzdWUgID0gb3B0cy5pc3N1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNzdWUuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMucm91dGVyLmhpc3RvcnkgPSB0cnVlIGJ5IGRlZmF1bHQsIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXModGhhdC5wYWdlcy5yb3V0ZXIsJ2hpc3RvcnknKSAmJiAhIXRoYXQucGFnZXMucm91dGVyLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKEJhY2tib25lLmhpc3RvcnkuZnJhZ21lbnQgPT09IGZyYWdtZW50KSByZXR1cm47XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKGZyYWdtZW50LG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBwYWdlOiBmdW5jdGlvbihwYWdlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgcGFnZUNvbmZpZztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWdlKSBwYWdlID0gdGhpcy5wYWdlcy5ob21lO1xuICAgICAgICAgICAgICAgIHBhZ2VDb25maWcgPSB0aGlzLnBhZ2VzLnBhZ2VzW3BhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlQ29uZmlnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWcgaW4gcm91dGVyL3BhZ2UnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlKCc0MDQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSA8Ym9keT5cbiAgICAgICAgICAgIChuZXcgQ2xlYXJWaWV3KCkpLnJlbmRlcigpO1xuICAgICAgICAgICAgXy5lYWNoKHBhZ2VDb25maWcsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXdOYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXQuaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIGNsb25lIGNvbmZpZyB0byBhdm9pZCBnbG9iYWwgY2hhbmdlc1xuICAgICAgICAgICAgICAgIHZhciBjb25maWcgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBjKSk7XG4gICAgICAgICAgICAgICAgaWYgKF8uaGFzKGNvbmZpZywgJ3ZpZXcnKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSA9IGNvbmZpZy52aWV3O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uZmlnLCAncGFydGlhbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gJ3ZpZXdzL3BhcnRpYWwnO1xuICAgICAgICAgICAgICAgICAgICBjb25maWcucGFydGlhbC5wYWdlID0gdGhhdC5wYWdlcy5wYXRoQmFzZSArIGNvbmZpZy5wYXJ0aWFsLnBhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBfLmV4dGVuZChhcmdzLGNvbmZpZy5wYXJ0aWFsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF8uaGFzKGNvbmZnLCAnZnVsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gY29uZmlnLmZ1bGwucGFnZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgcGFnZSB0eXBlIGluIHJvdXRlcjogJyArIHBhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXF1aXJlKFt2aWV3TmFtZV0sIGZ1bmN0aW9uKFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdi5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhcnRpY2xlIDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICQoJyN0aXRsZXBhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBhcmdzID0ge1xuICAgICAgICAgICAgICAgICAgY29uZmlnOiB0aGF0LmNvbmZpZ1xuICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlXG4gICAgICAgICAgICAgICAgLCByb3V0ZXI6IHRoYXRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoJCgnI2lzc3VlJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzdiA9IG5ldyBJc3N1ZVZpZXcoYXJncyk7XG4gICAgICAgICAgICAgICAgaXN2LnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNtYXAnKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFZpZXcgPSBuZXcgTWFwVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFZpZXcucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJCgnI21lbnUnKS5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBtbnYgPSBuZXcgTWVudVZpZXcoYXJncyk7XG4gICAgICAgICAgICAgICAgbW52LnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2VsZWN0IHRoZSBhcnRpY2xlIGluZGljYXRlZCBieSB0aGUgdXJsJ3Mgcm91dGUgb25seSBhZnRlclxuICAgICAgICAgICAgLy8gdGhlIG1hcCBoYXMgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICQud2hlbi5hcHBseSh7fSxbdGhhdC5tYXBWaWV3LmluaXQoKV0pLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5pc3N1ZS50cmlnZ2VyKCdzZWxlY3QnLCBpZCk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFJvdXRlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3ZpZXdzL2FwcCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBzaWduYWwgPSB7fTtcbiAgICB2YXIgQXBwVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXBwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZScsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL2RvbXdhdGNoZXInLFxuICAgICdtaXhpbnMveG1sMmh0bWwnLFxuICAgICd0ZXh0IXhzbC9hcnRpY2xlLnhzbCcsXG4gICAgJ3RleHQhcGFydGlhbHMvcG9wb3Zlci5odG1sJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wb3BvdmVyLWNvbnRlbnQuaHRtbCcsXG4gICAgJ3RleHQhcGFydGlhbHMvbGlnaHRib3gtdGl0bGUuaHRtbCcsXG4gICAgJ3NsaWRlc2pzJyxcbiAgICAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixYTUwySFRNTCx4c2wscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgaWQ6ICdhcnRpY2xlJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRlbCA9ICQoJyMnICsgdGhhdC5pZCk7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRoaXMueG1sMmh0bWwoXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5nZXQoJ3htbCcpLFxuICAgICAgICAgICAgICAgIHhzbCxcbiAgICAgICAgICAgICAgICB7XCJhcnRpY2xlLWRpclwiOiB0aGF0LmNvbmZpZy5hcnRpY2xlcy5wYXRoQmFzZX1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICQoJy5hcnRpY2xlLWNvbnRlbnQnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcjJyt0aGlzLmlkKS5hcHBlbmQoaHRtbCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhcnRpY2xlIGxvYWQgZXJyb3I6IFwiICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnI2Zvb3RlcicpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgJCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdiZWZvcmUtZm9vdGVyJykuYWRkQ2xhc3MoJ25vLWZvb3RlcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnBvc3Rwcm9jZXNzKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaGFuZGxlIGFydGljbGUgaW1hZ2VzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGF0O1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99LFxuICAgICAgICBwb3N0cHJvY2VzczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGp1c3QgaGVpZ2h0IG9mIGFydGljbGUgYm9keVxuICAgICAgICAgICAgLy8gVE9ETzogaGFuZGxlIGluIGNzc1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQoJyNhcnRpY2xlIGFydGljbGUnKS5oZWlnaHQoKSAtICQoJyNoZWFkZXInKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgICQoJyNib2R5JykuY3NzKHtoZWlnaHQ6aGVpZ2h0fSk7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXBsKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2VzIHRoYXQgZmFpbCB0byBsb2FkLCBzaW5jZSB3ZSBjYW5ub3QgZG9cbiAgICAgICAgICAgIC8vIGEgZmlsZSB0ZXN0IHdoZW4gcnVubmluZyB0aGUgeHNsXG4gICAgICAgICAgICB2YXIgZGVmcyA9IFtdO1xuICAgICAgICAgICAgdGhhdC4kZWwuZmluZCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGltZyl7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZUNsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHNvbWUgdGltZSBiZWZvcmUgZmFpbHVyZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMucHVzaCgkZGVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZnMpLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZS5yZW1vdmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaW1hZ2UtbG9hZGluZycpLnJlbW92ZUNsYXNzKCdpbWFnZS1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgLy8gY29uZmlndXJlIHNsaWRlc2pzOyB1cCB0byBub3csICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICAgICAgLy8gaGFzIGFwcGxpZWRcbiAgICAgICAgICAgICAgICAkKFwiI3NsaWRlc1wiKS5zbGlkZXNqcyh7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogKCQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcImZhZGVcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgkKCdpbWcuc2xpZGVzanMtc2xpZGUnKS5sZW5ndGggPiAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkOiAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNyb3NzZmFkZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG9uIGxvYWQgb2YgZmlyc3QgcGljXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQ6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgKG51bWJlciAtIDEpICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbWF4SGVpZ2h0OiAkKFwiLnNsaWRlc2pzLWNvbnRhaW5lclwiKS5oZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSAoJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKSAtICRpbWcud2lkdGgoKSkvMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IHBhcnNlSW50KCRpbWcuY3NzKCdwYWRkaW5nLWxlZnQnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgbGVmdDogbGVmdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7IHZpc2liaWxpdHk6IFwidmlzaWJsZVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxlZCBzdGFydCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsZWQgZW5kIG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdJbWcgPSBudW1iZXIgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkaW1nID0gJChcIi5zbGlkZXNqcy1jb250cm9sXCIpLmNoaWxkcmVuKCc6ZXEoJysgbmV3SW1nICsgJyknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB3aWR0aDogICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBwb3NpdGlvbjogIFwicmVsYXRpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbWcuY3NzKHsgdmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgICAgICAgZ2FsbGVyeTp7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlU3JjOiBmdW5jdGlvbigkaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gJGl0ZW0uZWwuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBjdCA9IF8udGVtcGxhdGUobGlnaHRib3hUaXRsZVRlbXBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gcGN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJHBvLmZpbmQoJy5oZWFkJykudGV4dCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoQXJ0aWNsZVZpZXcucHJvdG90eXBlLFhNTDJIVE1MKTtcbiAgICByZXR1cm4gQXJ0aWNsZVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2NsZWFyJywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJyxcbiAgICAnYmFja2JvbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQ2xlYXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnYm9keScpLmVtcHR5KCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQ2xlYXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2lzc3VlLmh0bWwnXG4gICAgLCAndmlld3MvYXJ0aWNsZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLEFydGljbGVWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAgICAgICAgICcjaXNzdWUnLFxuICAgICAgICB0ZW1wbGF0ZTogICBfLnRlbXBsYXRlKHRtcGwpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwub24oJ3VwZGF0ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnNlbGVjdChhcnRpY2xlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0bXBsKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXYgPSBuZXcgQXJ0aWNsZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICBhcnRpY2xlXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoYXQubW9kZWwuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoYXRcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdC5tb2RlbC5yb3V0ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXJ0aWNsZS5vbignYWN0aXZlJywgICBhdi5yZW5kZXIsIGF2KTtcbiAgICAgICAgICAgIGFydGljbGUub24oJ2luYWN0aXZlJywgYXYucmVtb3ZlLCBhdik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gSXNzdWVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcC5odG1sJ1xuICAgICwgJ21vZGVscy9tYXAnXG4gICAgLCAndmlld3MvbWFya2VyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsTCxtYXBQYXJ0aWFsLE1hcE1vZGVsLE1hcmtlclZpZXcsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBpZDogICAgICAnbWFwJyxcbiAgICAgICAgdGFnTmFtZTogJ2RpdicsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IE1hcE1vZGVsKGFyZ3MpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhhdC5pZCkuY2hpbGRyZW4oKS5sZW5ndGggPiAwKSByZXR1cm47XG4gICAgICAgICAgICAvLyBwdXQgZGl2I21hcCBpbiBwbGFjZVxuICAgICAgICAgICAgLy8gbm90ZTogbWFwLmpzb24gaGFzIHRoZSBAaWQgdmFsdWU6IHtcImlkXCIgOiBcIm1hcFwifVxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChtYXBQYXJ0aWFsKTtcbiAgICAgICAgICAgIC8vIExlYWZsZXQgY29uZmlnXG4gICAgICAgICAgICB0aGlzLm1vZGVsLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb2wgICAgICAgPSB0aGF0Lm1vZGVsLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgICAgIHZhciBtYXBjb25maWcgPSB0aGF0Lm1vZGVsLmdldCgnbWFwY29uZmlnJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCAgICAgICA9IG5ldyBMLk1hcChtYXBjb25maWcuaWQsIG1hcGNvbmZpZy5tYXApO1xuICAgICAgICAgICAgICAgIHZhciBvcGVucG9wdXAgPSB7fTtcbiAgICAgICAgICAgICAgICB2YXIgcG9wdXBpZCA9IGZ1bmN0aW9uKGxhdGxuZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGF0bG5nLmxhdC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgKyBsYXRsbmcubG5nLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoYXQuY29uZmlndXJlTWFwKG1hcCxtYXBjb25maWcsb3BlbnBvcHVwLHBvcHVwaWQpO1xuICAgICAgICAgICAgICAgIC8vIGxldCBtYXAgcmVuZGVyIHdoaWxlIG1hcmtlcnMgYXJlIGFkZGVkXG4gICAgICAgICAgICAgICAgbWFwLmludmFsaWRhdGVTaXplKCk7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbC5mb3JFYWNoKGZ1bmN0aW9uKG1hcmtlck1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZE1hcmtlclRvTWFwKG1hcmtlck1vZGVsLG1hcCxvcGVucG9wdXAscG9wdXBpZCxtYXBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICAgICAgfSwgdGhhdC5jb25maWcubWFwLm1hcmtlckRlbGF5KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgY29uZmlndXJlTWFwIDogZnVuY3Rpb24obWFwLG1hcGNvbmZpZyxvcGVucG9wdXAscG9wdXBpZCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0aWxlbGF5ZXIgICA9IG5ldyBMLlRpbGVMYXllcihtYXBjb25maWcudGlsZUxheWVyLnVybCwgbWFwY29uZmlnLnRpbGVMYXllci5vcHRzKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9IEwuY29udHJvbC5zY2FsZShtYXBjb25maWcuc2NhbGUpO1xuICAgICAgICAgICAgbWFwLnNldFZpZXcobmV3IEwuTGF0TG5nKG1hcGNvbmZpZy52aWV3LmxhdCwgbWFwY29uZmlnLnZpZXcubG5nKSwgbWFwY29uZmlnLnZpZXcuem9vbSk7XG4gICAgICAgICAgICBtYXAuYWRkTGF5ZXIodGlsZWxheWVyKTtcbiAgICAgICAgICAgIHNjYWxlLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICAvLyB0cmFjayB0aGUgY3VycmVudGx5IG9wZW4gcG9wdXBcbiAgICAgICAgICAgIG1hcC5vbigncG9wdXBvcGVuJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gZXZ0LnBvcHVwO1xuICAgICAgICAgICAgICAgIHZhciBwb3B1cExhdExuZyA9IHBvcHVwLmdldExhdExuZygpO1xuICAgICAgICAgICAgICAgIHZhciBlZGdlTGF0TG5nID0gbWFwLmNvbnRhaW5lclBvaW50VG9MYXRMbmcoTC5Eb21VdGlsLmdldFZpZXdwb3J0T2Zmc2V0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhcnRpY2xlJykpKTtcbiAgICAgICAgICAgICAgICB2YXIgZHgsIG9mZnNldCwgcGFkO1xuICAgICAgICAgICAgICAgIC8vIHBhbiBlYXN0IGlmIHRoZSBwb3B1cCBpcyBjb3ZlcmVkIGJ5IHRoZSBhcnRpY2xlIChpLmUuLCBpcyB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyByaWdodCBvZiB0aGUgYXJ0aWNsZSdzIGxlZnQgZWRnZSlcbiAgICAgICAgICAgICAgICBpZiAocG9wdXBMYXRMbmcubG5nID4gZWRnZUxhdExuZy5sbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gb2Zmc2V0IGlzIHRoZSBhbW91bnQgb2YgdGhlIHBvcHVwIHRoYXQgd291bGQgaGFuZyBvdmVyIHVuZGVyIHRoZSBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgIC8vIGR1ZSB0byB0aGUgcG9wdXAncyB3aWR0aFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAkKHBvcHVwLmdldENvbnRlbnQoKSkuY2xvc2VzdCgnLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyJykuZmlyc3QoKS53aWR0aCgpLzJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gKG1hcC5sYXRMbmdUb0xheWVyUG9pbnQoZWRnZUxhdExuZykueCAtIG1hcC5sYXRMbmdUb0xheWVyUG9pbnQobWFwLmdldENlbnRlcigpKS54KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFkIGlzIGEgc2xpZ2h0IHJlbGllZiBiZXR3ZWVuIHRoZSBwb3B1cCBhbmQgdGhlIGFydGljbGVcbiAgICAgICAgICAgICAgICAgICAgcGFkID0gTC5wb2ludChwb3B1cC5vcHRpb25zLmF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQgfHwgcG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZyk7XG4gICAgICAgICAgICAgICAgICAgIHBhZCA9IHBhZCA/IHBhZC54IDogMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gZHggaXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIGNlbnRlciBvZiB0aGUgbWFwIGFuZCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFwIG1hcmtlciBmb3IgdGhpcyBwb3B1cFxuICAgICAgICAgICAgICAgICAgICBkeCA9IG1hcC5sYXRMbmdUb0xheWVyUG9pbnQocG9wdXBMYXRMbmcpLnhcbiAgICAgICAgICAgICAgICAgICAgICAgLSBtYXAubGF0TG5nVG9MYXllclBvaW50KG1hcC5nZXRDZW50ZXIoKSkueDtcbiAgICAgICAgICAgICAgICAgICAgbWFwLnBhbkJ5KFtkeCArIG9mZnNldCArIHBhZCwwXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGV2ZW50IGxhdGVuY3kgYmV0d2VlbiBsZWFmbGV0IGFuZCBiYWNrYm9uZVxuICAgICAgICAgICAgICAgIC8vIGFwcGVhcnMgdG8gY2F1c2UgcG9wdXBzIHRvIGNvbGxhcHNlIGVycmF0aWNhbGx5XG4gICAgICAgICAgICAgICAgLy8gaW4gRmlyZWZveCB3aGVuIGNsaWNraW5nIG1hcCBwaW5zXG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKHBvcHVwTGF0TG5nKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKHBvcHVwTGF0TG5nKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbWFwLm9uKCdwb3B1cGNsb3NlJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5wb3B1cFtwb3B1cGlkKGV2dC5wb3B1cC5nZXRMYXRMbmcoKSldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BlbnBvcHVwW3BvcHVwaWQoZXZ0LnBvcHVwLmdldExhdExuZygpKV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIGFkZE1hcmtlclRvTWFwOiBmdW5jdGlvbihtYXJrZXJNb2RlbCxtYXAsb3BlbnBvcHVwLHBvcHVwaWQsbWFwY29uZmlnKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgICAgICAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdlb2pzb24gICAgID0gbWFya2VyTW9kZWwuZ2V0KCdqc29uJyk7XG4gICAgICAgICAgICB2YXIgbWFya2VyVmlldyAgPSBuZXcgTWFya2VyVmlldyh7bW9kZWw6IG1hcmtlck1vZGVsLCByb3V0ZXI6IHRoYXQucm91dGVyfSk7XG4gICAgICAgICAgICBtYXJrZXJWaWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgTC5nZW9Kc29uKGdlb2pzb24sIHtcbiAgICAgICAgICAgICAgICAvLyBmZWF0dXJlIGlzIHRoZSBnZW9qc29uLCBhIHJhdyBKUyBvYmplY3RcbiAgICAgICAgICAgICAgICAvLyBtYXBNYXJrZXIgaXNcbiAgICAgICAgICAgICAgICBvbkVhY2hGZWF0dXJlOiBmdW5jdGlvbiAoZmVhdHVyZSwgbWFwTWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgcG9wdXAgdG8gdGhpcyBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvcHVwID0gTC5wb3B1cChtYXBjb25maWcuZmVhdHVyZXMucG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zZXRDb250ZW50KG1hcmtlclZpZXcuZWwpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIuYmluZFBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgY2xpY2sgaGFuZGxlciBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciwgd2hpY2ggd291bGQgY2xvc2UgdGhlIHBvcHVwIGlmIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJNb2RlbC50cmlnZ2VyKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC5jb25maWcubWFwLmhvdmVyUG9wdXApIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBwbGljYXRpb24gb2JqZWN0LCBub3QgbGVhZmxldGpzXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlck1vZGVsLm9uKCdhY3RpdmUnLCBmdW5jdGlvbihhcnRpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5wb3B1cFtwb3B1cGlkKG1hcE1hcmtlci5nZXRMYXRMbmcoKSldKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICAgICAgICAgICBMLmljb24obWFwY29uZmlnLmZlYXR1cmVzLmljb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2thYmxlOiAgICAgICEhZmVhdHVyZS5wcm9wZXJ0aWVzLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogICAgICAgICAgKGZlYXR1cmUucHJvcGVydGllcy5tYXJrZXJuYW1lIHx8ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICAgICAgICBtYXBjb25maWcuZmVhdHVyZXMub3BhY2l0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpc2VPbkhvdmVyOiAgICBtYXBjb25maWcuZmVhdHVyZXMucmlzZU9uSG92ZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuYWRkVG8obWFwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL21hcmtlcicsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJyxcbiAgICAndGV4dCFwYXJ0aWFscy9tYXJrZXIuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXJrZXJWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgZWw6ICcnLFxuICAgICAgICByb3V0ZXI6IG51bGwsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICAvLyB3aGVuIGEgbWFya2VyIGlzIG1hZGUgYWN0aXZlIChlLmcuLCBieSBzZWxlY3Rpb25cbiAgICAgICAgICAgIC8vIG9mIGEgbWFyayBpbiB0aGUgbWFwKSwgcHJvcG9nYXRlIHRoZSBldmVudCB0byB0aGVcbiAgICAgICAgICAgIC8vIGlzc3VlLCBmb3IgdXBkYXRlcyBlbHNld2hlcmUgaW4gdGhlIGFwcGxpY2F0aW9uXG4gICAgICAgICAgICB0aGF0Lm1vZGVsLm9uKCdhY3RpdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gJ2FydGljbGUvJyArIHRoYXQubW9kZWwuYXJ0aWNsZS5nZXQoJ2FydGljbGVpZCcpO1xuICAgICAgICAgICAgICAgIHRoYXQucm91dGVyLm5hdmlnYXRlKHVybCwge3RyaWdnZXI6IHRydWV9KTtcbiAgICAgICAgICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgYXJ0aWNsZSBpcyBoYXMgYmVlbiBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIHRoYXQubW9kZWwuZ2V0KCdpc3N1ZScpLnRyaWdnZXIoJ3NlbGVjdCcsIHRoYXQubW9kZWwuZ2V0KCdhcnRpY2xlJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwuaHRtbChcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgdGhpcy5tb2RlbC5hcnRpY2xlLmdldCgnYXJ0aWNsZWlkJyksXG4gICAgICAgICAgICAgICAgICAgIGdlb2pzb246ICAgIHRoaXMubW9kZWwuYXJ0aWNsZS5nZW9qc29uKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBNYXJrZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tZW51JywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvbWVudS5odG1sJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ3ZpZXdzL2FydGljbGUvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxtZW51VG1wbCxET01XYXRjaGVyLEFydGljbGVNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgTWVudVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIHRlbXBsYXRlOiBfLnRlbXBsYXRlKG1lbnVUbXBsKSxcbiAgICAgICAgICBpZDogICAgICAnbWVudSdcbiAgICAgICAgLCB0YWdOYW1lOiAnZGl2J1xuICAgICAgICAsIGlzc3VlOiAgIG51bGxcbiAgICAgICAgLCBjb25maWc6ICB7fVxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLmlzc3VlICA9IGFyZ3MuaXNzdWU7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoJCgnIycgKyB0aGF0LmlkKS5jaGlsZHJlbigpLmxlbmd0aCAhPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5jb25maWcubWVudTtcbiAgICAgICAgICAgIC8vIHJlbmRlciBlYWNoIGl0ZW0gZnJvbSB0aGUgY29uZmlnIGZpbGUgdG8gYSA8bGk+XG4gICAgICAgICAgICAvLyBtdXN0IGJlIGRvbmUgYXN5bmMgZHVlIHRvIHJldHJpZXZhbCBvZiBwYXJ0aWFsIGZpbGVzXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICAgICAgICAgICAvLyBjYWNoZSBvZiB0ZW1wbGF0ZSBzdHJpbmdzOiB1cmwgPT4gdGVtcGxcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9ucyA9IHt9O1xuICAgICAgICAgICAgXy5lYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbaXRlbS5wYXJ0aWFsXSA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGl0ZW0uY29sbGVjdGlvbiA9PT0gXCJjb2xsZWN0aW9ucy9hcnRpY2xlc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dID0gdGhhdC5pc3N1ZS5nZXQoJ2NvbGxlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaGFuZGxlZCBjb2xsZWN0aW9uIHR5cGUgcmVxdWVzdGVkOiBcIiArIGl0ZW0uY29sbGVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZWFjaChfLmtleXModGVtcGxhdGVzKSwgZnVuY3Rpb24odXJsKSB7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgcmVxdWlyZShbJ3RleHQhJyArIHVybF0sIGZ1bmN0aW9uKHRlbXBsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlc1t1cmxdID0gXy50ZW1wbGF0ZSh0ZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goJGRlZi5wcm9taXNlKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW5kZXIgdGhlIG1lbnUgYXMgYSA8ZGl2PlxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICQud2hlbi5hcHBseSgkLCBwcm9taXNlcykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0saSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gaXRlbS5wYXJ0aWFsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydGVyID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJDb250ZW50ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3J0S2V5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAncGFnZScgfHwgaXRlbS50eXBlID09PSAnc2VwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSAodGVtcGxhdGVzW3VybF0pKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ21lbnUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tpdGVtLmNvbGxlY3Rpb25dLm1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uKG1vZGVsLGopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiAgICA9IGl0ZW0uaXRlbS5ocmVmLnJlcGxhY2UoJzppJywgaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtdiAgICAgPSBuZXcgQXJ0aWNsZU1lbnVWaWV3KHttb2RlbDptb2RlbH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgID0gYW12LnJlbmRlcih7aHJlZjogJyMnICsgaHJlZn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkbGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCBhbiA8bGk+IGVsZW1lbnQgaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdCT0RZJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubm9kZU5hbWUgPT09ICdMSScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0Lm91dGVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGRvY3VtZW50IGVsZW1lbnQgZm9yIHN1Ym1lbnU6ICcgKyByZXN1bHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlc3VsdCB0eXBlIGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmF0dHIoJ2RhdGEtc29ydC1rZXknKV0gPSAkbGkuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0ZXJbJGxpLmZpbmQoJ2EnKS50ZXh0KCldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3J0S2V5cyA9IF8ua2V5cyhzb3J0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMuc29ydChmdW5jdGlvbihhLGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5sb2NhbGVDb21wYXJlKGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfLmVhY2goc29ydEtleXMsIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGVudCArPSBzb3J0ZXJba2V5XVswXS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHN1YkNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJyMnICsgdGhhdC5pZCkuZW1wdHkoKS5hcHBlbmQodGhhdC50ZW1wbGF0ZSh7Y29udGVudDogY29udGVudH0pKTtcbiAgICAgICAgICAgICAgICAvLyBjb25maXJtIHRoYXQgdGhlIG1lbnUgaGFzIGxvYWRlZFxuICAgICAgICAgICAgICAgIHZhciAkZmFpbERlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICAkZmFpbERlZi5mYWlsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC53YXRjaERPTSg1MDAsICcjJyArIHRoYXQuaWQsICRmYWlsRGVmKTtcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGJ1aWxkIG1lbnUuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNZW51Vmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIE1lbnVWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYWdlJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy9kb213YXRjaGVyJyxcbiAgICAndGV4dCFwYXJ0aWFscy9wYWdlLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixwYWdlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYWdlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZChwYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy53YXRjaERPTSgxMDAwLHRoYXQuZWwsJGRlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYWdlVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgcmV0dXJuIFBhZ2VWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9wYXJ0aWFsJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9kb213YXRjaGVyJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRE9NV2F0Y2hlcixBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFBhcnRpYWxWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICBlbDogJycsXG4gICAgICAgIHBhZ2U6ICcnLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5lbCAgID0gb3B0cy5lbDtcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyBvcHRzLnBhZ2VdLCBmdW5jdGlvbihodG1sKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5wYWdlID0gaHRtbDtcbiAgICAgICAgICAgICAgICB0aGF0LiRkZWYucmVzb2x2ZSh0aGF0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciAkd2F0Y2hEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0LmluaXQoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhhdC5lbCkuYXBwZW5kKHRoYXQucGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCR3YXRjaERlZik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChQYXJ0aWFsVmlldy5wcm90b3R5cGUsRE9NV2F0Y2hlcik7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIFBhcnRpYWxWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFVzZXJFcnJvck1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICAgIFwibXNnXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdtc2cnLCBhcmdzLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSk7ICAgIFxuICAgIHJldHVybiBVc2VyRXJyb3JNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbi8qXG4gKiBUaGlzIGlzIG1lYW50IHRvIGJlIGV4dGVuZGVkIGFzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHRoZVxuICogc2VjdGlvbnMgb2YgYW4gYXJ0aWNsZS5cbiAqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL21lbnUnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbWl4aW5zL3htbDJodG1sJyxcbiAgICAndGV4dCF4c2wvYXJ0aWNsZS1tZW51LnhzbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxYTUwySFRNTCxhbVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gdGhpcyB2aWV3IGlzIG1lYW50IHRvIGJlIGNhbGxlZCBvbmx5IGFmdGVyIHRoZSBjb3JyZXNwb25kaW5nXG4gICAgICAgICAgICAvLyBhcnRpY2xlIG1vZGVsIGhhcyBiZWVuIGluaXRpYWxpemVkXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlbC5pbml0KCkuc3RhdGUoKSAhPT0gJ3Jlc29sdmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IFwiVW5pbml0aWFsaXplZCBhcnRpY2xlIGluIEFydGljbGVNZW51Vmlld1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1lbnVpdGVtID0gdGhhdC54bWwyaHRtbCh0aGF0Lm1vZGVsLmdldCgneG1sJyksIGFtWHNsLCBwYXJhbXMpO1xuICAgICAgICAgICAgcmV0dXJuIG1lbnVpdGVtO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1lbnVWaWV3LnByb3RvdHlwZSxYTUwySFRNTCk7XG4gICAgcmV0dXJuIEFydGljbGVNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvZXJyb3IvdXNlcicsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ2JhY2tib25lJywgXG4gICAgJ3RleHQhcGFydGlhbHMvZXJyb3IvdXNlci5odG1sJ1xuXSwgZnVuY3Rpb24oJCxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZSh0bXBsKSxcbiAgICAgICAgZWw6ICQoJyNlcnJvckRpYWxvZycpLFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmh0bWwodGhpcy50ZW1wbGF0ZSh0aGlzLm1vZGVsLmF0dHJpYnV0ZXMpKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLm1vZGFsKHtrZXlib2FyZDogdHJ1ZSwgc2hvdzogdHJ1ZX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVXNlckVycm9yVmlldztcbn0pO1xuIiwicmVxdWlyZS5jb25maWcoe1xuICBwYXRoczoge1xuICAgIHRleHQ6ICAgICAgICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9yZXF1aXJlLXRleHQvMi4wLjEyL3RleHQubWluJyxcbiAgICBqcXVlcnk6ICAgICAnLy9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTIuMS40Lm1pbicsXG4gICAgYm9vdHN0cmFwOiAgJy8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMy40L2pzL2Jvb3RzdHJhcC5taW4nLFxuICAgIGJhY2tib25lOiAgICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9iYWNrYm9uZS5qcy8xLjEuMi9iYWNrYm9uZS1taW4nLFxuICAgIHVuZGVyc2NvcmU6ICcvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUtbWluJyxcbiAgICBsZWFmbGV0OiAgICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0JyxcbiAgICBzbGlkZXNqczogICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvc2xpZGVzanMvMy4wL2pxdWVyeS5zbGlkZXMubWluJyxcbiAgICBsaWdodGJveDogICAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbWFnbmlmaWMtcG9wdXAuanMvMS4wLjAvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLm1pbicsXG4gICAgcGFydGlhbHM6ICAgJy4uL3BhcnRpYWxzJyxcbiAgICB4c2w6ICAgICAgICAnLi4vc2NyaXB0L3hzbCcsXG4gICAgcGFnZXM6ICAgICAgJy4uL3BhZ2VzJ1xuICB9LFxuICBzaGltOiB7XG4gICAgYm9vdHN0cmFwOiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBiYWNrYm9uZToge1xuICAgICAgICAnZGVwcyc6IFsnanF1ZXJ5JywgJ3VuZGVyc2NvcmUnXSxcbiAgICAgICAgJ2V4cG9ydHMnOiAnQmFja2JvbmUnXG4gICAgfSxcbiAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICdleHBvcnRzJzogJ18nXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICAgICdkZXBzJzogW11cbiAgICB9LFxuICAgIHNsaWRlc2pzOiB7XG4gICAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGxpZ2h0Ym94OiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfVxuICB9XG59KTtcbnJlcXVpcmUoW1xuICAgICdqcXVlcnknLFxuICAgICdtb2RlbHMvZXJyb3IvdXNlcicsXG4gICAgJ3ZpZXdzL2Vycm9yL3VzZXInLFxuICAgICdtb2RlbHMvYXBwJyxcbiAgICAndmlld3MvYXBwJyxcbiAgICAnYm9vdHN0cmFwJ1xuXSwgZnVuY3Rpb24oJCxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LEFwcE1vZGVsLEFwcFZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIGNvbmZpZ2ZpbGUgPSAkKCcjbWFpbicpLmF0dHIoJ2RhdGEtY29uZmlnJyk7XG4gICAgaWYgKGNvbmZpZ2ZpbGUpIHtcbiAgICAgICAgJC5nZXRKU09OKGNvbmZpZ2ZpbGUsIGZ1bmN0aW9uKHNpdGVjb25maWcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGFwcCA9IG5ldyBBcHBWaWV3KHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IChuZXcgQXBwTW9kZWwoe2NvbmZpZzogc2l0ZWNvbmZpZ30pKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghb3B0cy5jb25maWcuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG5ldyBVc2VyRXJyb3JNb2RlbCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBlLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgbXNnOiBcIkZhaWxlZCB0byBsb2FkIHNpdGUgY29uZmlnIGZpbGUgJ1wiICsgY29uZmlnZmlsZSArIFwiJyBcIiArIGVycm9yXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICBtc2c6IFwiTm8gY29uZmlndXJhdGlvbiBmaWxlbmFtZSBzcGVjaWZpZWQgaW4gaG9tZSBwYWdlLlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
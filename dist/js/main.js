define("collections/articles",["jquery","underscore","backbone","models/article"],function(e,c,n,o){"use strict";var r=n.Collection.extend({model:o});return r});
define("collections/timeline",["jquery","underscore","backbone","models/timeline/item"],function(e,n,i,t){"use strict";var o=i.Collection.extend({model:t});return o});
define("controls/L.Control.Timeline",["leaflet","d3"],function(t,e){return t.Control.Timeline?t:(t.Control.Timeline=t.Control.extend({options:{orientation:"left",height:500,width:100,margin:{left:3,right:3,top:10,bottom:5},collapsed:!0,item:{minHeight:1},on:null,title:"Timeline",position:"topleft"},initialize:function(e,i,n){var o=this;t.Util.setOptions(this,n),this._map=e,this._source=i;var l=this._container=t.DomUtil.create("div","leaflet-control-timeline leaflet-control");if(this.options.collapsed){t.DomUtil.addClass(l,"leaflet-control-timeline-collapsed");var s=this._toggle=t.DomUtil.create("a","leaflet-control-timeline-toggle",l);s.title=this.options.title,s.link="#";var a=function(){o._expand()};t.Browser.touch?t.DomEvent.on(s,"click",t.DomEvent.stop).on(s,"click",a,this):t.DomEvent.on(s,"click",a)}else t.DomUtil.addClass(l,"leaflet-control-timeline-expanded");return t.Browser.touch?t.DomEvent.on(this._container,"click",t.DomEvent.stopPropagation):t.DomEvent.disableClickPropagation(this._container),l},onRemove:function(){},onAdd:function(t){return this._container},_expand:function(){var i=this;if(!i._expanded){i._expanded=!0,this._map.on("click",this._collapse,this),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.addClass(this._container,"leaflet-control-timeline-expanded");var n=this.options.height-this.options.margin.top-this.options.margin.bottom,o=this.options.width-this.options.margin.right-this.options.margin.left,l=(this._xScale=e.scale.linear().range([0,o]),this._yScale=e.scale.linear().domain([this._source.start,this._source.end]).range([0,n])),s=this._timeline=e.select(".leaflet-control-timeline").append("svg").attr("id","timeline").attr("height",this.options.height).attr("width",this.options.width),a=s.append("g").attr("id","band").attr("width",o/2-this.options.margin.right).attr("height",n).attr("transform","translate("+.25*o+","+this.options.margin.top+") scale(.75 1.0)"),r=(a.selectAll("g").data(this._source.getItems()).enter().append("rect").attr("class","timeline-item").attr("height",function(t){return e.max([i.options.item.minHeight,l(t.duration())])}).attr("width",o).attr("transform",function(t){return"translate(0, "+l(t.start)+")"}),this._brush=e.svg.brush().y(l).on("brushend",function(){var t=l(r.extent()[0]),n=l(r.extent()[1]),o={clear:!1,selected:[]};t!==n?e.select("#band").selectAll("rect.timeline-item").each(function(e){l(e.start)<=n&&l(e.end)>=t&&o.selected.push(e)}):o.clear=!0,i.options.on.brushend(o)})),c=a.append("svg").attr("id","brush").call(r);c.selectAll("rect").attr("width",o);var h=s.append("g").attr("id","axis").attr("transform","translate("+(.25*o-this.options.margin.left)+","+this.options.margin.top+")"),m=e.svg.axis().scale(l).orient(this.options.orientation).tickSize(6,0).tickValues(this._source.tickValues()).tickFormat(function(t){return i._source.tickFormat(t)});h.call(m)}},_collapse:function(){this._expanded&&(this.options.on.collapse(),document.getElementById("timeline").remove(),this._expanded=!1,t.DomUtil.addClass(this._container,"leaflet-control-timeline-collapsed"),t.DomUtil.removeClass(this._container,"leaflet-control-timeline-expanded"),this._map.off("click",this._collapse,this))}}),void(t.control.timeline=function(e,i,n){return new t.Control.Timeline(e,i,n)}))});
define("controllers/issue",["jquery","underscore","backbone","controllers/prototype","mixins/asyncInit","views/issue","models/issue"],function(e,n,i,o,r,t,l){"use strict";var c=o.extend({model:null,view:null,router:null,initialize:function(i){var o=this;o.$def=e.Deferred(),o.router=i.router,o.model=new l({config:i.config}),o.view=new t({model:o.model,config:i.config}),o.view.render(),o.model.init().done(function(){n.forEach(o.model.get("collection").models,function(e){o.listenTo(e,"active",function(e){var n="article/"+e.get("articleid");o.router.navigate(n,{trigger:!0}),o.view.renderArticle(e)})}),o.$def.resolve(o)}).always(function(){o.$def.reject()})}});return n.extend(c.prototype,r),c});
define("controllers/map",["jquery","underscore","backbone","controllers/prototype","models/map","views/map","mixins/asyncInit","controllers/map/pan","controllers/map/layer","controllers/map/timeline"],function(e,r,o,n,i,a,t,p,l,m){"use strict";var u=n.extend({model:null,view:null,issue:null,mapPanController:null,MapLayerController:null,mapTimelineController:null,initialize:function(r){var o=this;o.$def=e.Deferred(),o.router=r.router,o.issue=r.issue,o.model=new i(r),o.view=new a({model:o.model,router:o.router,issue:o.issue}),o.view.init().done(function(){o.mapPanController=new p({map:o.view.map}),o.mapLayerController=new l({views:o.view.markerViews,map:o.view.map,mapconfig:o.model.attributes.mapconfig}),o.mapTimelineController=new m({markerViews:o.view.markerViews,map:o.view.map,siteconfig:o.model.attributes.config}),o._registerTimelineListeners(),o.listenTo(o.view,"markers",function(e){o._registerMarkers(e),o.mapPanController.fitMarkerBounds(o.view.markerViews)}),o.view.render()}),e.when.apply(null,[o.model.init(),o.view.init()]).done(function(){o.$def.resolve(o)})},_registerMarkers:function(e){var o=this;r.forEach(e,function(e){o.listenTo(e.model,"active",function(r){o.mapPopupOpen(e.markerLayer);var n=o._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&o.mapPanController.handlePopupPosition(n.getPopup())}),o.listenTo(e.model,"toggle",function(r){o.mapPopupToggle(e.markerLayer);var n=o._getMarkerLayer(e.markerLayer,"getPopup");null!==n&&o.mapPanController.handlePopupPosition(n.getPopup())}),o.listenTo(e,"click",function(r){o.mapPopupOpen(r),e.model.trigger("active",e.model)}),o.listenTo(e,"mouseover",function(e){o.view.map.hoverPopup&&(openpopup[popupid(mapMarker.getLatLng())]||mapMarker.openPopup())})})},_registerTimelineListeners:function(){var e=this;e.listenTo(e.mapTimelineController,"show",function(o){r.forEach(o,function(r){r.markerLayer?r.render():e.view.map.addLayer(r.markerLayer)})}),e.listenTo(e.mapTimelineController,"hide",function(o){r.forEach(o,function(r){r.markerLayer&&e.view.map.removeLayer(r.markerLayer)})})},_getMarkerLayer:function(e,o){var n,i;if(e instanceof L.LayerGroup){if(o in e)n=e;else for(i=e.getLayers();e=i.pop();)if(o in e){n=e;break}}else r.has(e,"originalEvent")&&(n=e.target);return n},mapPopupOpen:function(e){var r=this._getMarkerLayer(e,"openPopup");r&&r.openPopup()},mapPopupToggle:function(e){var r=this._getMarkerLayer(e,"togglePopup");r&&r.togglePopup()},mapPopupClose:function(e){var r=this._getMarkerLayer(e,"closePopup");r&&r.closePopup()}});return r.extend(u.prototype,t),u});
define("controllers/prototype",["underscore","backbone"],function(e,t){"use strict";var n=function(){this.cid=e.uniqueId("controller"),this.initialize.apply(this,arguments)};return n.extend=t.Router.extend,e.extend(n.prototype,t.Events),e.extend(n.prototype,{initialize:function(){throw new Error("unimplemented initialize()")}}),n});
define("mixins/asyncInit",["jquery","underscore"],function(n,e){"use strict";var i={$def:null,init:function(){return this.$def.promise()}};return i});
define("mixins/domwatcher",["jquery"],function(e){"use strict";var t={watchDOM:function(t,o,n){if(!o)throw"Empty selector in watchDOM()";if(0===e(o).length){var d=function(){e(o).length>0&&(e(document.body).off("DOMNodeInserted",d),n.resolve())};e(document.body).on("DOMNodeInserted",d),window.setTimeout(function(){e(document.body).off("DOMNodeInserted",d),n.reject()},t)}else n.resolve()}};return t});
define("mixins/fetchxml",["jquery"],function(e){"use strict";var r={fetchXML:function(r){var t=e.Deferred();return e.ajax({type:"GET",url:r,dataType:"xml",success:function(e){t.resolve(e)},error:function(e,r,n){t.reject()}}),t.promise()}};return r});
define("mixins/xml2html",["jquery","underscore"],function(e,t){"use strict";var r={_doc:function(e){var t;if("string"==typeof e)t=(new DOMParser).parseFromString(e,"text/xml");else{if(!(e instanceof Document))throw new Error("Unrecognized document input in XML2HTML");t=e}if(null==t||!t.hasOwnProperty("getElementsByTagName")&&t.getElementsByTagName("parsererror").length>0)throw new Error("Failed to parse document in xml2html");return t},xml2html:function(e,r,n,o){var i=this._doc(e),m=this._doc(r),a=new XSLTProcessor;a.importStylesheet(m),"object"==typeof n&&t.each(t.keys(n),function(e){a.setParameter(null,e,n[e])});var s;try{var c=a.transformToDocument(i);s=-1!=navigator.userAgent.indexOf("Firefox")?"text"===o?c.documentElement.textContent:c.documentElement:"text"===o?c.documentElement.textContent:s=c.body.innerHTML}catch(u){throw new Error("Error in XSLT transform: "+u.toString())}return s}};return r});
define("models/article",["jquery","underscore","backbone","mixins/fetchxml","mixins/asyncInit","mixins/xml2html","text!xsl/geojson.xsl","text!xsl/cited-range.xsl"],function(e,t,n,o,s,i,r,l){"use strict";var a=n.Model.extend({initialize:function(){var t=this;t.$def=e.Deferred();var n=t.fetchXML(t.get("path"));e.when(n).done(function(e){t.set("xml",e),t._mkGeojson(),t._mkCitedRange(),null!==t.geojson&&t.set("placeType",t.geojson.properties.layer),t.$def.resolve(t)}).fail(function(){t.$def.reject()})},defaults:{xml:null,placeType:null,iconUrl:"",citedRange:{}},geojson:null,getGeojson:function(){return null===this.geojson&&this._mkGeojson(),this.geojson},_mkGeojson:function(){try{var e=this.xml2html(this.get("xml"),r,{},"text");this.geojson=JSON.parse(e)}catch(t){throw new Error("Failed to parse geojson: "+t.toString())}},_mkCitedRange:function(){try{var e=this.xml2html(this.get("xml"),l,{},"text");this.set("citedRange",JSON.parse(e))}catch(t){throw new Error("Failed to parse cited range json: "+t.toString())}}});return t.extend(a.prototype,o),t.extend(a.prototype,s),t.extend(a.prototype,i),a});
define("models/issue",["jquery","underscore","backbone","models/article","collections/articles","mixins/asyncInit"],function(e,t,n,i,r,o){"use strict";var c=n.Model.extend({initialize:function(n){var o=this;o.$def=e.Deferred();var c=n.config.articles.pathBase;c.match(/\/$/)||(c+="/");var a=n.config.articles.files,s=new r;o.config=n.config,o.set("collection",s);var f=t.map(t.range(a.length),function(){return void 0});t.each(a,function(e,t){f[t]=new i({articleid:t,articledir:c,path:c+e})});var l=t.map(f,function(e){return e.init()});e.when.apply(null,l).done(function(){s.add(f),o.setIcons(),o.$def.resolve(o)}).always(function(){t.forEach(l,function(e){"rejected"===e.state()&&o.$def.reject()}),o.$def.reject()})},setIcons:function(){var e=this,n=e.config.markers.icons,i=t.shuffle(t.flatten(t.map(n,function(e){return t.map(e.files,function(t){return e.dir.concat(t)})}))),r=i.pop(),o=[];e.get("collection").forEach(function(e,t){var n=e.getGeojson()||{properties:{}},c=n.properties.layer;o[c]=o[c]||i.pop()||r,e.set("iconUrl",o[c])})},getArticle:function(e){var t,n=this.get("collection");return"object"==typeof e?t=e:("number"==typeof e||"string"==typeof e)&&(t=n.at(e)),t}});return t.extend(c.prototype,o),c});
define("models/map",["jquery","underscore","backbone","mixins/asyncInit"],function(e,n,i,o){"use strict";var t=i.Model.extend({initialize:function(n){var i=this;i.$def=e.Deferred(),e.getJSON(n.config.map.config,function(e){i.set("mapconfig",e),i.$def.resolve(i)}).fail(function(e,n,o){console.log("Failed to load map config file: "+o),i.$def.reject()})},defaults:{mapconfig:{}}});return n.extend(t.prototype,o),t});
define("models/timeline",["jquery","underscore","backbone","collections/timeline","models/timeline/item","mixins/asyncInit"],function(e,t,r,n,i,a){"use strict";var o=r.Model.extend({markerViews:null,start:null,end:null,siteconfig:null,bookconfig:null,initialize:function(t){var r=this;r.markerViews=t.markerViews,r.siteconfig=t.siteconfig,r.$def=e.Deferred(),e.getJSON(r.siteconfig.book.file,function(e){r.bookconfig=e.book,r._initialize(),r.$def.resolve(r)}).fail(function(e,t,n){r.$def.reject()})},_initialize:function(){var e=this,r=new n;e.set("collection",r),t.forEach(e.markerViews,function(n){var a=n.model,o=t.findWhere(e.bookconfig.chapters,{part:a.attributes.citedRange.part,chapter:a.attributes.citedRange.chapter});if(o){var c=o.paragraphs.start+a.attributes.citedRange.paragraph,s=c+1;r.add(new i({start:c,end:s,markerView:n}))}}),e.start=t.min(e.bookconfig.chapters,function(e){return e.paragraphs.start}).paragraphs.start,e.end=t.max(e.bookconfig.chapters,function(e){return e.paragraphs.end}).paragraphs.end},getItems:function(){return this.get("collection").models},tickValues:function(){var e=t.map(this.bookconfig.chapters,function(e){return e.paragraphs.start});return e.sort(function(e,t){return e-t}),e},tickFormat:function(e){var t,r,n=this;for(t=0;t<n.bookconfig.chapters.length;++t)if(r=n.bookconfig.chapters[t],e<=r.paragraphs.end)return e=r.chapter,e===n.bookconfig.chapters.length-1?"":e;return""}});return t.extend(o.prototype,a),o});
define("routes/router",["jquery","underscore","backbone","models/error/user","views/error/user","views/clear","controllers/issue","controllers/map","views/menu"],function(e,r,i,t,n,o,s,a,l){"use strict";var u=i.Router.extend({pages:{},config:{},issueController:null,mapController:null,initialize:function(e){var t=this;this.config=e.config,this.pages=e.config.pages,this.issueController=new s({router:this,config:this.config}),this.issueController.init().done(function(){r.has(t.pages.router,"history")&&t.pages.router.history&&i.history.start()})},navigate:function(e,r){i.history.fragment!==e&&i.history.navigate(e,r)},page:function(e){var i,t=this,n=!1;try{if(e||(e=this.pages.home),i=this.pages.pages[e],void 0===i)throw new Error("Missing config in router/page")}catch(s){return this.page("404")}(new o).render(),r.each(i,function(i){var o,s={config:t.config,issue:t.issueController.model,router:t},l=JSON.parse(JSON.stringify(i));if(r.has(l,"view"))o=l.view;else{if(!r.has(l,"partial")){if(r.has(confg,"full"))return void(window.location.href=l.full.page);throw new Error("Unsupported page type in router: "+e)}o="views/partial",l.partial.page=t.pages.pathBase+l.partial.page,s=r.extend(s,l.partial)}"views/map"===o?(t.mapController=new a(s),n=!0):require([o],function(e){var r=new e(s);r.render()})}),n||(t.mapController=null)},article:function(r){var i=this,t={config:i.config,issue:i.issueController.model,router:i};e("#titlepage").length>0&&e("#titlepage").remove(),e("#page").length>0&&e("#page").remove(),null===i.mapController&&(i.mapController=new a(t)),0===e("#menu").children().length&&new l(t).render(),i.mapController.init().done(function(){var e=i.issueController.model.getArticle(r);e.trigger("active",e)})}});return u});
define("views/app",["jquery","underscore","backbone"],function(e,n,i){"use strict";var o=i.View.extend({el:"body",initialize:function(){e(window).resize(function(){document.location.reload()})}});return o});
define("views/article",["jquery","underscore","backbone","views/article/gallery","mixins/xml2html","text!xsl/article.xsl"],function(e,i,t,r,l,o){"use strict";var n=t.View.extend({id:"article",initialize:function(e){var i=this;i.config=e.config},render:function(){var i=this;if(i.$el=e("#"+i.id),0===i.$el.find("#"+i.model.cid).length){var t=this.xml2html(this.model.get("xml"),o,{"article-dir":i.config.articles.pathBase,iconUrl:i.model.get("iconUrl"),cid:i.model.cid});try{e(".article-content").remove(),e("#"+this.id).append(t)}catch(l){console.log("article load error: "+l.toString())}return e("img.slidesjs-slide").length>0?(new r).render():(e("#footer").remove(),e("article").removeClass("before-footer").addClass("no-footer")),i.$el.find(".article-marker").click(function(e,t){i.model.trigger("toggle",i.model)}),i}},remove:function(){}});return i.extend(n.prototype,l),n});
define("views/clear",["jquery","underscore","backbone"],function(e,n,r,t){"use strict";var c=r.View.extend({el:"body",render:function(){e("body").empty()}});return c});
define("views/issue",["jquery","underscore","backbone","text!partials/issue.html","views/article"],function(e,i,t,n,r){"use strict";var s=t.View.extend({el:"#issue",template:i.template(n),initialize:function(e){var i=this;i.config=e.config},render:function(){this.$el.remove(),e("body").append(n)},renderArticle:function(e){new r({model:e,config:this.model.config,issue:this,router:this.model.router}).render()}});return s});
define("views/map",["jquery","underscore","backbone","leaflet","text!partials/map.html","views/marker","mixins/asyncInit"],function(e,i,n,a,r,t,m){"use strict";var o=n.View.extend({id:"map",tagName:"div",markerViews:[],mapconfig:{},initialize:function(i){var n=this;n.$def=e.Deferred(),n.model=i.model,n.issue=i.issue,e.when.apply({},[n.issue.init(),n.model.init()]).done(function(){n.mapconfig=n.model.get("mapconfig"),e("#"+this.id).length>0||e("#"+this.id).children().length>0||(n._initMap(),n.$def.resolve(n))})},_initMap:function(){var n=this;0===e("#"+this.id).length&&(e("body").append(r),n.map=new a.Map(n.mapconfig.id,n.mapconfig.map),new a.TileLayer(n.mapconfig.tileLayer.url,n.mapconfig.tileLayer.opts).addTo(n.map),new a.control.scale(n.mapconfig.scale).addTo(n.map),n.markerViews=i.map(n.issue.get("collection").models,function(e){return new t({model:e,map:n.map,mapconfig:n.mapconfig})}))},renewViews:function(){var e=this;e.markerViews=i.map(e.issue.get("collection").models,function(i){return i.markerView||(i.markerView=new t({model:i,map:e.map,mapconfig:e.mapconfig})),i.markerView}),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)},render:function(){var e=this;e._initMap(),i.forEach(e.markerViews,function(e){e.render()}),e.trigger("markers",e.markerViews)}});return i.extend(o.prototype,m),o});
define("views/marker",["jquery","underscore","backbone","text!partials/marker.html","text!partials/marker-legend.html"],function(e,r,t,i,n){"use strict";var o=t.View.extend({template:r.template(i),el:"",markerLayer:null,map:null,mapconfig:null,initialize:function(e){var r=this;r.map=e.map,r.mapconfig=e.mapconfig,r.initMarkerLayer()},initMarkerLayer:function(){var e=this,r=this.model.getGeojson(),t=e.mapconfig.features.icon;t.iconUrl=this.model.get("iconUrl")||"";var i=L.icon(t);e.markerLayer=L.geoJson(r,{onEachFeature:function(r,t){var i=L.popup(e.mapconfig.features.popup);i.setContent(e.template({articleid:e.model.get("articleid"),geojson:e.model.getGeojson()})),t.bindPopup(i),t.removeEventListener("click"),t.on("click",function(r){e.trigger("click",r)}),t.on("mouseover",function(r){e.trigger("mouseover",r)})},pointToLayer:function(r,t){return L.marker(t,{icon:i,clickable:!!r.properties.text,title:r.properties.markername||"",opacity:e.mapconfig.features.opacity,riseOnHover:e.mapconfig.features.riseOnHover})}})},render:function(){this.markerLayer.addTo(this.map)}});return o});
define("views/menu",["jquery","underscore","backbone","text!partials/menu.html","mixins/domwatcher","views/article/menu"],function(e,t,n,i,r,o){"use strict";var a=n.View.extend({template:t.template(i),id:"menu",tagName:"div",issue:null,config:{},initialize:function(e){this.config=e.config,this.issue=e.issue},render:function(){var n=this;if(0===e("#"+n.id).children().length){var i=this.config.menu,r=[],a={},c={};t.each(i,function(e){if(a[e.partial]="","menu"===e.type){if("collections/articles"!==e.collection)throw new Error("Unhandled collection type requested: "+e.collection);c[e.collection]=n.issue.get("collection")}}),t.each(t.keys(a),function(n){var i=e.Deferred();require(["text!"+n],function(e){a[n]=t.template(e),i.resolve()}),r.push(i.promise())});var l="";e.when.apply(e,r).done(function(){t.forEach(i,function(n,i){var r=n.partial,u={},s="",f=[];"page"===n.type||"sep"===n.type?l+=a[r](n):"menu"===n.type&&(c[n.collection].models.forEach(function(t,i){var r,a=n.item.href.replace(":i",i),c=new o({model:t}),l=c.render({href:"#"+a});if("string"==typeof l)r=e(l);else{if(!(l instanceof Element))throw new Error("Unsupported result type for submenu: "+l.toString());if("BODY"===l.nodeName)r=e(l.innerHTML);else{if("LI"!==l.nodeName)throw new Error("Unsupported document element for submenu: "+l.toString());r=e(l.outerHTML)}}r.attr("data-sort-key")?u[r.attr("data-sort-key")]=r.clone():u[r.find("a").text()]=r.clone()}),f=t.keys(u),f.sort(function(e,t){return e.localeCompare(t)}),t.each(f,function(e){s+=u[e][0].outerHTML}),l+=a[r]({label:n.label,items:s}))})}).then(function(){e("#"+n.id).empty().append(n.template({content:l}));var t=e.Deferred();t.fail(function(){n.render()}),n.watchDOM(500,"#"+n.id,t)}).fail(function(){throw new Error("Failed to build menu.")})}}});return t.extend(a.prototype,r),a});
define("views/page",["jquery","underscore","backbone","mixins/domwatcher","text!partials/page.html"],function(e,t,n,r,i){"use strict";var a=n.View.extend({el:"body",render:function(){var t=this,n=e.Deferred();n.then(function(){e(t.el).append(i)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,r),a});
define("views/partial",["jquery","underscore","backbone","mixins/domwatcher","mixins/asyncInit"],function(e,t,n,i,r){"use strict";var a=n.View.extend({el:"",page:"",initialize:function(t){var n=this;n.el=t.el,n.$def=e.Deferred(),require(["text!"+t.page],function(e){n.page=e,n.$def.resolve(n)})},render:function(){var t=this,n=e.Deferred();t.init().then(function(){e(t.el).append(t.page)}),this.watchDOM(1e3,t.el,n)}});return t.extend(a.prototype,i),t.extend(a.prototype,r),a});
define("views/timeline",["jquery","underscore","backbone","leaflet","text!partials/timeline.html","controls/L.Control.Timeline"],function(e,i,n,t,l){"use strict";var o=n.View.extend({id:"timeline",map:null,initialize:function(e){var i=this;i.map=e.map},_timelineCollapse:function(){var e=this;e._handleFilter({clear:!0})},_handleFilter:function(e){this.trigger("filter",e)},render:function(){var e=this;e.model.init().done(function(){e.timeline=t.control.timeline(e.map,e.model,{on:{brushend:function(i){e._handleFilter(i)},collapse:function(){e._timelineCollapse()}}}).addTo(e.map)})}});return o});
define("controllers/map/layer",["jquery","underscore","backbone","controllers/prototype","text!partials/marker-legend.html"],function(e,r,o,t,n){"use strict";var l=t.extend({views:null,router:null,map:null,initialize:function(o){var t=this;t.views=o.views,t.map=o.map,t.mapconfig=o.mapconfig;var l=r.template(n),a=r.groupBy(t.views,function(e){return e.model.getGeojson().properties.layer}),i=L.control.layers(null,null,t.mapconfig.control.layers.options).addTo(t.map),c=i.getContainer();r.forEach(Object.keys(c),function(e){e.match("mouseover")&&c.removeEventListener("mouseover",c[e]),e.match("mouseout")&&c.removeEventListener("mouseout",c[e])}),r.each(r.keys(a),function(e){var o=e.replace(/\s+/g,"-"),t=l({iconUrl:a[e][0].model.get("iconUrl"),title:e,klass:o}),n=r.map(a[e],function(e){return e.markerLayer}),c=L.layerGroup(n);i.addOverlay(c,t)}),e("input.leaflet-control-layers-selector").each(function(r,o){e(o).click()})}});return l});
define("controllers/map/pan",["jquery","underscore","backbone","controllers/prototype","mixins/domwatcher"],function(t,e,n,o,i){"use strict";var a=o.extend({map:null,initialize:function(t){if(this.map=t.map,!this.map)throw new Error("Uninitialized map")},_fitMarkerBounds:function(t){var n=this,o=document.getElementById("article");if(o){var i=L.DomUtil.getViewportOffset(o).x,a=L.latLngBounds(e.map(t,function(t){var e=t.model.getGeojson().geometry.coordinates.slice(0);return L.latLng(e.reverse())}));0===i?n.map.fitBounds(a):i!=n.map.getSize().x?n.map.fitBounds(a,{paddingBottomRight:[document.body.clientWidth-i,0]}):n.map.fitBounds(a),n.map.invalidateSize()}},fitMarkerBounds:function(e){var n=this,o=t.Deferred();o.then(function(){n._fitMarkerBounds(e)}),this.watchDOM(1e3,"#article",o)},handlePopupPosition:function(e){var n,o,i,a,r,p=this,d=p.map,s=t(e.getContent()).attr("id");i=e.getLatLng(),void 0!==i&&(n=L.DomUtil.getViewportOffset(document.getElementById("article")).x,o=t("#"+s).closest(".leaflet-popup-content-wrapper").first(),r=L.point(e.options.autoPanPaddingBottomRight||e.options.autoPanPadding),r=r?r.x:0,a=o.length>0?o.offset().left+o.width()+r:0,0!=n&&a>n&&n!=d.getSize().x?d.panBy([a-n,0]):d.getBounds().contains(e.getLatLng())||(d.closePopup(e),d.openPopup(e)))}});return e.extend(a.prototype,i),a});
define("controllers/map/timeline",["jquery","underscore","backbone","controllers/prototype","views/timeline","models/timeline"],function(e,i,r,n,t,o){"use strict";var l=n.extend({map:null,model:null,view:null,siteconfig:null,markerViews:null,initialize:function(e){var r=this;r.views=e.views,r.map=e.map,r.markerViews=e.markerViews,i.forEach(e.markerViews,function(e){r.listenTo(e.model,"show",function(){}),r.listenTo(e.model,"hide",function(){})}),r.model=new o({siteconfig:e.siteconfig,markerViews:e.markerViews}),r.view=new t({model:r.model,map:r.map,markerViews:e.markerViews}),r.listenTo(r.view,"filter",function(e){var n,t,o={};e.clear?(n=i.map(r.markerViews,function(e){return e}),this.trigger("show",n)):(n=i.map(e.selected,function(e){return o[e.markerView.model.cid]=void 0,e.markerView}),t=i.filter(r.markerViews,function(e){return!(e.model.cid in o)}),t.length>0&&this.trigger("hide",t),n.length>0&&this.trigger("show",n))}),r.view.render()}});return l});
define("models/error/user",["backbone"],function(e){"use strict";var s=e.Model.extend({defaults:{msg:""},initialize:function(e){this.set("msg",e.message)}});return s});
define("models/timeline/item",["jquery","underscore","backbone"],function(e,n,t){"use strict";var r=t.Model.extend({markerView:null,start:null,end:null,initialize:function(e){var n=this;n.markerView=e.markerView,n.start=e.start,n.end=e.end},duration:function(){return this.end-this.start},compareTo:function(e){}});return r});
define("views/article/gallery",["jquery","underscore","backbone","views/article/gallery/popover","views/article/gallery/lightbox","views/article/gallery/slides"],function(e,i,r,n,l,a){"use strict";var o=r.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=e("#article article").height()-e("#header").outerHeight(!0);e("#body").css({height:i});var r=[];e("img.slidesjs-slide").each(function(i,n){var l=e.Deferred();e(n).load(function(){e(n).removeClass("remove"),l.resolve()}),e(n).error(function(){window.setTimeout(function(){l.reject()},500)}),r.push(l)}),e.when.apply({},r).always(function(){e("img.slidesjs-slide.remove").remove(),e(".image-loading").removeClass("image-loading"),(new n).render(),(new l).render(),(new a).render()})}});return o});
define("views/article/menu",["jquery","underscore","backbone","mixins/xml2html","text!xsl/article-menu.xsl"],function(e,t,i,n,r){"use strict";var l=i.View.extend({render:function(e){var t=this;if("resolved"!==this.model.init().state())throw"Uninitialized article in ArticleMenuView";var i=t.xml2html(t.model.get("xml"),r,e);return i}});return t.extend(l.prototype,n),l});
define("views/error/user",["jquery","backbone","text!partials/error/user.html"],function(e,t,r){"use strict";var i=t.View.extend({template:_.template(r),el:e("#errorDialog"),initialize:function(){this.render()},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$el.modal({keyboard:!0,show:!0}),this}});return i});
define("views/article/gallery/lightbox",["jquery","underscore","backbone","text!partials/lightbox-title.html","lightbox"],function(e,t,i,n){"use strict";var r=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this;return e(".gallery-item").magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:function(i){var r=i.el.attr("id"),l=e(".popover."+r),a=t.template(n),o=a({title:l.find(".head").text(),attr:l.find(".attr").text()});return o}}}),e(".glyphicon.glyphicon-expand").on("click",function(t){e(".gallery-item").magnificPopup("open")}),i}});return r});
define("views/article/gallery/popover",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html"],function(e,t,i,r,n){"use strict";var o=i.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var i=this,o=t.template(n);return e("img.slidesjs-slide").each(function(t,i){var n=i.getAttribute("id"),a=e(".popover."+n),c=a.find(".head").text();e(i).attr("alt",a.find(".desc").text());var l=o({attr:a.find(".attr").text()});e(i).popover({container:"body",html:!0,content:l,title:c,template:r,trigger:"hover",placement:"left"}),e(i).click(function(t){e(i).popover("hide")})}),i}});return o});
define("views/article/gallery/slides",["jquery","underscore","backbone","text!partials/image-popover.html","text!partials/image-popover-content.html","text!partials/lightbox-title.html","slidesjs","lightbox"],function(i,e,t,s,l,n){"use strict";var a=t.View.extend({id:"article",initialize:function(){},remove:function(){},render:function(){var e=this;return i("#slides").slidesjs({navigation:{active:i("img.slidesjs-slide").length>1,effect:"fade"},pagination:{active:i("img.slidesjs-slide").length>1,effect:"fade"},effect:{fade:{speed:100,crossfade:!0}},callback:{loaded:function(e){var t=i(".slidesjs-control").children(":eq("+(e-1)+")");t.css({visibility:"hidden"}),t.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"});var s=(i(".slidesjs-container").width()-t.width())/2;s-=parseInt(t.css("padding-left"),10),t.css({left:s}),t.css({visibility:"visible"})},start:function(e){i(".slidesjs-control").children().css({visibility:"hidden"})},complete:function(e){var t=e-1,s=i(".slidesjs-control").children(":eq("+t+")");s.css({height:"auto",width:"auto",maxHeight:i(".slidesjs-container").height(),maxWidth:i(".slidesjs-container").width(),position:"relative"}),s.css({visibility:"visible"})}}}),e}});return a});
require.config({paths:{backbone:"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min",bootstrap:"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min",d3:"//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min",jquery:"//code.jquery.com/jquery-2.1.4.min",leaflet:"//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet",lightbox:"//cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min",slidesjs:"//cdnjs.cloudflare.com/ajax/libs/slidesjs/3.0/jquery.slides.min",text:"//cdnjs.cloudflare.com/ajax/libs/require-text/2.0.12/text.min",underscore:"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min",partials:"../partials",xsl:"../script/xsl",pages:"../pages"},shim:{bootstrap:{deps:["jquery"]},backbone:{deps:["jquery","underscore"],exports:"Backbone"},underscore:{exports:"_"},text:{deps:[]},slidesjs:{deps:["jquery"]},lightbox:{deps:["jquery"]}}}),require(["jquery","models/error/user","views/error/user","routes/router","views/app","bootstrap"],function(e,s,o,r,a){"use strict";var i=e("#main").attr("data-config");i?e.getJSON(i,function(e){try{new a,new r({routes:e.pages.routes,config:e})}catch(i){e.debug||new o({model:new s({msg:i.toString()})})}}).fail(function(e,r,a){new o({model:new s({msg:"Failed to load site config file '"+i+"' "+a})})}):new o({model:new s({msg:"No configuration filename specified in home page."})})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL2FydGljbGVzLmpzIiwiY29sbGVjdGlvbnMvdGltZWxpbmUuanMiLCJjb250cm9scy9MLkNvbnRyb2wuVGltZWxpbmUuanMiLCJjb250cm9sbGVycy9pc3N1ZS5qcyIsImNvbnRyb2xsZXJzL21hcC5qcyIsImNvbnRyb2xsZXJzL3Byb3RvdHlwZS5qcyIsIm1peGlucy9hc3luY0luaXQuanMiLCJtaXhpbnMvZG9td2F0Y2hlci5qcyIsIm1peGlucy9mZXRjaHhtbC5qcyIsIm1peGlucy94bWwyaHRtbC5qcyIsIm1vZGVscy9hcnRpY2xlLmpzIiwibW9kZWxzL2lzc3VlLmpzIiwibW9kZWxzL21hcC5qcyIsIm1vZGVscy90aW1lbGluZS5qcyIsInJvdXRlcy9yb3V0ZXIuanMiLCJ2aWV3cy9hcHAuanMiLCJ2aWV3cy9hcnRpY2xlLmpzIiwidmlld3MvY2xlYXIuanMiLCJ2aWV3cy9pc3N1ZS5qcyIsInZpZXdzL21hcC5qcyIsInZpZXdzL21hcmtlci5qcyIsInZpZXdzL21lbnUuanMiLCJ2aWV3cy9wYWdlLmpzIiwidmlld3MvcGFydGlhbC5qcyIsInZpZXdzL3RpbWVsaW5lLmpzIiwiY29udHJvbGxlcnMvbWFwL2xheWVyLmpzIiwiY29udHJvbGxlcnMvbWFwL3Bhbi5qcyIsImNvbnRyb2xsZXJzL21hcC90aW1lbGluZS5qcyIsIm1vZGVscy9lcnJvci91c2VyLmpzIiwibW9kZWxzL3RpbWVsaW5lL2l0ZW0uanMiLCJ2aWV3cy9hcnRpY2xlL2dhbGxlcnkuanMiLCJ2aWV3cy9hcnRpY2xlL21lbnUuanMiLCJ2aWV3cy9lcnJvci91c2VyLmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L2xpZ2h0Ym94LmpzIiwidmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3BvcG92ZXIuanMiLCJ2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCIkIiwiXyIsIkJhY2tib25lIiwiQXJ0aWNsZU1vZGVsIiwiQXJ0aWNsZXNDb2xsZWN0aW9uIiwiQ29sbGVjdGlvbiIsImV4dGVuZCIsIm1vZGVsIiwiVGltZWxpbmVJdGVtTW9kZWwiLCJUaW1lbGluZUNvbGxlY3Rpb24iLCJMIiwiZDMiLCJDb250cm9sIiwiVGltZWxpbmUiLCJvcHRpb25zIiwib3JpZW50YXRpb24iLCJoZWlnaHQiLCJ3aWR0aCIsIm1hcmdpbiIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNvbGxhcHNlZCIsIml0ZW0iLCJtaW5IZWlnaHQiLCJvbiIsInRpdGxlIiwicG9zaXRpb24iLCJpbml0aWFsaXplIiwibWFwIiwic291cmNlIiwidGhhdCIsInRoaXMiLCJVdGlsIiwic2V0T3B0aW9ucyIsIl9tYXAiLCJfc291cmNlIiwiY29udGFpbmVyIiwiX2NvbnRhaW5lciIsIkRvbVV0aWwiLCJjcmVhdGUiLCJhZGRDbGFzcyIsInRvZ2dsZSIsIl90b2dnbGUiLCJsaW5rIiwiZXhwYW5kIiwiX2V4cGFuZCIsIkJyb3dzZXIiLCJ0b3VjaCIsIkRvbUV2ZW50Iiwic3RvcCIsInN0b3BQcm9wYWdhdGlvbiIsImRpc2FibGVDbGlja1Byb3BhZ2F0aW9uIiwib25SZW1vdmUiLCJvbkFkZCIsIl9leHBhbmRlZCIsIl9jb2xsYXBzZSIsInJlbW92ZUNsYXNzIiwiaW5uZXJIZWlnaHQiLCJpbm5lcldpZHRoIiwieVNjYWxlIiwiX3hTY2FsZSIsInNjYWxlIiwibGluZWFyIiwicmFuZ2UiLCJfeVNjYWxlIiwiZG9tYWluIiwic3RhcnQiLCJlbmQiLCJ0aW1lbGluZSIsIl90aW1lbGluZSIsInNlbGVjdCIsImFwcGVuZCIsImF0dHIiLCJiYW5kIiwiYnJ1c2giLCJzZWxlY3RBbGwiLCJkYXRhIiwiZ2V0SXRlbXMiLCJlbnRlciIsImQiLCJtYXgiLCJkdXJhdGlvbiIsIl9icnVzaCIsInN2ZyIsInkiLCJleHRTdGFydCIsImV4dGVudCIsImV4dEVuZCIsInJlc3VsdHMiLCJjbGVhciIsInNlbGVjdGVkIiwiZWFjaCIsImkiLCJwdXNoIiwiYnJ1c2hlbmQiLCJ5QnJ1c2giLCJjYWxsIiwieUF4aXMiLCJheGlzIiwib3JpZW50IiwidGlja1NpemUiLCJ0aWNrVmFsdWVzIiwidGlja0Zvcm1hdCIsImNvbGxhcHNlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJlbW92ZSIsIm9mZiIsImNvbnRyb2wiLCJDb250cm9sbGVyIiwiQXN5bmNJbml0IiwiSXNzdWVWaWV3IiwiSXNzdWVNb2RlbCIsIklzc3VlQ29udHJvbGxlciIsInZpZXciLCJyb3V0ZXIiLCJhcmdzIiwiJGRlZiIsIkRlZmVycmVkIiwiY29uZmlnIiwicmVuZGVyIiwiaW5pdCIsImRvbmUiLCJmb3JFYWNoIiwiZ2V0IiwibW9kZWxzIiwiYXJ0aWNsZSIsImxpc3RlblRvIiwidXJsIiwibmF2aWdhdGUiLCJ0cmlnZ2VyIiwicmVuZGVyQXJ0aWNsZSIsInJlc29sdmUiLCJhbHdheXMiLCJyZWplY3QiLCJwcm90b3R5cGUiLCJNYXBNb2RlbCIsIk1hcFZpZXciLCJNYXBQYW5Db250cm9sbGVyIiwiTWFwTGF5ZXJDb250cm9sbGVyIiwiTWFwVGltZWxpbmVDb250cm9sbGVyIiwiTWFwQ29udHJvbGxlciIsImlzc3VlIiwibWFwUGFuQ29udHJvbGxlciIsIm1hcFRpbWVsaW5lQ29udHJvbGxlciIsIm1hcExheWVyQ29udHJvbGxlciIsInZpZXdzIiwibWFya2VyVmlld3MiLCJtYXBjb25maWciLCJhdHRyaWJ1dGVzIiwic2l0ZWNvbmZpZyIsIl9yZWdpc3RlclRpbWVsaW5lTGlzdGVuZXJzIiwiX3JlZ2lzdGVyTWFya2VycyIsImZpdE1hcmtlckJvdW5kcyIsIndoZW4iLCJhcHBseSIsIm1hcmtlclZpZXciLCJtYXBQb3B1cE9wZW4iLCJtYXJrZXJMYXllciIsIm1hcmtlciIsIl9nZXRNYXJrZXJMYXllciIsImhhbmRsZVBvcHVwUG9zaXRpb24iLCJnZXRQb3B1cCIsIm1hcFBvcHVwVG9nZ2xlIiwiZXZ0IiwiaG92ZXJQb3B1cCIsIm9wZW5wb3B1cCIsInBvcHVwaWQiLCJtYXBNYXJrZXIiLCJnZXRMYXRMbmciLCJvcGVuUG9wdXAiLCJhZGRMYXllciIsInJlbW92ZUxheWVyIiwib2JqIiwibWV0aG9kIiwibWFwTWFya2VyTGF5ZXIiLCJsYXllcnMiLCJMYXllckdyb3VwIiwiZ2V0TGF5ZXJzIiwicG9wIiwiaGFzIiwidGFyZ2V0IiwidG9nZ2xlUG9wdXAiLCJtYXBQb3B1cENsb3NlIiwiY2xvc2VQb3B1cCIsImNpZCIsInVuaXF1ZUlkIiwiYXJndW1lbnRzIiwiUm91dGVyIiwiRXZlbnRzIiwiRXJyb3IiLCJwcm9taXNlIiwiRE9NV2F0Y2hlciIsIndhdGNoRE9NIiwibXMiLCJzZWwiLCJsZW5ndGgiLCJmIiwiYm9keSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJGZXRjaFhNTCIsImZldGNoWE1MIiwiJGdldCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJqcVhIUiIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsIlhNTDJIVE1MIiwiX2RvYyIsInhtbCIsInhtbERvYyIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsIkRvY3VtZW50IiwiaGFzT3duUHJvcGVydHkiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInhtbDJodG1sIiwieHNsIiwicGFyYW1zIiwibW9kZSIsInhzbERvYyIsInhzbHRQcm9jZXNzb3IiLCJYU0xUUHJvY2Vzc29yIiwiaW1wb3J0U3R5bGVzaGVldCIsImtleXMiLCJrZXkiLCJzZXRQYXJhbWV0ZXIiLCJyZXN1bHQiLCJkb2MiLCJ0cmFuc2Zvcm1Ub0RvY3VtZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaW5kZXhPZiIsImRvY3VtZW50RWxlbWVudCIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiZSIsInRvU3RyaW5nIiwiZ2VvSnNvblhzbCIsImNpdGVkUmFuZ2VYc2wiLCJNb2RlbCIsInNldCIsIl9ta0dlb2pzb24iLCJfbWtDaXRlZFJhbmdlIiwiZ2VvanNvbiIsInByb3BlcnRpZXMiLCJsYXllciIsImZhaWwiLCJkZWZhdWx0cyIsInBsYWNlVHlwZSIsImljb25VcmwiLCJjaXRlZFJhbmdlIiwiZ2V0R2VvanNvbiIsImpzb25TdHJpbmciLCJKU09OIiwicGFyc2UiLCJBcnRpY2xlQ29sbGVjdGlvbiIsImFydGRpciIsImFydGljbGVzIiwicGF0aEJhc2UiLCJtYXRjaCIsImZpbGVzIiwiY29sIiwidW5kZWZpbmVkIiwiZmlsZSIsImFydGljbGVpZCIsImFydGljbGVkaXIiLCJwYXRoIiwiaW5pdHMiLCJhZGQiLCJzZXRJY29ucyIsIiRwcm9taXNlIiwic3RhdGUiLCJpY2NvbmZpZyIsIm1hcmtlcnMiLCJpY29ucyIsImljb25GaWxlcyIsInNodWZmbGUiLCJmbGF0dGVuIiwiZW50cnkiLCJkaXIiLCJjb25jYXQiLCJkZWZhdWx0SWNvbkZpbGUiLCJnZXRBcnRpY2xlIiwiYXJ0IiwiYXQiLCJnZXRKU09OIiwianF4aHIiLCJjb25zb2xlIiwibG9nIiwiVGltZWxpbmVJdGVtIiwiVGltZWxpbmVNb2RlbCIsImJvb2tjb25maWciLCJib29rIiwiX2luaXRpYWxpemUiLCJib29rQ2hhcHRlciIsImZpbmRXaGVyZSIsImNoYXB0ZXJzIiwicGFydCIsImNoYXB0ZXIiLCJwYXJhZ3JhcGhzIiwicGFyYWdyYXBoIiwibWluIiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwicCIsIlVzZXJFcnJvck1vZGVsIiwiVXNlckVycm9yVmlldyIsIkNsZWFyVmlldyIsIk1lbnVWaWV3IiwicGFnZXMiLCJpc3N1ZUNvbnRyb2xsZXIiLCJtYXBDb250cm9sbGVyIiwib3B0cyIsImhpc3RvcnkiLCJmcmFnbWVudCIsInBhZ2UiLCJwYWdlQ29uZmlnIiwibWFwUGFnZSIsImhvbWUiLCJwYyIsInZpZXdOYW1lIiwic3RyaW5naWZ5IiwiY29uZmciLCJsb2NhdGlvbiIsImhyZWYiLCJmdWxsIiwicGFydGlhbCIsInJlcXVpcmUiLCJWaWV3IiwidiIsImlkIiwiY2hpbGRyZW4iLCJBcHBWaWV3IiwiZWwiLCJyZXNpemUiLCJyZWxvYWQiLCJHYWxsZXJ5VmlldyIsIkFydGljbGVWaWV3IiwiJGVsIiwiZmluZCIsImh0bWwiLCJhcnRpY2xlLWRpciIsImNsaWNrIiwiZWx0IiwidG1wbCIsImVtcHR5IiwidGVtcGxhdGUiLCJtYXBQYXJ0aWFsIiwiTWFya2VyVmlldyIsInRhZ05hbWUiLCJfaW5pdE1hcCIsIk1hcCIsIlRpbGVMYXllciIsInRpbGVMYXllciIsImFkZFRvIiwicmVuZXdWaWV3cyIsIm12IiwibGVnZW5kUGFydGlhbCIsImluaXRNYXJrZXJMYXllciIsImljb25Db25maWciLCJmZWF0dXJlcyIsImljb24iLCJnZW9Kc29uIiwib25FYWNoRmVhdHVyZSIsImZlYXR1cmUiLCJwb3B1cCIsInNldENvbnRlbnQiLCJiaW5kUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicG9pbnRUb0xheWVyIiwibGF0bG5nIiwiY2xpY2thYmxlIiwidGV4dCIsIm1hcmtlcm5hbWUiLCJvcGFjaXR5IiwicmlzZU9uSG92ZXIiLCJtZW51VG1wbCIsIkFydGljbGVNZW51VmlldyIsIml0ZW1zIiwibWVudSIsInByb21pc2VzIiwidGVtcGxhdGVzIiwiY29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uIiwidGVtcGwiLCJjb250ZW50Iiwic29ydGVyIiwic3ViQ29udGVudCIsInNvcnRLZXlzIiwiaiIsIiRsaSIsInJlcGxhY2UiLCJhbXYiLCJFbGVtZW50Iiwibm9kZU5hbWUiLCJvdXRlckhUTUwiLCJjbG9uZSIsImxvY2FsZUNvbXBhcmUiLCJsYWJlbCIsInRoZW4iLCIkZmFpbERlZiIsIlBhZ2VWaWV3IiwiUGFydGlhbFZpZXciLCIkd2F0Y2hEZWYiLCJ0aW1lbGluZUNvbnRyb2xQYXJ0aWFsIiwiVGltZWxpbmVWaWV3IiwiX3RpbWVsaW5lQ29sbGFwc2UiLCJfaGFuZGxlRmlsdGVyIiwibGVnZW5kVGVtcGwiLCJsYXllck1hcmtlcnMiLCJncm91cEJ5IiwiZ2V0Q29udGFpbmVyIiwiT2JqZWN0IiwibGF5ZXJOYW1lIiwia2xhc3MiLCJsYXllckxlZ2VuZCIsIm1hcmtlckxheWVycyIsImxheWVyR3JvdXAiLCJhZGRPdmVybGF5IiwiX2ZpdE1hcmtlckJvdW5kcyIsImVkZ2VQdFgiLCJnZXRWaWV3cG9ydE9mZnNldCIsIngiLCJib3VuZHMiLCJsYXRMbmdCb3VuZHMiLCJsbmdMYXQiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwic2xpY2UiLCJsYXRMbmciLCJyZXZlcnNlIiwiZml0Qm91bmRzIiwiZ2V0U2l6ZSIsInBhZGRpbmdCb3R0b21SaWdodCIsImNsaWVudFdpZHRoIiwiaW52YWxpZGF0ZVNpemUiLCIkcG9wdXBXcmFwIiwicG9wdXBMYXRMbmciLCJwb3B1cFJpZ2h0WCIsInBhZCIsImdldENvbnRlbnQiLCJjbG9zZXN0IiwiZmlyc3QiLCJwb2ludCIsImF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQiLCJhdXRvUGFuUGFkZGluZyIsIm9mZnNldCIsInBhbkJ5IiwiZ2V0Qm91bmRzIiwiY29udGFpbnMiLCJzaG93TW9kZWxzIiwiaGlkZU1vZGVscyIsInNob3dJZHMiLCJmaWx0ZXIiLCJtc2ciLCJtZXNzYWdlIiwiY29tcGFyZVRvIiwiQXJ0aWNsZUdhbGxlcnlQb3BvdmVyVmlldyIsIkFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3IiwiQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3IiwiQXJ0aWNsZUdhbGxlcnlWaWV3Iiwib3V0ZXJIZWlnaHQiLCJjc3MiLCJkZWZzIiwiaW1nIiwibG9hZCIsImFtWHNsIiwibWVudWl0ZW0iLCJtb2RhbCIsImtleWJvYXJkIiwic2hvdyIsImxpZ2h0Ym94VGl0bGVUZW1wbCIsIm1hZ25pZmljUG9wdXAiLCJnYWxsZXJ5IiwiZW5hYmxlZCIsImltYWdlIiwidGl0bGVTcmMiLCIkaXRlbSIsIiRwbyIsInBjdCIsInBvcG92ZXJUZW1wbCIsInBvcG92ZXJDb250ZW50VGVtcGwiLCJnZXRBdHRyaWJ1dGUiLCJwb3BvdmVyIiwicGxhY2VtZW50Iiwic2xpZGVzanMiLCJuYXZpZ2F0aW9uIiwiYWN0aXZlIiwiZWZmZWN0IiwicGFnaW5hdGlvbiIsImZhZGUiLCJzcGVlZCIsImNyb3NzZmFkZSIsImNhbGxiYWNrIiwibG9hZGVkIiwibnVtYmVyIiwiJGltZyIsInZpc2liaWxpdHkiLCJtYXhIZWlnaHQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY29tcGxldGUiLCJuZXdJbWciLCJwYXRocyIsImJhY2tib25lIiwiYm9vdHN0cmFwIiwianF1ZXJ5IiwibGVhZmxldCIsImxpZ2h0Ym94IiwidW5kZXJzY29yZSIsInBhcnRpYWxzIiwic2hpbSIsImRlcHMiLCJleHBvcnRzIiwiY29uZmlnZmlsZSIsInJvdXRlcyIsImRlYnVnIl0sIm1hcHBpbmdzIjoiQUFDQUEsT0FBTyx3QkFDSCxTQUNBLGFBQ0EsV0FDQSxrQkFDRCxTQUFTQyxFQUFFQyxFQUFFQyxFQUFTQyxHQUNyQixZQUNBLElBQUlDLEdBQXFCRixFQUFTRyxXQUFXQyxRQUN6Q0MsTUFBT0osR0FFWCxPQUFPQztBQ1ZYTCxPQUFPLHdCQUNILFNBQ0EsYUFDQSxXQUNBLHdCQUNELFNBQVNDLEVBQUVDLEVBQUVDLEVBQVNNLEdBQ3JCLFlBQ0EsSUFBSUMsR0FBcUJQLEVBQVNHLFdBQVdDLFFBQ3pDQyxNQUFPQyxHQUVYLE9BQU9DO0FDWFhWLE9BQU8sK0JBQ0QsVUFDQSxNQUNILFNBQVVXLEVBQUVDLEdBQ1gsTUFBSUQsR0FBRUUsUUFBUUMsU0FBaUJILEdBQy9CQSxFQUFFRSxRQUFRQyxTQUFXSCxFQUFFRSxRQUFRTixRQUN6QlEsU0FDTUMsWUFBYSxPQUNiQyxPQUFRLElBQ1JDLE1BQU8sSUFDUEMsUUFBVUMsS0FBTSxFQUFHQyxNQUFPLEVBQUdDLElBQUssR0FBSUMsT0FBUSxHQUM5Q0MsV0FBVyxFQUNYQyxNQUFRQyxVQUFVLEdBQ2xCQyxHQUFLLEtBQ0xDLE1BQVEsV0FDUkMsU0FBVSxXQUVoQkMsV0FBYSxTQUFTQyxFQUFLQyxFQUFRakIsR0FDakMsR0FBSWtCLEdBQU9DLElBQ1h2QixHQUFFd0IsS0FBS0MsV0FBV0YsS0FBTW5CLEdBQ3hCbUIs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TyxNQUFPLFdBRVRSLFVBQ0lRLE1BQVMsU0FBVSxjQUNuQkMsUUFBVyxZQUVmSixZQUNJSSxRQUFXLEtBRWY3SSxNQUNJNEksU0FFSjNCLFVBQ0kyQixNQUFPLFdBRVhKLFVBQ0VJLE1BQU8sY0FJYnpMLFNBQ0ksU0FDQSxvQkFDQSxtQkFDQSxnQkFDQSxZQUNBLGFBQ0QsU0FBU2pWLEVBQUUyVCxFQUFlQyxFQUFjOUgsRUFBT3dKLEdBQzlDLFlBQ0EsSUFBSXNMLEdBQWE1Z0IsRUFBRSxTQUFTMEUsS0FBSyxjQUM3QmtjLEdBQ0E1Z0IsRUFBRXFTLFFBQVF1TyxFQUFZLFNBQVNwWCxHQUMzQixJQUNJLEdBQUk4TCxHQUNKLEdBQUl4SixJQUNFK1UsT0FBUXJYLEVBQVd1SyxNQUFNOE0sT0FDekJwWixPQUFRK0IsSUFFaEIsTUFBTzJGLEdBQ0EzRixFQUFXc1gsT0FDWixHQUFJbE4sSUFDQXJULE1BQU8sR0FBSW9ULElBQ1BxSixJQUFLN04sRUFBRUMsa0JBS3hCVSxLQUFLLFNBQVN3QyxFQUFPbEYsRUFBWUYsR0FDaEMsR0FBSTBHLElBQ0FyVCxNQUFPLEdBQUlvVCxJQUNQcUosSUFBSyxvQ0FBc0M0RCxFQUFhLEtBQU8xVCxRQUszRSxHQUFJMEcsSUFDQXJULE1BQU8sR0FBSW9ULElBQ1BxSixJQUFLIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnY29sbGVjdGlvbnMvYXJ0aWNsZXMnLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICd1bmRlcnNjb3JlJywgXG4gICAgJ2JhY2tib25lJyxcbiAgICAnbW9kZWxzL2FydGljbGUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQXJ0aWNsZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlc0NvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBBcnRpY2xlTW9kZWxcbiAgICB9KTsgICAgXG4gICAgcmV0dXJuIEFydGljbGVzQ29sbGVjdGlvbjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21vZGVscy90aW1lbGluZS9pdGVtJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLFRpbWVsaW5lSXRlbU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBUaW1lbGluZUNvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG4gICAgICAgIG1vZGVsOiBUaW1lbGluZUl0ZW1Nb2RlbFxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVGltZWxpbmVDb2xsZWN0aW9uO1xufSk7XG4iLCJkZWZpbmUoJ2NvbnRyb2xzL0wuQ29udHJvbC5UaW1lbGluZScsIFtcbiAgICAgICdsZWFmbGV0J1xuICAgICwgJ2QzJ1xuXSwgZnVuY3Rpb24gKEwsZDMpIHtcbiAgICBpZiAoTC5Db250cm9sLlRpbWVsaW5lKSByZXR1cm4gTDtcbiAgICBMLkNvbnRyb2wuVGltZWxpbmUgPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgb3JpZW50YXRpb246ICdsZWZ0J1xuICAgICAgICAgICAgICAsIGhlaWdodDogNTAwXG4gICAgICAgICAgICAgICwgd2lkdGg6IDEwMFxuICAgICAgICAgICAgICAsIG1hcmdpbjogeyBsZWZ0OiAzLCByaWdodDogMywgdG9wOiAxMCwgYm90dG9tOiA1IH1cbiAgICAgICAgICAgICAgLCBjb2xsYXBzZWQ6IHRydWVcbiAgICAgICAgICAgICAgLCBpdGVtIDoge21pbkhlaWdodDoxfVxuICAgICAgICAgICAgICAsIG9uIDogbnVsbCAvLyBicnVzaGVuZDogbnVsbFxuICAgICAgICAgICAgICAsIHRpdGxlIDogJ1RpbWVsaW5lJ1xuICAgICAgICAgICAgICAsIHBvc2l0aW9uOiBcInRvcGxlZnRcIlxuICAgICAgICB9XG4gICAgICAgICwgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uKG1hcCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBMLlV0aWwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG1hcDtcbiAgICAgICAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUgbGVhZmxldC1jb250cm9sJyk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgICAgIEwuRG9tVXRpbC5hZGRDbGFzcyhjb250YWluZXIsICdsZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUtY29sbGFwc2VkJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZSA9IHRoaXMuX3RvZ2dsZSA9IEwuRG9tVXRpbC5jcmVhdGUoJ2EnLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLXRvZ2dsZScsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgdG9nZ2xlLnRpdGxlID0gdGhpcy5vcHRpb25zLnRpdGxlO1xuICAgICAgICAgICAgICAgIHRvZ2dsZS5saW5rID0gJyMnO1xuICAgICAgICAgICAgICAgIHZhciBleHBhbmQgPSBmdW5jdGlvbigpIHsgdGhhdC5fZXhwYW5kKCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKEwuQnJvd3Nlci50b3VjaCkge1xuICAgICAgICAgICAgICAgICAgICBMLkRvbUV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odG9nZ2xlLCAnY2xpY2snLCBleHBhbmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKGNvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFMLkJyb3dzZXIudG91Y2gpIHtcbiAgICAgICAgICAgICAgICBMLkRvbUV2ZW50LmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEwuRG9tRXZlbnQub24odGhpcy5fY29udGFpbmVyLCAnY2xpY2snLCBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgICwgb25SZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gZG8gYW55IGNsZWFudXAgaGVyZVxuICAgICAgICB9XG4gICAgICAgICwgb25BZGQ6IGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICAsIF9leHBhbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHRoYXQuX2V4cGFuZGVkKSByZXR1cm47XG4gICAgICAgICAgICB0aGF0Ll9leHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9tYXAub24oJ2NsaWNrJywgdGhpcy5fY29sbGFwc2UsIHRoaXMpO1xuXG4gICAgICAgICAgICBMLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuXG4gICAgICAgICAgICB2YXIgaW5uZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuaGVpZ2h0IC0gdGhpcy5vcHRpb25zLm1hcmdpbi50b3AgICAtIHRoaXMub3B0aW9ucy5tYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIGlubmVyV2lkdGggID0gdGhpcy5vcHRpb25zLndpZHRoICAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQgLSB0aGlzLm9wdGlvbnMubWFyZ2luLmxlZnQ7XG5cbiAgICAgICAgICAgIHZhciB4U2NhbGUgPSB0aGlzLl94U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbMCxpbm5lcldpZHRoXSk7XG5cbiAgICAgICAgICAgIHZhciB5U2NhbGUgPSB0aGlzLl95U2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgIC5kb21haW4oW3RoaXMuX3NvdXJjZS5zdGFydCx0aGlzLl9zb3VyY2UuZW5kXSlcbiAgICAgICAgICAgICAgICAucmFuZ2UoWzAsaW5uZXJIZWlnaHRdKTtcblxuICAgICAgICAgICAgdmFyIHRpbWVsaW5lID0gdGhpcy5fdGltZWxpbmUgPSBkMy5zZWxlY3QoJy5sZWFmbGV0LWNvbnRyb2wtdGltZWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3RpbWVsaW5lJylcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCB0aGlzLm9wdGlvbnMud2lkdGgpO1xuXG4gICAgICAgICAgICB2YXIgYmFuZCA9IHRpbWVsaW5lLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2lkJywnYmFuZCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgKGlubmVyV2lkdGgvMiAtIHRoaXMub3B0aW9ucy5tYXJnaW4ucmlnaHQpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBpbm5lckhlaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICAgICAgICAndHJhbnNsYXRlKCcgKyAuMjUqaW5uZXJXaWR0aCArICcsJyArIHRoaXMub3B0aW9ucy5tYXJnaW4udG9wICsgICcpJ1xuICAgICAgICAgICAgICAgICAgICArICcgc2NhbGUoLjc1IDEuMCknXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gYmFuZC5zZWxlY3RBbGwoJ2cnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHRoaXMuX3NvdXJjZS5nZXRJdGVtcygpKVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywndGltZWxpbmUtaXRlbScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLm1heChbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pdGVtLm1pbkhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB5U2NhbGUoZC5kdXJhdGlvbigpKVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsaW5uZXJXaWR0aClcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zbGF0ZSgwLCAnICsgeVNjYWxlKGQuc3RhcnQpICsgJyknO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgYnJ1c2ggPSB0aGlzLl9icnVzaCA9IGQzLnN2Zy5icnVzaCgpXG4gICAgICAgICAgICAgICAgLnkoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vbignYnJ1c2hlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dFN0YXJ0ID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dEVuZCAgID0geVNjYWxlKGJydXNoLmV4dGVudCgpWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgLCBzZWxlY3RlZCA6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHRTdGFydCAhPT0gZXh0RW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJyNiYW5kJykuc2VsZWN0QWxsKCdyZWN0LnRpbWVsaW5lLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoeVNjYWxlKGkuc3RhcnQpIDw9IGV4dEVuZCkgJiYgKHlTY2FsZShpLmVuZCkgICA+PSBleHRTdGFydCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc2VsZWN0ZWQucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5jbGVhciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zLm9uLmJydXNoZW5kKHJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciB5QnJ1c2ggPSBiYW5kLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdicnVzaCcpXG4gICAgICAgICAgICAgICAgLmNhbGwoYnJ1c2gpO1xuICAgICAgICAgICAgeUJydXNoLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJyxpbm5lcldpZHRoKTtcblxuICAgICAgICAgICAgdmFyIHlBeGlzID0gdGltZWxpbmUuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAuYXR0cignaWQnLCdheGlzJylcbiAgICAgICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywndHJhbnNsYXRlKCcgKyAoKC4yNSppbm5lcldpZHRoKSAtIHRoaXMub3B0aW9ucy5tYXJnaW4ubGVmdCkgKyAnLCcgKyB0aGlzLm9wdGlvbnMubWFyZ2luLnRvcCArICAnKScpO1xuXG4gICAgICAgICAgICB2YXIgYXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgICAgICAuc2NhbGUoeVNjYWxlKVxuICAgICAgICAgICAgICAgIC5vcmllbnQodGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKVxuICAgICAgICAgICAgICAgIC50aWNrU2l6ZSg2LCAwKVxuICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHRoaXMuX3NvdXJjZS50aWNrVmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zb3VyY2UudGlja0Zvcm1hdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlBeGlzLmNhbGwoYXhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfY29sbGFwc2UgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZXhwYW5kZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbi5jb2xsYXBzZSgpOyAvLyBUT0RPOiAjIGQzLnN2Zy5icnVzaCgpIGRlc3RydWN0b3I/XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZWxpbmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBMLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLCAnbGVhZmxldC1jb250cm9sLXRpbWVsaW5lLWNvbGxhcHNlZCcpO1xuICAgICAgICAgICAgTC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY29udHJvbC10aW1lbGluZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgdGhpcy5fbWFwLm9mZignY2xpY2snLCB0aGlzLl9jb2xsYXBzZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBMLmNvbnRyb2wudGltZWxpbmUgPSBmdW5jdGlvbihtYXAsc291cmNlLG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMLkNvbnRyb2wuVGltZWxpbmUobWFwLHNvdXJjZSxvcHRpb25zKTtcbiAgICB9O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9pc3N1ZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICd2aWV3cy9pc3N1ZSdcbiAgICAsICdtb2RlbHMvaXNzdWUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixBc3luY0luaXQsSXNzdWVWaWV3LElzc3VlTW9kZWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlQ29udHJvbGxlciA9IENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICAgICAgICBtb2RlbDogbnVsbFxuICAgICAgICAsIHZpZXcgOiBudWxsXG4gICAgICAgICwgcm91dGVyOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5yb3V0ZXIgPSBhcmdzLnJvdXRlcjtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgSXNzdWVNb2RlbCh7IGNvbmZpZzogYXJncy5jb25maWcgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgSXNzdWVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGF0Lm1vZGVsXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IGFyZ3MuY29uZmlnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5yZW5kZXIoKTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubW9kZWwuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8oYXJ0aWNsZSwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSAnYXJ0aWNsZS8nICsgYXJ0aWNsZS5nZXQoJ2FydGljbGVpZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5yb3V0ZXIubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlckFydGljbGUoYXJ0aWNsZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBJc3N1ZUNvbnRyb2xsZXI7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbW9kZWxzL21hcCdcbiAgICAsICd2aWV3cy9tYXAnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbiAgICAsICdjb250cm9sbGVycy9tYXAvcGFuJ1xuICAgICwgJ2NvbnRyb2xsZXJzL21hcC9sYXllcidcbiAgICAsICdjb250cm9sbGVycy9tYXAvdGltZWxpbmUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixNYXBNb2RlbCxNYXBWaWV3LEFzeW5jSW5pdCxNYXBQYW5Db250cm9sbGVyLE1hcExheWVyQ29udHJvbGxlcixNYXBUaW1lbGluZUNvbnRyb2xsZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcENvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbW9kZWw6IG51bGxcbiAgICAgICAgLCB2aWV3OiAgbnVsbFxuICAgICAgICAsIGlzc3VlOiBudWxsXG4gICAgICAgICwgbWFwUGFuQ29udHJvbGxlciA6IG51bGxcbiAgICAgICAgLCBNYXBMYXllckNvbnRyb2xsZXIgOiBudWxsXG4gICAgICAgICwgbWFwVGltZWxpbmVDb250cm9sbGVyIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgIHRoYXQucm91dGVyID0gYXJncy5yb3V0ZXI7XG4gICAgICAgICAgICB0aGF0Lmlzc3VlID0gYXJncy5pc3N1ZTtcbiAgICAgICAgICAgIHRoYXQubW9kZWwgPSBuZXcgTWFwTW9kZWwoYXJncyk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgTWFwVmlldyh7XG4gICAgICAgICAgICAgICAgICBtb2RlbDogIHRoYXQubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdC5yb3V0ZXJcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiB0aGF0Lmlzc3VlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQudmlldy5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIgPSBuZXcgTWFwUGFuQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgIG1hcDogdGhhdC52aWV3Lm1hcFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubWFwTGF5ZXJDb250cm9sbGVyID0gbmV3IE1hcExheWVyQ29udHJvbGxlcih7XG4gICAgICAgICAgICAgICAgICAgICAgdmlld3MgOiB0aGF0LnZpZXcubWFya2VyVmlld3NcbiAgICAgICAgICAgICAgICAgICAgLCBtYXAgICA6IHRoYXQudmlldy5tYXBcbiAgICAgICAgICAgICAgICAgICAgLCBtYXBjb25maWc6IHRoYXQubW9kZWwuYXR0cmlidXRlcy5tYXBjb25maWdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcFRpbWVsaW5lQ29udHJvbGxlciA9IG5ldyBNYXBUaW1lbGluZUNvbnRyb2xsZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIG1hcmtlclZpZXdzIDogdGhhdC52aWV3Lm1hcmtlclZpZXdzXG4gICAgICAgICAgICAgICAgICAgICwgbWFwICAgICAgICAgOiB0aGF0LnZpZXcubWFwXG4gICAgICAgICAgICAgICAgICAgICwgc2l0ZWNvbmZpZyAgOiB0aGF0Lm1vZGVsLmF0dHJpYnV0ZXMuY29uZmlnXG4gICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0aGF0Ll9yZWdpc3RlclRpbWVsaW5lTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5Ubyh0aGF0LnZpZXcsICdtYXJrZXJzJywgZnVuY3Rpb24obWFya2VyVmlld3Mpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9yZWdpc3Rlck1hcmtlcnMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBhbkNvbnRyb2xsZXIuZml0TWFya2VyQm91bmRzKHRoYXQudmlldy5tYXJrZXJWaWV3cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxbdGhhdC5tb2RlbC5pbml0KCksIHRoYXQudmlldy5pbml0KCldKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfcmVnaXN0ZXJNYXJrZXJzIDogZnVuY3Rpb24obWFya2VyVmlld3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIF8uZm9yRWFjaChtYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldy5tb2RlbCwgJ2FjdGl2ZScsIGZ1bmN0aW9uKGFydGljbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBQb3B1cE9wZW4obWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICd0b2dnbGUnLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUG9wdXBUb2dnbGUobWFya2VyVmlldy5tYXJrZXJMYXllcik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGF0Ll9nZXRNYXJrZXJMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyLCAnZ2V0UG9wdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcmtlciAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQubWFwUGFuQ29udHJvbGxlci5oYW5kbGVQb3B1cFBvc2l0aW9uKG1hcmtlci5nZXRQb3B1cCgpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcsICdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0Lm1hcFBvcHVwT3BlbihldnQpO1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3Lm1vZGVsLnRyaWdnZXIoJ2FjdGl2ZScsIG1hcmtlclZpZXcubW9kZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQubGlzdGVuVG8obWFya2VyVmlldywnbW91c2VvdmVyJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhhdC52aWV3Lm1hcC5ob3ZlclBvcHVwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVucG9wdXBbcG9wdXBpZChtYXBNYXJrZXIuZ2V0TGF0TG5nKCkpXSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub3BlblBvcHVwKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9yZWdpc3RlclRpbWVsaW5lTGlzdGVuZXJzIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQubWFwVGltZWxpbmVDb250cm9sbGVyLCAnc2hvdycsIGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKG1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXJWaWV3Lm1hcmtlckxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJWaWV3LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aWV3Lm1hcC5hZGRMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQubWFwVGltZWxpbmVDb250cm9sbGVyLCAnaGlkZScsIGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKG1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXJrZXJWaWV3Lm1hcmtlckxheWVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC52aWV3Lm1hcC5yZW1vdmVMYXllcihtYXJrZXJWaWV3Lm1hcmtlckxheWVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2dldE1hcmtlckxheWVyIDogZnVuY3Rpb24ob2JqLG1ldGhvZCkge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyLCBsYXllcnM7XG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgTC5MYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2VyTGF5ZXIgPSBvYmo7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzID0gb2JqLmdldExheWVycygpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2JqID0gbGF5ZXJzLnBvcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kIGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlckxheWVyID0gb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhvYmosICdvcmlnaW5hbEV2ZW50JykpIHtcbiAgICAgICAgICAgICAgICBtYXBNYXJrZXJMYXllciA9IG9iai50YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFwTWFya2VyTGF5ZXI7XG4gICAgICAgIH1cbiAgICAgICAgLCBtYXBQb3B1cE9wZW46IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgdmFyIG1hcE1hcmtlckxheWVyID0gdGhpcy5fZ2V0TWFya2VyTGF5ZXIob2JqLCAnb3BlblBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5vcGVuUG9wdXAoKTtcbiAgICAgICAgfVxuICAgICAgICAsIG1hcFBvcHVwVG9nZ2xlOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgIHZhciBtYXBNYXJrZXJMYXllciA9IHRoaXMuX2dldE1hcmtlckxheWVyKG9iaiwgJ3RvZ2dsZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci50b2dnbGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgICAgICwgbWFwUG9wdXBDbG9zZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgbWFwTWFya2VyTGF5ZXIgPSB0aGlzLl9nZXRNYXJrZXJMYXllcihvYmosICdjbG9zZVBvcHVwJyk7XG4gICAgICAgICAgICBpZiAoIW1hcE1hcmtlckxheWVyKSByZXR1cm47XG4gICAgICAgICAgICBtYXBNYXJrZXJMYXllci5jbG9zZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBDb250cm9sbGVyLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBDb250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9wcm90b3R5cGUnLCBbXG4gICAgICAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKF8sQmFja2JvbmUpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIENvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5jaWQgPSBfLnVuaXF1ZUlkKCdjb250cm9sbGVyJyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgQ29udHJvbGxlci5leHRlbmQgPSBCYWNrYm9uZS5Sb3V0ZXIuZXh0ZW5kO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCBCYWNrYm9uZS5FdmVudHMpO1xuICAgIF8uZXh0ZW5kKENvbnRyb2xsZXIucHJvdG90eXBlLCB7IFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5pbXBsZW1lbnRlZCBpbml0aWFsaXplKCknKTtcbiAgICAgICAgfSBcbiAgICB9KTtcbiAgICByZXR1cm4gQ29udHJvbGxlcjtcbn0pOyIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvYXN5bmNJbml0JywgW1xuICAgICdqcXVlcnknLFxuICAgICd1bmRlcnNjb3JlJ1xuXSwgZnVuY3Rpb24oJCxfKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBc3luY0luaXQgPSB7XG4gICAgICAgICAgJGRlZjogbnVsbFxuICAgICAgICAsIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRlZi5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBc3luY0luaXQ7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtaXhpbnMvZG9td2F0Y2hlcicsIFtcbiAgICAnanF1ZXJ5JyBcbl0sIGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIERPTVdhdGNoZXIgPSB7XG4gICAgICAgIHdhdGNoRE9NIDogZnVuY3Rpb24obXMsc2VsLCRkZWYpIHtcbiAgICAgICAgICAgIGlmICghc2VsKSB0aHJvdyBcIkVtcHR5IHNlbGVjdG9yIGluIHdhdGNoRE9NKClcIjtcbiAgICAgICAgICAgIGlmICgkKHNlbCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQoc2VsKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9mZignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5vbignRE9NTm9kZUluc2VydGVkJywgZik7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub2ZmKCdET01Ob2RlSW5zZXJ0ZWQnLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9LCBtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRE9NV2F0Y2hlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy9mZXRjaHhtbCcsIFtcbiAgICAnanF1ZXJ5J1xuXSwgZnVuY3Rpb24oJCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgRmV0Y2hYTUwgPSB7XG4gICAgICAgIC8vIHJldHVybiBhbiBvYmplY3QgaW1wbGVtZW50aW5nIHRoZSBQcm9taXNlIGludGVyZmFjZVxuICAgICAgICAvLyB3aGVuIHN1Y2Nlc3NmdWwsIHRoZSBQcm9taXNlIHJldHVybnMgdGhlIGRhdGEgZmV0Y2hlZFxuICAgICAgICAvLyBieSB0aGUgYWpheCByZXF1ZXN0XG4gICAgICAgIC8vIGRhdGEgcmV0dXJuZWQgYnkgdGhlIHByb21pc2UgaXMgYSBEb2N1bWVudFxuICAgICAgICBmZXRjaFhNTCA6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgdmFyICRnZXQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6ICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAneG1sJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAkZ2V0LnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICRnZXQucmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gJGdldC5wcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBGZXRjaFhNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21peGlucy94bWwyaHRtbCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZSdcbl0sIGZ1bmN0aW9uKCQsXykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgWE1MMkhUTUwgPSB7XG4gICAgICAgIF9kb2M6IGZ1bmN0aW9uKHhtbCkge1xuICAgICAgICAgICAgdmFyIHhtbERvYztcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeG1sID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoeG1sLCd0ZXh0L3htbCcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh4bWwgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgICAgICAgICAgIHhtbERvYyA9IHhtbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGRvY3VtZW50IGlucHV0IGluIFhNTDJIVE1MXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHhtbERvYyA9PSBudWxsIHx8ICgheG1sRG9jLmhhc093blByb3BlcnR5KCdnZXRFbGVtZW50c0J5VGFnTmFtZScpICYmIHhtbERvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgncGFyc2VyZXJyb3InKS5sZW5ndGggPiAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwYXJzZSBkb2N1bWVudCBpbiB4bWwyaHRtbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4bWxEb2M7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIHJldHVybiBIVE1MIG9yIEpTT04gc3RyaW5nIGZyb20gWFNMVCB0cmFuc2Zvcm1hdGlvblxuICAgICAgICB4bWwyaHRtbDogZnVuY3Rpb24oeG1sLHhzbCxwYXJhbXMsbW9kZSkge1xuICAgICAgICAgICAgdmFyIHhtbERvYyA9IHRoaXMuX2RvYyh4bWwpLFxuICAgICAgICAgICAgICAgIHhzbERvYyA9IHRoaXMuX2RvYyh4c2wpO1xuICAgICAgICAgICAgdmFyIHhzbHRQcm9jZXNzb3IgPSBuZXcgWFNMVFByb2Nlc3NvcigpO1xuICAgICAgICAgICAgeHNsdFByb2Nlc3Nvci5pbXBvcnRTdHlsZXNoZWV0KHhzbERvYyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBfLmVhY2goXy5rZXlzKHBhcmFtcyksIGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHhzbHRQcm9jZXNzb3Iuc2V0UGFyYW1ldGVyKG51bGwsa2V5LHBhcmFtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkb2MgPSB4c2x0UHJvY2Vzc29yLnRyYW5zZm9ybVRvRG9jdW1lbnQoeG1sRG9jKTtcbiAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy88dHJhbnNmb3JtaWl4OnJlc3VsdD4uLi48L3RyYW5zZm9ybWlpeDpyZXN1bHQ+XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRvYy5kb2N1bWVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZG9jLmRvY3VtZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdCA9IGRvYy5ib2R5LmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIGluIFhTTFQgdHJhbnNmb3JtOiAnICsgZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBYTUwySFRNTDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9hcnRpY2xlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ21peGlucy9mZXRjaHhtbCdcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuICAgICwgJ21peGlucy94bWwyaHRtbCdcbiAgICAsICd0ZXh0IXhzbC9nZW9qc29uLnhzbCdcbiAgICAsICd0ZXh0IXhzbC9jaXRlZC1yYW5nZS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsRmV0Y2hYTUwsQXN5bmNJbml0LFhNTDJIVE1MLGdlb0pzb25Yc2wsY2l0ZWRSYW5nZVhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgJGdldCA9IHRoYXQuZmV0Y2hYTUwodGhhdC5nZXQoJ3BhdGgnKSk7XG4gICAgICAgICAgICAkLndoZW4oJGdldCkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ3htbCcsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rR2VvanNvbigpO1xuICAgICAgICAgICAgICAgIHRoYXQuX21rQ2l0ZWRSYW5nZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lmdlb2pzb24gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0KCdwbGFjZVR5cGUnLCB0aGF0Lmdlb2pzb24ucHJvcGVydGllcy5sYXllcik7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgLy9UT0RPOiAneG1sJzogc2VyaWFsaXplPyBhbmQgY2FjaGUgdG8gbG9jYWxzdG9yYWdlXG4gICAgICAgICAgICAvLyBhZGQgYWRhcHRlciBmb3IgYWNjZXNzIHRocm91Z2ggLmF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgXCJ4bWxcIiAgICAgICA6IG51bGwgICAgLy8gRG9jdW1lbnRcbiAgICAgICAgICAgICwgXCJwbGFjZVR5cGVcIiA6IG51bGxcbiAgICAgICAgICAgICwgXCJpY29uVXJsXCIgICA6ICcnXG4gICAgICAgICAgICAsIFwiY2l0ZWRSYW5nZVwiOiB7fVxuICAgICAgICB9LFxuICAgICAgICBnZW9qc29uOiBudWxsLFxuICAgICAgICBnZXRHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb2pzb24gPT09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhpcy5fbWtHZW9qc29uKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW9qc29uO1xuICAgICAgICB9LFxuICAgICAgICBfbWtHZW9qc29uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgZ2VvSnNvblhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW9qc29uID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgZ2VvanNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfbWtDaXRlZFJhbmdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSB0aGlzLnhtbDJodG1sKHRoaXMuZ2V0KCd4bWwnKSwgY2l0ZWRSYW5nZVhzbCwge30sICd0ZXh0Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoJ2NpdGVkUmFuZ2UnLCBKU09OLnBhcnNlKGpzb25TdHJpbmcpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgY2l0ZWQgcmFuZ2UganNvbjogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxGZXRjaFhNTCk7XG4gICAgXy5leHRlbmQoQXJ0aWNsZU1vZGVsLnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNb2RlbC5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvaXNzdWUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2FydGljbGUnXG4gICAgLCAnY29sbGVjdGlvbnMvYXJ0aWNsZXMnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlTW9kZWwsQXJ0aWNsZUNvbGxlY3Rpb24sQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBJc3N1ZU1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZGVmICAgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB2YXIgYXJ0ZGlyICA9IGFyZ3MuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlO1xuICAgICAgICAgICAgaWYgKCFhcnRkaXIubWF0Y2goL1xcLyQvKSkgYXJ0ZGlyICs9ICcvJztcbiAgICAgICAgICAgIHZhciBmaWxlcyAgID0gYXJncy5jb25maWcuYXJ0aWNsZXMuZmlsZXM7XG4gICAgICAgICAgICB2YXIgY29sICAgICA9IG5ldyBBcnRpY2xlQ29sbGVjdGlvbigpO1xuICAgICAgICAgICAgdGhhdC5jb25maWcgPSBhcmdzLmNvbmZpZztcbiAgICAgICAgICAgIHRoYXQuc2V0KCdjb2xsZWN0aW9uJywgY29sKTtcbiAgICAgICAgICAgIC8vIGZpeCBsZW5ndGggb2YgYXJ0aWNsZXMgYXJyYXlcbiAgICAgICAgICAgIHZhciBhcnRpY2xlcyA9IF8ubWFwKF8ucmFuZ2UoZmlsZXMubGVuZ3RoKSwgZnVuY3Rpb24oKXtyZXR1cm4gdW5kZWZpbmVkO30pO1xuICAgICAgICAgICAgLy8gYXJ0aWNsZXMgY29uc3RydWN0ZWQgc3luYywgc28gYXJ0aWNsZSBvYmplY3RzIGFkZGVkIHRvIGxpc3QgYnkgaW5kZXhcbiAgICAgICAgICAgIF8uZWFjaChmaWxlcywgZnVuY3Rpb24oZmlsZSxpKSB7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZXNbaV0gPSBuZXcgQXJ0aWNsZU1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgaSxcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWRpcjogYXJ0ZGlyLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiAgICAgICBhcnRkaXIgKyBmaWxlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBpbml0cyA9IF8ubWFwKGFydGljbGVzLCBmdW5jdGlvbihhcnRpY2xlKXtyZXR1cm4gYXJ0aWNsZS5pbml0KCk7fSk7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkobnVsbCxpbml0cykuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb2wuYWRkKGFydGljbGVzKTtcbiAgICAgICAgICAgICAgICB0aGF0LnNldEljb25zKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGluaXRzLCBmdW5jdGlvbigkcHJvbWlzZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkcHJvbWlzZS5zdGF0ZSgpID09PSAncmVqZWN0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTsgLy8gbm90IHJlLXNldCBvbiBmYWlsdXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYXAgbWFya2VyIGljb25zIGZpbGVuYW1lIHZhbHVlcyBhcmUgc2V0IGhlcmU7IGljb24gY29sb3JzIGFyZSBhc3NpZ25lZFxuICAgICAgICAvLyByYW5kb21seSwgc28gdG8gc3VwcG9ydCBhIGNvbnNpc3RlbmN5IGJldHdlZW4gdGhlIGNvbG9yIGFuZCB0aGUgcGxhY2UtdHlwZVxuICAgICAgICAvLyBsYXllciwgdGhleSBtdXN0IGJlIGFzc2lnbmVkIGFzIGEgZ3JvdXBcbiAgICAgICAgLCBzZXRJY29uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgaWNjb25maWcgID0gdGhhdC5jb25maWcubWFya2Vycy5pY29ucztcbiAgICAgICAgICAgIHZhciBpY29uRmlsZXMgPSBfLnNodWZmbGUoXy5mbGF0dGVuKFxuICAgICAgICAgICAgICAgIF8ubWFwKGljY29uZmlnLCBmdW5jdGlvbihlbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoZW50cnkuZmlsZXMsIGZ1bmN0aW9uKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeS5kaXIuY29uY2F0KGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdEljb25GaWxlID0gaWNvbkZpbGVzLnBvcCgpO1xuICAgICAgICAgICAgdmFyIGljb25zID0gW107XG4gICAgICAgICAgICAvLyBkbyBtYXAgbWFya2VyIGljb24gaW5pdGlhbGl6YXRpb247IHRoaXMgc2VlbXMgbGlrZSBpdCBzaG91bGRcbiAgICAgICAgICAgIC8vIGJlIGlzb2xhdGVkIHRvIHRoZSBNYXBWaWV3IG9yIE1hcmtlclZpZXcsIGJ1dCBpcyBkYXRhIHVzZWRcbiAgICAgICAgICAgIC8vIGVsc2V3aGVyZSBpbiB0aGUgYXBwbGljYXRpb24sIHNvIHRoZXkgYXJlIGFzc2lnbmVkIGhlcmVcbiAgICAgICAgICAgIHRoYXQuZ2V0KCdjb2xsZWN0aW9uJykuZm9yRWFjaChmdW5jdGlvbihhcnRpY2xlLGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvanNvbiA9IChhcnRpY2xlLmdldEdlb2pzb24oKSB8fCB7XCJwcm9wZXJ0aWVzXCI6e319KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBnZW9qc29uLnByb3BlcnRpZXMubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWNvbnNbbGF5ZXJdID0gaWNvbnNbbGF5ZXJdIHx8IGljb25GaWxlcy5wb3AoKSB8fCBkZWZhdWx0SWNvbkZpbGU7XG4gICAgICAgICAgICAgICAgYXJ0aWNsZS5zZXQoJ2ljb25VcmwnLCBpY29uc1tsYXllcl0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0dXJuIGFydGljbGUgb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gYXJndW1lbnQ7XG4gICAgICAgIC8vIGFyZ3VtZW50IG1heSBiZSBlaXRoZXIgYW4gaW5kZXggaW50byB0aGUgY29sbGVjdGlvblxuICAgICAgICAvLyAoZS5nLiwgd2hlbiBwcm92aWRlZCBieSBhIHVybCkgb3IgYW4gQXJ0aWNsZU1vZGVsXG4gICAgICAgIC8vIChlLmcuLCB3aGVuIHNlbGVjdGVkIGJ5IGEgbWFwIG1hcmtlcikgXG4gICAgICAgICwgZ2V0QXJ0aWNsZTogZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgdmFyIGFydDtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aGlzLmdldCgnY29sbGVjdGlvbicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGFydCA9IGFydGljbGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcnRpY2xlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJ0aWNsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBhcnQgPSBjb2wuYXQoYXJ0aWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXJ0O1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoSXNzdWVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gSXNzdWVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9tYXAnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICQuZ2V0SlNPTihhcmdzLmNvbmZpZy5tYXAuY29uZmlnLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhhdC5zZXQoJ21hcGNvbmZpZycsIGRhdGEpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihqcXhociwgdGV4dFN0YXR1cywgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvYWQgbWFwIGNvbmZpZyBmaWxlOiAnICsgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0czoge1xuICAgICAgICAgICAgXCJtYXBjb25maWdcIiA6IHt9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWFwTW9kZWwucHJvdG90eXBlLEFzeW5jSW5pdCk7XG4gICAgcmV0dXJuIE1hcE1vZGVsO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUgKi9cbmRlZmluZSgnbW9kZWxzL3RpbWVsaW5lJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2NvbGxlY3Rpb25zL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy90aW1lbGluZS9pdGVtJ1xuICAgICwgJ21peGlucy9hc3luY0luaXQnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsVGltZWxpbmVDb2xsZWN0aW9uLFRpbWVsaW5lSXRlbSxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIFRpbWVsaW5lTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgc3RhcnQ6IG51bGxcbiAgICAgICAgLCBlbmQ6IG51bGxcbiAgICAgICAgLCBzaXRlY29uZmlnIDogbnVsbFxuICAgICAgICAsIGJvb2tjb25maWcgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICB0aGF0LnNpdGVjb25maWcgPSBhcmdzLnNpdGVjb25maWc7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkLmdldEpTT04odGhhdC5zaXRlY29uZmlnLmJvb2suZmlsZSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoYXQuYm9va2NvbmZpZyA9IGRhdGEuYm9vaztcbiAgICAgICAgICAgICAgICB0aGF0Ll9pbml0aWFsaXplKCk7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgX2luaXRpYWxpemUgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBjb2wgPSBuZXcgVGltZWxpbmVDb2xsZWN0aW9uKCk7XG4gICAgICAgICAgICB0aGF0LnNldCgnY29sbGVjdGlvbicsIGNvbCk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IG1hcmtlclZpZXcubW9kZWw7XG4gICAgICAgICAgICAgICAgdmFyIGJvb2tDaGFwdGVyID0gXy5maW5kV2hlcmUodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgcGFydCAgICA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5wYXJ0XG4gICAgICAgICAgICAgICAgICAgICwgY2hhcHRlciA6IG1vZGVsLmF0dHJpYnV0ZXMuY2l0ZWRSYW5nZS5jaGFwdGVyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFib29rQ2hhcHRlcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGJvb2tDaGFwdGVyLnBhcmFncmFwaHMuc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBtb2RlbC5hdHRyaWJ1dGVzLmNpdGVkUmFuZ2UucGFyYWdyYXBoO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIDE7XG4gICAgICAgICAgICAgICAgY29sLmFkZChuZXcgVGltZWxpbmVJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgLCBlbmQ6IGVuZFxuICAgICAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXc6IG1hcmtlclZpZXdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBfLm1pbih0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLnN0YXJ0O1xuICAgICAgICAgICAgfSkucGFyYWdyYXBocy5zdGFydDtcbiAgICAgICAgICAgIHRoYXQuZW5kID0gXy5tYXgodGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzLCBmdW5jdGlvbihjaGFwdGVyKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcHRlci5wYXJhZ3JhcGhzLmVuZDtcbiAgICAgICAgICAgIH0pLnBhcmFncmFwaHMuZW5kO1xuICAgICAgICB9XG4gICAgICAgICwgZ2V0SXRlbXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscztcbiAgICAgICAgfVxuICAgICAgICAsIHRpY2tWYWx1ZXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBfLm1hcCh0aGlzLmJvb2tjb25maWcuY2hhcHRlcnMsIGZ1bmN0aW9uKGNoYXB0ZXIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFwdGVyLnBhcmFncmFwaHMuc3RhcnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhbHVlcy5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYS1iOyB9KTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgLCB0aWNrRm9ybWF0IDogZnVuY3Rpb24ocCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBpLGNoYXB0ZXI7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoYXQuYm9va2NvbmZpZy5jaGFwdGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFwdGVyID0gdGhhdC5ib29rY29uZmlnLmNoYXB0ZXJzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAocCA8PSBjaGFwdGVyLnBhcmFncmFwaHMuZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gY2hhcHRlci5jaGFwdGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmxhbmsgdGljayBmb3IgZW5kIG9mIGJvb2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09PSB0aGF0LmJvb2tjb25maWcuY2hhcHRlcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuXG4gICAgICAgICAgICBfLmZpbmRJbmRleCh0aGlzLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLmNpZCA9PT0gdGltZWxpbmVJdGVtLmNpZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICghaSkgcmV0dXJuO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb2xsZWN0aW9uJykuZ2V0KGkpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoVGltZWxpbmVNb2RlbC5wcm90b3R5cGUsQXN5bmNJbml0KTtcbiAgICByZXR1cm4gVGltZWxpbmVNb2RlbDtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3JvdXRlcy9yb3V0ZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbW9kZWxzL2Vycm9yL3VzZXInXG4gICAgLCAndmlld3MvZXJyb3IvdXNlcidcbiAgICAsICd2aWV3cy9jbGVhcidcbiAgICAsICdjb250cm9sbGVycy9pc3N1ZSdcbiAgICAsICdjb250cm9sbGVycy9tYXAnXG4gICAgLCAndmlld3MvbWVudSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LENsZWFyVmlldyxJc3N1ZUNvbnRyb2xsZXIsTWFwQ29udHJvbGxlcixNZW51Vmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XG4gICAgICAgICAgcGFnZXMgICA6IHt9ICAgLy8gY29uZmlnIGZvciBzdXBwb3J0ZWQgcGFnZXNcbiAgICAgICAgLCBjb25maWcgIDoge30gICAvLyBnbG9iYWwgc2l0ZSBjb25maWd1cmF0aW9uLCBpLmUuLCBzaXRlLmpzb25cbiAgICAgICAgLCBpc3N1ZUNvbnRyb2xsZXIgOiBudWxsIC8vIElzc3VlTW9kZWwgZm9yIHRoaXMgYXBwXG4gICAgICAgICwgbWFwQ29udHJvbGxlciAgIDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ICAgID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gb3B0cy5jb25maWc7XG4gICAgICAgICAgICB0aGlzLnBhZ2VzICA9IG9wdHMuY29uZmlnLnBhZ2VzO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIgPSBuZXcgSXNzdWVDb250cm9sbGVyKHtcbiAgICAgICAgICAgICAgICAgIHJvdXRlcjogdGhpc1xuICAgICAgICAgICAgICAgICwgY29uZmlnOiB0aGlzLmNvbmZpZyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZUNvbnRyb2xsZXIuaW5pdCgpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMucm91dGVyLmhpc3RvcnkgPSB0cnVlIGJ5IGRlZmF1bHQsIGlmIG1pc3NpbmdcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXModGhhdC5wYWdlcy5yb3V0ZXIsJ2hpc3RvcnknKSAmJiAhIXRoYXQucGFnZXMucm91dGVyLmhpc3RvcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgICwgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChCYWNrYm9uZS5oaXN0b3J5LmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCxvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAsIHBhZ2U6IGZ1bmN0aW9uKHBhZ2UpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHZhciBwYWdlQ29uZmlnO1xuICAgICAgICAgICAgdmFyIG1hcFBhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYWdlKSBwYWdlID0gdGhpcy5wYWdlcy5ob21lO1xuICAgICAgICAgICAgICAgIHBhZ2VDb25maWcgPSB0aGlzLnBhZ2VzLnBhZ2VzW3BhZ2VdO1xuICAgICAgICAgICAgICAgIGlmIChwYWdlQ29uZmlnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBjb25maWcgaW4gcm91dGVyL3BhZ2UnKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlKCc0MDQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ldyBDbGVhclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIF8uZWFjaChwYWdlQ29uZmlnLCBmdW5jdGlvbihwYykge1xuICAgICAgICAgICAgICAgIHZhciB2aWV3TmFtZTtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IHRoYXQuY29uZmlnXG4gICAgICAgICAgICAgICAgICAgICwgaXNzdWU6ICB0aGF0Lmlzc3VlQ29udHJvbGxlci5tb2RlbFxuICAgICAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gY2xvbmUgY29uZmlnIHRvIGF2b2lkIGdsb2JhbCBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGMpKTtcbiAgICAgICAgICAgICAgICBpZiAoXy5oYXMoY29uZmlnLCAndmlldycpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdOYW1lID0gY29uZmlnLnZpZXc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfLmhhcyhjb25maWcsICdwYXJ0aWFsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld05hbWUgPSAndmlld3MvcGFydGlhbCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYXJ0aWFsLnBhZ2UgPSB0aGF0LnBhZ2VzLnBhdGhCYXNlICsgY29uZmlnLnBhcnRpYWwucGFnZTtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IF8uZXh0ZW5kKGFyZ3MsY29uZmlnLnBhcnRpYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5oYXMoY29uZmcsICdmdWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBjb25maWcuZnVsbC5wYWdlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBwYWdlIHR5cGUgaW4gcm91dGVyOiAnICsgcGFnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PT0gJ3ZpZXdzL21hcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyID0gbmV3IE1hcENvbnRyb2xsZXIoYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcFBhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW3ZpZXdOYW1lXSwgZnVuY3Rpb24oVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmlldyhhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYucmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFtYXBQYWdlKSB0aGF0Lm1hcENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgICwgYXJ0aWNsZSA6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgYXJncyA9IHtcbiAgICAgICAgICAgICAgICAgIGNvbmZpZzogdGhhdC5jb25maWdcbiAgICAgICAgICAgICAgICAsIGlzc3VlOiAgdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWxcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhhdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICgkKCcjdGl0bGVwYWdlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICQoJyN0aXRsZXBhZ2UnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkKCcjcGFnZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcjcGFnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoYXQubWFwQ29udHJvbGxlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwQ29udHJvbGxlciA9IG5ldyBNYXBDb250cm9sbGVyKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQoJyNtZW51JykuY2hpbGRyZW4oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTWVudVZpZXcoYXJncykucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZWxlY3QgdGhlIGFydGljbGUgaW5kaWNhdGVkIGJ5IHRoZSB1cmwncyByb3V0ZSBvbmx5IGFmdGVyXG4gICAgICAgICAgICAvLyB0aGUgbWFwIGhhcyBpbml0aWFsaXplZFxuICAgICAgICAgICAgdGhhdC5tYXBDb250cm9sbGVyLmluaXQoKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnRpY2xlID0gdGhhdC5pc3N1ZUNvbnRyb2xsZXIubW9kZWwuZ2V0QXJ0aWNsZShpZCk7IFxuICAgICAgICAgICAgICAgIGFydGljbGUudHJpZ2dlcignYWN0aXZlJywgYXJ0aWNsZSk7XG4gICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFJvdXRlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ3ZpZXdzL2FwcCcsIFtcbiAgICAnanF1ZXJ5JyxcbiAgICAndW5kZXJzY29yZScsXG4gICAgJ2JhY2tib25lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBzaWduYWwgPSB7fTtcbiAgICB2YXIgQXBwVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXBwVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnknXG4gICAgLCAnbWl4aW5zL3htbDJodG1sJ1xuICAgICwgJ3RleHQheHNsL2FydGljbGUueHNsJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEdhbGxlcnlWaWV3LFhNTDJIVE1MLHhzbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGlkOiAnYXJ0aWNsZScsXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC4kZWwgPSAkKCcjJyArIHRoYXQuaWQpO1xuICAgICAgICAgICAgaWYgKHRoYXQuJGVsLmZpbmQoJyMnICsgdGhhdC5tb2RlbC5jaWQpLmxlbmd0aCAhPT0gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHRoaXMueG1sMmh0bWwoXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5nZXQoJ3htbCcpLCB4c2wsIFxuICAgICAgICAgICAgICAgIHtcImFydGljbGUtZGlyXCI6IHRoYXQuY29uZmlnLmFydGljbGVzLnBhdGhCYXNlXG4gICAgICAgICAgICAgICAgLCBcImljb25VcmxcIiAgICA6IHRoYXQubW9kZWwuZ2V0KCdpY29uVXJsJylcbiAgICAgICAgICAgICAgICAsIFwiY2lkXCIgICAgICAgIDogdGhhdC5tb2RlbC5jaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAkKCcuYXJ0aWNsZS1jb250ZW50JykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgJCgnIycrdGhpcy5pZCkuYXBwZW5kKGh0bWwpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYXJ0aWNsZSBsb2FkIGVycm9yOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgR2FsbGVyeVZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnI2Zvb3RlcicpLnJlbW92ZSgpXG4gICAgICAgICAgICAgICAgJCgnYXJ0aWNsZScpLnJlbW92ZUNsYXNzKCdiZWZvcmUtZm9vdGVyJykuYWRkQ2xhc3MoJ25vLWZvb3RlcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhhdC4kZWwuZmluZCgnLmFydGljbGUtbWFya2VyJykuY2xpY2soZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB0aGF0Lm1vZGVsLnRyaWdnZXIoJ3RvZ2dsZScsIHRoYXQubW9kZWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfSxcbiAgICB9KTtcbiAgICBfLmV4dGVuZChBcnRpY2xlVmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvY2xlYXInLCBbXG4gICAgJ2pxdWVyeScsXG4gICAgJ3VuZGVyc2NvcmUnLFxuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBDbGVhclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKCdib2R5JykuZW1wdHkoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBDbGVhclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2lzc3VlJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaXNzdWUuaHRtbCdcbiAgICAsICd2aWV3cy9hcnRpY2xlJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHRtcGwsQXJ0aWNsZVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIElzc3VlVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICAgICAgICAgJyNpc3N1ZScsXG4gICAgICAgIHRlbXBsYXRlOiAgIF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuY29uZmlnID0gYXJncy5jb25maWc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRtcGwpO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXJBcnRpY2xlOiBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICBuZXcgQXJ0aWNsZVZpZXcoe1xuICAgICAgICAgICAgICAgICAgbW9kZWw6ICBhcnRpY2xlXG4gICAgICAgICAgICAgICAgLCBjb25maWc6IHRoaXMubW9kZWwuY29uZmlnXG4gICAgICAgICAgICAgICAgLCBpc3N1ZTogIHRoaXNcbiAgICAgICAgICAgICAgICAsIHJvdXRlcjogdGhpcy5tb2RlbC5yb3V0ZXJcbiAgICAgICAgICAgIH0pLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIElzc3VlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWFwJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ2xlYWZsZXQnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXAuaHRtbCdcbiAgICAsICd2aWV3cy9tYXJrZXInXG4gICAgLCAnbWl4aW5zL2FzeW5jSW5pdCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxMLG1hcFBhcnRpYWwsTWFya2VyVmlldyxBc3luY0luaXQpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICAgICAgJ21hcCdcbiAgICAgICAgLCB0YWdOYW1lOiAnZGl2J1xuICAgICAgICAsIG1hcmtlclZpZXdzOiBbXSAvLyBzdWJ2aWV3c1xuICAgICAgICAsIG1hcGNvbmZpZzoge31cbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gYXJncy5tb2RlbDtcbiAgICAgICAgICAgIHRoYXQuaXNzdWUgPSBhcmdzLmlzc3VlO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LFt0aGF0Lmlzc3VlLmluaXQoKSwgdGhhdC5tb2RlbC5pbml0KCldKS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwY29uZmlnID0gdGhhdC5tb2RlbC5nZXQoJ21hcGNvbmZpZycpO1xuICAgICAgICAgICAgICAgIGlmICgkKCcjJyArIHRoaXMuaWQpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoJCgnIycgKyB0aGlzLmlkKS5jaGlsZHJlbigpLmxlbmd0aCA+IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGF0Ll9pbml0TWFwKCk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQuJGRlZi5yZXNvbHZlKHRoYXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCBfaW5pdE1hcCA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhpcy5pZCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZChtYXBQYXJ0aWFsKTtcbiAgICAgICAgICAgICAgICB0aGF0Lm1hcCA9IG5ldyBMLk1hcCh0aGF0Lm1hcGNvbmZpZy5pZCwgdGhhdC5tYXBjb25maWcubWFwKTtcbiAgICAgICAgICAgICAgICBuZXcgTC5UaWxlTGF5ZXIodGhhdC5tYXBjb25maWcudGlsZUxheWVyLnVybCwgdGhhdC5tYXBjb25maWcudGlsZUxheWVyLm9wdHMpLmFkZFRvKHRoYXQubWFwKTtcbiAgICAgICAgICAgICAgICBuZXcgTC5jb250cm9sLnNjYWxlKHRoYXQubWFwY29uZmlnLnNjYWxlKS5hZGRUbyh0aGF0Lm1hcCk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRoYXQubWFya2VyVmlld3MgPSBfLm1hcCh0aGF0Lmlzc3VlLmdldCgnY29sbGVjdGlvbicpLm1vZGVscywgZnVuY3Rpb24oYXJ0aWNsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtlclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCAgICAgOiBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcCAgICAgICA6IHRoYXQubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZyA6IHRoYXQubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICwgcmVuZXdWaWV3cyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IF8ubWFwKHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJykubW9kZWxzLCBmdW5jdGlvbihhcnRpY2xlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhcnRpY2xlLm1hcmtlclZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZS5tYXJrZXJWaWV3ID0gbmV3IE1hcmtlclZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCAgICAgOiBhcnRpY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcCAgICAgICA6IHRoYXQubWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAsIG1hcGNvbmZpZyA6IHRoYXQubWFwY29uZmlnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJ0aWNsZS5tYXJrZXJWaWV3O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmZvckVhY2godGhhdC5tYXJrZXJWaWV3cywgZnVuY3Rpb24obXYpIHsgbXYucmVuZGVyKCk7IH0pO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtYXJrZXJzJywgdGhhdC5tYXJrZXJWaWV3cyk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5faW5pdE1hcCgpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHRoYXQubWFya2VyVmlld3MsIGZ1bmN0aW9uKG12KSB7IG12LnJlbmRlcigpIH0pO1xuICAgICAgICAgICAgdGhhdC50cmlnZ2VyKCdtYXJrZXJzJywgdGhhdC5tYXJrZXJWaWV3cyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBfLmV4dGVuZChNYXBWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBNYXBWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9tYXJrZXInLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXIuaHRtbCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21hcmtlci1sZWdlbmQuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSx0bXBsLGxlZ2VuZFBhcnRpYWwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1hcmtlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbClcbiAgICAgICAgLCBlbDogJydcbiAgICAgICAgLCBtYXJrZXJMYXllcjogbnVsbFxuICAgICAgICAsIG1hcDogbnVsbFxuICAgICAgICAsIG1hcGNvbmZpZzogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICB0aGF0Lm1hcGNvbmZpZyA9IGFyZ3MubWFwY29uZmlnO1xuICAgICAgICAgICAgdGhhdC5pbml0TWFya2VyTGF5ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAsIGluaXRNYXJrZXJMYXllciA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgICAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGdlb2pzb24gPSB0aGlzLm1vZGVsLmdldEdlb2pzb24oKTtcbiAgICAgICAgICAgIHZhciBpY29uQ29uZmlnID0gdGhhdC5tYXBjb25maWcuZmVhdHVyZXMuaWNvbjtcbiAgICAgICAgICAgIGljb25Db25maWcuaWNvblVybCA9ICh0aGlzLm1vZGVsLmdldCgnaWNvblVybCcpIHx8ICcnKTtcbiAgICAgICAgICAgIHZhciBpY29uID0gTC5pY29uKGljb25Db25maWcpO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJMYXllciA9IEwuZ2VvSnNvbihnZW9qc29uLCB7XG4gICAgICAgICAgICAgICAgb25FYWNoRmVhdHVyZTogZnVuY3Rpb24gKGZlYXR1cmUsIG1hcE1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIHBvcHVwIHRvIHRoaXMgbWFya2VyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IEwucG9wdXAodGhhdC5tYXBjb25maWcuZmVhdHVyZXMucG9wdXApO1xuICAgICAgICAgICAgICAgICAgICBwb3B1cC5zZXRDb250ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC50ZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJ0aWNsZWlkOiAgdGhhdC5tb2RlbC5nZXQoJ2FydGljbGVpZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb2pzb246ICAgIHRoYXQubW9kZWwuZ2V0R2VvanNvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIuYmluZFBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgY2xpY2sgaGFuZGxlciBmb3IgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtlciwgd2hpY2ggd291bGQgY2xvc2UgdGhlIHBvcHVwIGlmIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlcmUgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ2NsaWNrJywgZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcE1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoJ21vdXNlb3ZlcicsIGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcG9pbnRUb0xheWVyOiBmdW5jdGlvbiAoZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiAgICAgICAgOiBpY29uXG4gICAgICAgICAgICAgICAgICAgICAgICAsIGNsaWNrYWJsZSAgIDogISFmZWF0dXJlLnByb3BlcnRpZXMudGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLCB0aXRsZSAgICAgICA6IChmZWF0dXJlLnByb3BlcnRpZXMubWFya2VybmFtZSB8fCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICwgb3BhY2l0eSAgICAgOiB0aGF0Lm1hcGNvbmZpZy5mZWF0dXJlcy5vcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAsIHJpc2VPbkhvdmVyIDogdGhhdC5tYXBjb25maWcuZmVhdHVyZXMucmlzZU9uSG92ZXJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5tYXJrZXJMYXllci5hZGRUbyh0aGlzLm1hcCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gTWFya2VyVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvbWVudScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL21lbnUuaHRtbCdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL21lbnUnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbWVudVRtcGwsRE9NV2F0Y2hlcixBcnRpY2xlTWVudVZpZXcpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIE1lbnVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICB0ZW1wbGF0ZTogXy50ZW1wbGF0ZShtZW51VG1wbCksXG4gICAgICAgICAgaWQ6ICAgICAgJ21lbnUnXG4gICAgICAgICwgdGFnTmFtZTogJ2RpdidcbiAgICAgICAgLCBpc3N1ZTogICBudWxsXG4gICAgICAgICwgY29uZmlnOiAge31cbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGFyZ3MuY29uZmlnO1xuICAgICAgICAgICAgdGhpcy5pc3N1ZSAgPSBhcmdzLmlzc3VlO1xuICAgICAgICB9LFxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKCQoJyMnICsgdGhhdC5pZCkuY2hpbGRyZW4oKS5sZW5ndGggIT09IDApIHJldHVybjtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuY29uZmlnLm1lbnU7XG4gICAgICAgICAgICAvLyByZW5kZXIgZWFjaCBpdGVtIGZyb20gdGhlIGNvbmZpZyBmaWxlIHRvIGEgPGxpPlxuICAgICAgICAgICAgLy8gbXVzdCBiZSBkb25lIGFzeW5jIGR1ZSB0byByZXRyaWV2YWwgb2YgcGFydGlhbCBmaWxlc1xuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgLy8gY2FjaGUgb2YgdGVtcGxhdGUgc3RyaW5nczogdXJsID0+IHRlbXBsXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVzID0ge307XG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbnMgPSB7fTtcbiAgICAgICAgICAgIF8uZWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVzW2l0ZW0ucGFydGlhbF0gPSAnJztcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVudScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpdGVtLmNvbGxlY3Rpb24gPT09IFwiY29sbGVjdGlvbnMvYXJ0aWNsZXNcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXSA9IHRoYXQuaXNzdWUuZ2V0KCdjb2xsZWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmhhbmRsZWQgY29sbGVjdGlvbiB0eXBlIHJlcXVlc3RlZDogXCIgKyBpdGVtLmNvbGxlY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfLmVhY2goXy5rZXlzKHRlbXBsYXRlcyksIGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgIHZhciAkZGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIHJlcXVpcmUoWyd0ZXh0IScgKyB1cmxdLCBmdW5jdGlvbih0ZW1wbCkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXNbdXJsXSA9IF8udGVtcGxhdGUodGVtcGwpO1xuICAgICAgICAgICAgICAgICAgICAkZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKCRkZWYucHJvbWlzZSgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gcmVuZGVyIHRoZSBtZW51IGFzIGEgPGRpdj5cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gJyc7XG4gICAgICAgICAgICAkLndoZW4uYXBwbHkoJCwgcHJvbWlzZXMpLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtLGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGl0ZW0ucGFydGlhbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvcnRlciA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViQ29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc29ydEtleXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3BhZ2UnIHx8IGl0ZW0udHlwZSA9PT0gJ3NlcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gKHRlbXBsYXRlc1t1cmxdKShpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbnNbaXRlbS5jb2xsZWN0aW9uXS5tb2RlbHMuZm9yRWFjaChmdW5jdGlvbihtb2RlbCxqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhyZWYgICAgPSBpdGVtLml0ZW0uaHJlZi5yZXBsYWNlKCc6aScsIGopO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbXYgICAgID0gbmV3IEFydGljbGVNZW51Vmlldyh7bW9kZWw6bW9kZWx9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ICA9IGFtdi5yZW5kZXIoe2hyZWY6ICcjJyArIGhyZWZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGxpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgYW4gPGxpPiBlbGVtZW50IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxpID0gJChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnQk9EWScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRsaSA9ICQocmVzdWx0LmlubmVySFRNTCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lm5vZGVOYW1lID09PSAnTEknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbGkgPSAkKHJlc3VsdC5vdXRlckhUTUwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBkb2N1bWVudCBlbGVtZW50IGZvciBzdWJtZW51OiAnICsgcmVzdWx0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCByZXN1bHQgdHlwZSBmb3Igc3VibWVudTogJyArIHJlc3VsdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5hdHRyKCdkYXRhLXNvcnQta2V5JyldID0gJGxpLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVyWyRsaS5maW5kKCdhJykudGV4dCgpXSA9ICRsaS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29ydEtleXMgPSBfLmtleXMoc29ydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRLZXlzLnNvcnQoZnVuY3Rpb24oYSxiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubG9jYWxlQ29tcGFyZShiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHNvcnRLZXlzLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRlbnQgKz0gc29ydGVyW2tleV1bMF0ub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICh0ZW1wbGF0ZXNbdXJsXSkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBzdWJDb250ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcjJyArIHRoYXQuaWQpLmVtcHR5KCkuYXBwZW5kKHRoYXQudGVtcGxhdGUoe2NvbnRlbnQ6IGNvbnRlbnR9KSk7XG4gICAgICAgICAgICAgICAgLy8gY29uZmlybSB0aGF0IHRoZSBtZW51IGhhcyBsb2FkZWRcbiAgICAgICAgICAgICAgICB2YXIgJGZhaWxEZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJGZhaWxEZWYuZmFpbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoYXQud2F0Y2hET00oNTAwLCAnIycgKyB0aGF0LmlkLCAkZmFpbERlZik7XG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBidWlsZCBtZW51LlwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoTWVudVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNZW51Vmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFnZScsIFtcbiAgICAnanF1ZXJ5JywgXG4gICAgJ3VuZGVyc2NvcmUnLCBcbiAgICAnYmFja2JvbmUnLFxuICAgICdtaXhpbnMvZG9td2F0Y2hlcicsXG4gICAgJ3RleHQhcGFydGlhbHMvcGFnZS5odG1sJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIscGFnZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgUGFnZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgIGVsOiAnYm9keScsXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAkZGVmLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGF0LmVsKS5hcHBlbmQocGFnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMud2F0Y2hET00oMTAwMCx0aGF0LmVsLCRkZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFnZVZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBQYWdlVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvcGFydGlhbCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdtaXhpbnMvZG9td2F0Y2hlcidcbiAgICAsICdtaXhpbnMvYXN5bmNJbml0J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLERPTVdhdGNoZXIsQXN5bmNJbml0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBQYXJ0aWFsVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgZWw6ICcnLFxuICAgICAgICBwYWdlOiAnJyxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAgICAgdmFyIHRoYXQgID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQuZWwgICA9IG9wdHMuZWw7XG4gICAgICAgICAgICB0aGF0LiRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICByZXF1aXJlKFsndGV4dCEnICsgb3B0cy5wYWdlXSwgZnVuY3Rpb24oaHRtbCkge1xuICAgICAgICAgICAgICAgIHRoYXQucGFnZSA9IGh0bWw7XG4gICAgICAgICAgICAgICAgdGhhdC4kZGVmLnJlc29sdmUodGhhdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJHdhdGNoRGVmID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgdGhhdC5pbml0KCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoYXQuZWwpLmFwcGVuZCh0aGF0LnBhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsdGhhdC5lbCwkd2F0Y2hEZWYpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXy5leHRlbmQoUGFydGlhbFZpZXcucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIF8uZXh0ZW5kKFBhcnRpYWxWaWV3LnByb3RvdHlwZSxBc3luY0luaXQpO1xuICAgIHJldHVybiBQYXJ0aWFsVmlldztcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgndmlld3MvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnbGVhZmxldCdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL3RpbWVsaW5lLmh0bWwnXG4gICAgLCAnY29udHJvbHMvTC5Db250cm9sLlRpbWVsaW5lJ1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLEwsdGltZWxpbmVDb250cm9sUGFydGlhbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAndGltZWxpbmUnXG4gICAgICAgICwgbWFwOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tYXAgPSBhcmdzLm1hcDtcbiAgICAgICAgfVxuICAgICAgICAsIF90aW1lbGluZUNvbGxhcHNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGF0Ll9oYW5kbGVGaWx0ZXIoe2NsZWFyOnRydWV9KTtcbiAgICAgICAgfVxuICAgICAgICAsIF9oYW5kbGVGaWx0ZXIgOiBmdW5jdGlvbihzZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdmaWx0ZXInLCBzZWxlY3RlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC5tb2RlbC5pbml0KCkuZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0LnRpbWVsaW5lID0gTC5jb250cm9sLnRpbWVsaW5lKHRoYXQubWFwLHRoYXQubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHsgICBvbjogeyBicnVzaGVuZDogZnVuY3Rpb24oYSkgeyB0aGF0Ll9oYW5kbGVGaWx0ZXIoYSk7ICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGNvbGxhcHNlOiBmdW5jdGlvbigpICB7IHRoYXQuX3RpbWVsaW5lQ29sbGFwc2UoKTsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVWaWV3O1xufSk7XG5cbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ2NvbnRyb2xsZXJzL21hcC9sYXllcicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9tYXJrZXItbGVnZW5kLmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixsZWdlbmRQYXJ0aWFsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBMYXllckNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgdmlld3MgIDogbnVsbFxuICAgICAgICAsIHJvdXRlciA6IG51bGxcbiAgICAgICAgLCBtYXAgICAgOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC52aWV3cyA9IGFyZ3Mudmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXBjb25maWcgPSBhcmdzLm1hcGNvbmZpZzsgICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBsZWdlbmRUZW1wbCA9IF8udGVtcGxhdGUobGVnZW5kUGFydGlhbCk7XG4gICAgICAgICAgICB2YXIgbGF5ZXJNYXJrZXJzID0gXy5ncm91cEJ5KHRoYXQudmlld3MsIGZ1bmN0aW9uKG1hcmtlclZpZXcpe1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXJrZXJWaWV3Lm1vZGVsLmdldEdlb2pzb24oKS5wcm9wZXJ0aWVzLmxheWVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgY29udHJvbCA9IEwuY29udHJvbC5sYXllcnMobnVsbCwgbnVsbCwgdGhhdC5tYXBjb25maWcuY29udHJvbC5sYXllcnMub3B0aW9ucykuYWRkVG8odGhhdC5tYXApO1xuICAgICAgICAgICAgLy8gZGlzYWJsZSBtb3VzZW92ZXIvbW91c2VvdXQgZXZlbnRzIGZvciB0aGlzIGNvbnRyb2wsIHdoaWNoIGFyZSBzZXQgYnkgZGVmYXVsdCBpbiBcbiAgICAgICAgICAgIC8vIExlYWZsZXQ7IGVuYWJsZXMgJ2NsaWNrJyBjb250cm9sXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udHJvbC5nZXRDb250YWluZXIoKTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChPYmplY3Qua2V5cyhjb250YWluZXIpLCBmdW5jdGlvbihrZXkpe1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3ZlcicpKVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgY29udGFpbmVyW2tleV0pO1xuICAgICAgICAgICAgICAgIGlmIChrZXkubWF0Y2goJ21vdXNlb3V0JykpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGNvbnRhaW5lcltrZXldKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5lYWNoKF8ua2V5cyhsYXllck1hcmtlcnMpLCBmdW5jdGlvbihsYXllck5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2xhc3MgPSBsYXllck5hbWUucmVwbGFjZSgvXFxzKy9nLCAnLScpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllckxlZ2VuZCA9IGxlZ2VuZFRlbXBsKHtcbiAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiBsYXllck1hcmtlcnNbbGF5ZXJOYW1lXVswXS5tb2RlbC5nZXQoJ2ljb25VcmwnKVxuICAgICAgICAgICAgICAgICAgICAsIHRpdGxlICA6IGxheWVyTmFtZVxuICAgICAgICAgICAgICAgICAgICAsIGtsYXNzICA6IGtsYXNzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlckxheWVycyA9IF8ubWFwKGxheWVyTWFya2Vyc1tsYXllck5hbWVdLCBmdW5jdGlvbih2aWV3KXsgcmV0dXJuIHZpZXcubWFya2VyTGF5ZXI7IH0pO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEwubGF5ZXJHcm91cChtYXJrZXJMYXllcnMpO1xuICAgICAgICAgICAgICAgIGNvbnRyb2wuYWRkT3ZlcmxheShsYXllcixsYXllckxlZ2VuZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJ2lucHV0LmxlYWZsZXQtY29udHJvbC1sYXllcnMtc2VsZWN0b3InKS5lYWNoKGZ1bmN0aW9uKGksZWx0KSB7XG4gICAgICAgICAgICAgICAkKGVsdCkuY2xpY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcExheWVyQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lKi9cbmRlZmluZSgnY29udHJvbGxlcnMvbWFwL3BhbicsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICdjb250cm9sbGVycy9wcm90b3R5cGUnXG4gICAgLCAnbWl4aW5zL2RvbXdhdGNoZXInXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsQ29udHJvbGxlcixET01XYXRjaGVyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBQYW5Db250cm9sbGVyID0gQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICAgIG1hcDogbnVsbFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHRoaXMubWFwID0gYXJncy5tYXA7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWFwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuaW5pdGlhbGl6ZWQgbWFwXCIpO1xuICAgICAgICB9XG4gICAgICAgICwgX2ZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKTtcbiAgICAgICAgICAgIGlmICghZWx0KSByZXR1cm47XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCA9IEwuRG9tVXRpbC5nZXRWaWV3cG9ydE9mZnNldChlbHQpLng7XG4gICAgICAgICAgICB2YXIgYm91bmRzID0gTC5sYXRMbmdCb3VuZHMoXy5tYXAobWFya2VyVmlld3MsZnVuY3Rpb24obWFya2VyVmlldykge1xuICAgICAgICAgICAgICAgIHZhciBsbmdMYXQgPSBtYXJrZXJWaWV3Lm1vZGVsLmdldEdlb2pzb24oKS5nZW9tZXRyeS5jb29yZGluYXRlcy5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gTC5sYXRMbmcobG5nTGF0LnJldmVyc2UoKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAoZWRnZVB0WCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlZGdlUHRYICE9IHRoYXQubWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIHVuZGVybmVhdGggYXJ0aWNsZVxuICAgICAgICAgICAgICAgIHRoYXQubWFwLmZpdEJvdW5kcyhib3VuZHMsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhZGRpbmdCb3R0b21SaWdodCcgOiBbZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAtIGVkZ2VQdFgsMF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIGJlc2lkZSBhcnRpY2xlXG4gICAgICAgICAgICAgICAgdGhhdC5tYXAuZml0Qm91bmRzKGJvdW5kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGF0Lm1hcC5pbnZhbGlkYXRlU2l6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkanVzdCBtYXAgcGFuL3pvb20gdG8gbWFrZSBhbGwgbWFwIG1hcmtlcnMgb2NjdXIgdG8gdGhlIFxuICAgICAgICAvLyBsZWZ0IG9mIGRpdiNhcnRpY2xlIGluIHdpZGUgbW9kZVxuICAgICAgICAsIGZpdE1hcmtlckJvdW5kcyA6IGZ1bmN0aW9uKG1hcmtlclZpZXdzKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgJGRlZiA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICRkZWYudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9maXRNYXJrZXJCb3VuZHMobWFya2VyVmlld3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLndhdGNoRE9NKDEwMDAsJyNhcnRpY2xlJywkZGVmKTtcbiAgICAgICAgfVxuICAgICAgICAsIGhhbmRsZVBvcHVwUG9zaXRpb24gOiBmdW5jdGlvbihwb3B1cCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIG1hcCA9IHRoYXQubWFwO1xuICAgICAgICAgICAgdmFyIGlkID0gJChwb3B1cC5nZXRDb250ZW50KCkpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB2YXIgZWRnZVB0WCwgJHBvcHVwV3JhcCwgcG9wdXBMYXRMbmcsIHBvcHVwUmlnaHRYLCBwYWQ7XG4gICAgICAgICAgICBwb3B1cExhdExuZyA9IHBvcHVwLmdldExhdExuZygpO1xuICAgICAgICAgICAgaWYgKHBvcHVwTGF0TG5nID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgIGVkZ2VQdFggPSBMLkRvbVV0aWwuZ2V0Vmlld3BvcnRPZmZzZXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FydGljbGUnKSkueDtcbiAgICAgICAgICAgIC8vIG1hcCBzaG91bGQgcGFuIHJpZ2h0L2Vhc3QgaWYgdGhlIHBvcHVwIGJhbGxvb24gaXMgY292ZXJlZCBieSB0aGUgYXJ0aWNsZTtcbiAgICAgICAgICAgIC8vIHBhZCBpcyBhIHNsaWdodCByZWxpZWYgYmV0d2VlbiB0aGUgcG9wdXAgYW5kIHRoZSBhcnRpY2xlXG4gICAgICAgICAgICAkcG9wdXBXcmFwID0gJCgnIycgKyBpZCkuY2xvc2VzdCgnLmxlYWZsZXQtcG9wdXAtY29udGVudC13cmFwcGVyJykuZmlyc3QoKTtcbiAgICAgICAgICAgIHBhZCA9IEwucG9pbnQocG9wdXAub3B0aW9ucy5hdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0IHx8IHBvcHVwLm9wdGlvbnMuYXV0b1BhblBhZGRpbmcpO1xuICAgICAgICAgICAgcGFkID0gcGFkID8gcGFkLnggOiAwO1xuICAgICAgICAgICAgcG9wdXBSaWdodFggPSAoJHBvcHVwV3JhcC5sZW5ndGggPiAwKSBcbiAgICAgICAgICAgICAgICA/ICRwb3B1cFdyYXAub2Zmc2V0KCkubGVmdCArICRwb3B1cFdyYXAud2lkdGgoKSArIHBhZFxuICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIGlmIChlZGdlUHRYICE9IDAgJiYgcG9wdXBSaWdodFggPiBlZGdlUHRYICYmIGVkZ2VQdFggIT0gbWFwLmdldFNpemUoKS54KSB7XG4gICAgICAgICAgICAgICAgbWFwLnBhbkJ5KFtwb3B1cFJpZ2h0WCAtIGVkZ2VQdFgsMF0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghbWFwLmdldEJvdW5kcygpLmNvbnRhaW5zKHBvcHVwLmdldExhdExuZygpKSkge1xuICAgICAgICAgICAgICAgIG1hcC5jbG9zZVBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgICAgICBtYXAub3BlblBvcHVwKHBvcHVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKE1hcFBhbkNvbnRyb2xsZXIucHJvdG90eXBlLERPTVdhdGNoZXIpO1xuICAgIHJldHVybiBNYXBQYW5Db250cm9sbGVyO1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCdjb250cm9sbGVycy9tYXAvdGltZWxpbmUnLCBbXG4gICAgICAnanF1ZXJ5J1xuICAgICwgJ3VuZGVyc2NvcmUnXG4gICAgLCAnYmFja2JvbmUnXG4gICAgLCAnY29udHJvbGxlcnMvcHJvdG90eXBlJ1xuICAgICwgJ3ZpZXdzL3RpbWVsaW5lJ1xuICAgICwgJ21vZGVscy90aW1lbGluZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxDb250cm9sbGVyLFRpbWVsaW5lVmlldyxUaW1lbGluZU1vZGVsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBNYXBUaW1lbGluZUNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmV4dGVuZCh7XG4gICAgICAgICAgbWFwICAgIDogbnVsbFxuICAgICAgICAsIG1vZGVsICA6IG51bGxcbiAgICAgICAgLCB2aWV3ICAgOiBudWxsXG4gICAgICAgICwgc2l0ZWNvbmZpZzogbnVsbFxuICAgICAgICAsIG1hcmtlclZpZXdzOiBudWxsXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgdGhhdC52aWV3cyA9IGFyZ3Mudmlld3M7XG4gICAgICAgICAgICB0aGF0Lm1hcCA9IGFyZ3MubWFwO1xuICAgICAgICAgICAgdGhhdC5tYXJrZXJWaWV3cyA9IGFyZ3MubWFya2VyVmlld3M7XG4gICAgICAgICAgICBfLmZvckVhY2goYXJncy5tYXJrZXJWaWV3cywgZnVuY3Rpb24obWFya2VyVmlldyl7XG4gICAgICAgICAgICAgICAgdGhhdC5saXN0ZW5UbyhtYXJrZXJWaWV3Lm1vZGVsLCAnc2hvdycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGF0Lmxpc3RlblRvKG1hcmtlclZpZXcubW9kZWwsICdoaWRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0Lm1vZGVsID0gbmV3IFRpbWVsaW5lTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgc2l0ZWNvbmZpZyAgOiBhcmdzLnNpdGVjb25maWdcbiAgICAgICAgICAgICAgICAsIG1hcmtlclZpZXdzIDogYXJncy5tYXJrZXJWaWV3c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGF0LnZpZXcgPSBuZXcgVGltZWxpbmVWaWV3KHtcbiAgICAgICAgICAgICAgICAgIG1vZGVsIDogdGhhdC5tb2RlbFxuICAgICAgICAgICAgICAgICwgbWFwICAgOiB0aGF0Lm1hcFxuICAgICAgICAgICAgICAgICwgbWFya2VyVmlld3MgOiBhcmdzLm1hcmtlclZpZXdzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlc3VsdHMuY2xlYXIgaXMgYSBmbGFnIHRoYXQgdGhlIGJydXNoIGlzIGVtcHR5XG4gICAgICAgICAgICAvLyByZXN1bHRzLmluY2wgaXMgYW4gYXJyYXkgb2YgTWFwVGltZWxpbmVJdGVtJ3NcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2hvdy9oaWRlIG9uIGxpc3RzIG9mIEFydGljbGVNb2RlbCdzXG4gICAgICAgICAgICB0aGF0Lmxpc3RlblRvKHRoYXQudmlldywgJ2ZpbHRlcicsIGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2hvd01vZGVscywgaGlkZU1vZGVscywgc2hvd0lkcyA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLmNsZWFyKSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dNb2RlbHMgPSBfLm1hcCh0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyVmlldztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignc2hvdycsIHNob3dNb2RlbHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dNb2RlbHMgPSBfLm1hcChyZXN1bHRzLnNlbGVjdGVkLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SWRzW2l0ZW0ubWFya2VyVmlldy5tb2RlbC5jaWRdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubWFya2VyVmlldztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGhpZGVNb2RlbHMgPSBfLmZpbHRlcih0aGF0Lm1hcmtlclZpZXdzLCBmdW5jdGlvbihtYXJrZXJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIShtYXJrZXJWaWV3Lm1vZGVsLmNpZCBpbiBzaG93SWRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoaWRlTW9kZWxzLmxlbmd0aCA+IDApIHRoaXMudHJpZ2dlcignaGlkZScsIGhpZGVNb2RlbHMpXG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG93TW9kZWxzLmxlbmd0aCA+IDApIHRoaXMudHJpZ2dlcignc2hvdycsIHNob3dNb2RlbHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhhdC52aWV3LnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIE1hcFRpbWVsaW5lQ29udHJvbGxlcjtcbn0pO1xuIiwiLypnbG9iYWwgZGVmaW5lICovXG5kZWZpbmUoJ21vZGVscy9lcnJvci91c2VyJywgW1xuICAgICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKEJhY2tib25lKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBVc2VyRXJyb3JNb2RlbCA9IEJhY2tib25lLk1vZGVsLmV4dGVuZCh7XG4gICAgICAgIGRlZmF1bHRzOiB7XG4gICAgICAgICAgICBcIm1zZ1wiIDogXCJcIlxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbihhcmdzKSB7XG4gICAgICAgICAgICB0aGlzLnNldCgnbXNnJywgYXJncy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH0pOyAgICBcbiAgICByZXR1cm4gVXNlckVycm9yTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSAqL1xuZGVmaW5lKCdtb2RlbHMvdGltZWxpbmUvaXRlbScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVGltZWxpbmVJdGVtTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoe1xuICAgICAgICAgIG1hcmtlclZpZXc6IG51bGxcbiAgICAgICAgLCBzdGFydDogbnVsbCAgICAgICAvLyBcImFic29sdXRlXCIgc3RhcnQgKGllLCBwYXJhZ3JhcGggaW5kZXggdy9vIGNoYXB0ZXIpXG4gICAgICAgICwgZW5kOiBudWxsICAgICAgICAgLy8gXCJhYnNvbHV0ZVwiIGVuZFxuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIHRoYXQubWFya2VyVmlldyA9IGFyZ3MubWFya2VyVmlldztcbiAgICAgICAgICAgIHRoYXQuc3RhcnQgPSBhcmdzLnN0YXJ0O1xuICAgICAgICAgICAgdGhhdC5lbmQgPSBhcmdzLmVuZDtcbiAgICAgICAgfVxuICAgICAgICAsIGR1cmF0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVuZC10aGlzLnN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgICwgY29tcGFyZVRvOiBmdW5jdGlvbihiKSB7XG4gICAgICAgICAgICByZXR1cm4gXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gVGltZWxpbmVJdGVtTW9kZWw7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeScsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvcG9wb3ZlcidcbiAgICAsICd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvbGlnaHRib3gnXG4gICAgLCAndmlld3MvYXJ0aWNsZS9nYWxsZXJ5L3NsaWRlcydcbl0sIGZ1bmN0aW9uKCQsXyxCYWNrYm9uZSxBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3LEFydGljbGVHYWxsZXJ5TGlnaHRib3hWaWV3LEFydGljbGVHYWxsZXJ5U2xpZGVzVmlldykge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gYWRqdXN0IGhlaWdodCBvZiBhcnRpY2xlIGJvZHlcbiAgICAgICAgICAgIC8vIFRPRE86IGhhbmRsZSBpbiBjc3NcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKCcjYXJ0aWNsZSBhcnRpY2xlJykuaGVpZ2h0KCkgLSAkKCcjaGVhZGVyJykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAkKCcjYm9keScpLmNzcyh7aGVpZ2h0OmhlaWdodH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyByZW1vdmUgaW1hZ2VzIHRoYXQgZmFpbCB0byBsb2FkLCBzaW5jZSB3ZSBjYW5ub3QgZG9cbiAgICAgICAgICAgIC8vIGEgZmlsZSB0ZXN0IHdoZW4gcnVubmluZyB0aGUgeHNsXG4gICAgICAgICAgICB2YXIgZGVmcyA9IFtdO1xuICAgICAgICAgICAgJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykuZWFjaChmdW5jdGlvbihpLGltZyl7XG4gICAgICAgICAgICAgICAgdmFyICRkZWYgPSAkLkRlZmVycmVkKCk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJChpbWcpLnJlbW92ZUNsYXNzKCdyZW1vdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChpbWcpLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IHNvbWUgdGltZSBiZWZvcmUgZmFpbHVyZVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRlZi5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfSw1MDApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRlZnMucHVzaCgkZGVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJC53aGVuLmFwcGx5KHt9LGRlZnMpLmFsd2F5cyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZS5yZW1vdmUnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAkKCcuaW1hZ2UtbG9hZGluZycpLnJlbW92ZUNsYXNzKCdpbWFnZS1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgbmV3IEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXcoKS5yZW5kZXIoKTtcbiAgICAgICAgICAgICAgICBuZXcgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3KCkucmVuZGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG4vKlxuICogVGhpcyBpcyBtZWFudCB0byBiZSBleHRlbmRlZCBhcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIGZvciB0aGVcbiAqIHNlY3Rpb25zIG9mIGFuIGFydGljbGUuXG4gKi9cbmRlZmluZSgndmlld3MvYXJ0aWNsZS9tZW51JywgW1xuICAgICdqcXVlcnknLCBcbiAgICAndW5kZXJzY29yZScsIFxuICAgICdiYWNrYm9uZScsXG4gICAgJ21peGlucy94bWwyaHRtbCcsXG4gICAgJ3RleHQheHNsL2FydGljbGUtbWVudS54c2wnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsWE1MMkhUTUwsYW1Yc2wpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVNZW51VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIC8vIHRoaXMgdmlldyBpcyBtZWFudCB0byBiZSBjYWxsZWQgb25seSBhZnRlciB0aGUgY29ycmVzcG9uZGluZ1xuICAgICAgICAgICAgLy8gYXJ0aWNsZSBtb2RlbCBoYXMgYmVlbiBpbml0aWFsaXplZFxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwuaW5pdCgpLnN0YXRlKCkgIT09ICdyZXNvbHZlZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlVuaW5pdGlhbGl6ZWQgYXJ0aWNsZSBpbiBBcnRpY2xlTWVudVZpZXdcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZW51aXRlbSA9IHRoYXQueG1sMmh0bWwodGhhdC5tb2RlbC5nZXQoJ3htbCcpLCBhbVhzbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiBtZW51aXRlbTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIF8uZXh0ZW5kKEFydGljbGVNZW51Vmlldy5wcm90b3R5cGUsWE1MMkhUTUwpO1xuICAgIHJldHVybiBBcnRpY2xlTWVudVZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2Vycm9yL3VzZXInLCBbXG4gICAgJ2pxdWVyeScsIFxuICAgICdiYWNrYm9uZScsIFxuICAgICd0ZXh0IXBhcnRpYWxzL2Vycm9yL3VzZXIuaHRtbCdcbl0sIGZ1bmN0aW9uKCQsQmFja2JvbmUsdG1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgVXNlckVycm9yVmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgdGVtcGxhdGU6IF8udGVtcGxhdGUodG1wbCksXG4gICAgICAgIGVsOiAkKCcjZXJyb3JEaWFsb2cnKSxcbiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC5hdHRyaWJ1dGVzKSk7XG4gICAgICAgICAgICB0aGlzLiRlbC5tb2RhbCh7a2V5Ym9hcmQ6IHRydWUsIHNob3c6IHRydWV9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFVzZXJFcnJvclZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9saWdodGJveCcsIFtcbiAgICAgICdqcXVlcnknXG4gICAgLCAndW5kZXJzY29yZSdcbiAgICAsICdiYWNrYm9uZSdcbiAgICAsICd0ZXh0IXBhcnRpYWxzL2xpZ2h0Ym94LXRpdGxlLmh0bWwnXG4gICAgLCAnbGlnaHRib3gnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUsbGlnaHRib3hUaXRsZVRlbXBsKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBBcnRpY2xlR2FsbGVyeUxpZ2h0Ym94VmlldyA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcbiAgICAgICAgICBpZDogJ2FydGljbGUnXG4gICAgICAgICwgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7fVxuICAgICAgICAsIHJlbW92ZTogZnVuY3Rpb24oKSB7IC8qIHJldGFpbiAqL31cbiAgICAgICAgLCByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICQoJy5nYWxsZXJ5LWl0ZW0nKS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGdhbGxlcnk6e1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZVNyYzogZnVuY3Rpb24oJGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9ICRpdGVtLmVsLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHBvID0gJCgnLnBvcG92ZXIuJyArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwY3QgPSBfLnRlbXBsYXRlKGxpZ2h0Ym94VGl0bGVUZW1wbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiAkcG8uZmluZCgnLmF0dHInKS50ZXh0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJy5nbHlwaGljb24uZ2x5cGhpY29uLWV4cGFuZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgJCgnLmdhbGxlcnktaXRlbScpLm1hZ25pZmljUG9wdXAoJ29wZW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlMaWdodGJveFZpZXc7XG59KTtcbiIsIi8qZ2xvYmFsIGRlZmluZSovXG5kZWZpbmUoJ3ZpZXdzL2FydGljbGUvZ2FsbGVyeS9wb3BvdmVyJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG5dLCBmdW5jdGlvbigkLF8sQmFja2JvbmUscG9wb3ZlclRlbXBsLHBvcG92ZXJDb250ZW50VGVtcGwpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgdmFyIEFydGljbGVHYWxsZXJ5UG9wb3ZlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XG4gICAgICAgICAgaWQ6ICdhcnRpY2xlJ1xuICAgICAgICAsIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgLCByZW1vdmU6IGZ1bmN0aW9uKCkgeyAvKiByZXRhaW4gKi99XG4gICAgICAgICwgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBhZGQgcG9wb3ZlcnMgdG8gaW1hZ2VzXG4gICAgICAgICAgICB2YXIgcGN0ID0gXy50ZW1wbGF0ZShwb3BvdmVyQ29udGVudFRlbXBsKTtcbiAgICAgICAgICAgICQoJ2ltZy5zbGlkZXNqcy1zbGlkZScpLmVhY2goZnVuY3Rpb24oaSxlbHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBlbHQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgIHZhciAkcG8gPSAkKCcucG9wb3Zlci4nICsgaWQpO1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICRwby5maW5kKCcuaGVhZCcpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAkKGVsdCkuYXR0cignYWx0JywgJHBvLmZpbmQoJy5kZXNjJykudGV4dCgpKTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IHBjdCh7XG4gICAgICAgICAgICAgICAgICAgIGF0dHI6ICRwby5maW5kKCcuYXR0cicpLnRleHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoZWx0KS5wb3BvdmVyKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBcImJvZHlcIixcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBvcG92ZXJUZW1wbCxcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogXCJob3ZlclwiLFxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ6IFwibGVmdFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJChlbHQpLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAkKGVsdCkucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBBcnRpY2xlR2FsbGVyeVBvcG92ZXJWaWV3O1xufSk7XG4iLCIvKmdsb2JhbCBkZWZpbmUqL1xuZGVmaW5lKCd2aWV3cy9hcnRpY2xlL2dhbGxlcnkvc2xpZGVzJywgW1xuICAgICAgJ2pxdWVyeSdcbiAgICAsICd1bmRlcnNjb3JlJ1xuICAgICwgJ2JhY2tib25lJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci5odG1sJ1xuICAgICwgJ3RleHQhcGFydGlhbHMvaW1hZ2UtcG9wb3Zlci1jb250ZW50Lmh0bWwnXG4gICAgLCAndGV4dCFwYXJ0aWFscy9saWdodGJveC10aXRsZS5odG1sJ1xuICAgICwgJ3NsaWRlc2pzJ1xuICAgICwgJ2xpZ2h0Ym94J1xuXSwgZnVuY3Rpb24oJCxfLEJhY2tib25lLHBvcG92ZXJUZW1wbCxwb3BvdmVyQ29udGVudFRlbXBsLGxpZ2h0Ym94VGl0bGVUZW1wbCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICB2YXIgQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoe1xuICAgICAgICAgIGlkOiAnYXJ0aWNsZSdcbiAgICAgICAgLCBpbml0aWFsaXplOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICwgcmVtb3ZlOiBmdW5jdGlvbigpIHsgLyogcmV0YWluICovfVxuICAgICAgICAsIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgLy8gY29uZmlndXJlIHNsaWRlc2pzOyB1cCB0byBub3csICdkaXNwbGF5Om5vbmUnXG4gICAgICAgICAgICAvLyBoYXMgYXBwbGllZFxuICAgICAgICAgICAgJChcIiNzbGlkZXNcIikuc2xpZGVzanMoe1xuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoJCgnaW1nLnNsaWRlc2pzLXNsaWRlJykubGVuZ3RoID4gMSksXG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdDogXCJmYWRlXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVmZmVjdDoge1xuICAgICAgICAgICAgICAgICAgICBmYWRlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICBjcm9zc2ZhZGU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIG9uIGxvYWQgb2YgZmlyc3QgcGljXG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIChudW1iZXIgLSAxKSArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7dmlzaWJpbGl0eTogXCJoaWRkZW5cIn0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHdpZHRoOiAgJ2F1dG8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhIZWlnaHQ6ICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLmhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtYXhXaWR0aDogICQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAgXCJyZWxhdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gKCQoXCIuc2xpZGVzanMtY29udGFpbmVyXCIpLndpZHRoKCkgLSAkaW1nLndpZHRoKCkpLzI7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IHBhcnNlSW50KCRpbWcuY3NzKCdwYWRkaW5nLWxlZnQnKSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyBsZWZ0OiBsZWZ0IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIHN0YXJ0IG9mIGNoYW5nZSBvZiBwaWMgKGFmdGVyIGZpcnN0KVxuICAgICAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNsaWRlc2pzLWNvbnRyb2xcIikuY2hpbGRyZW4oKS5jc3Moe3Zpc2liaWxpdHk6IFwiaGlkZGVuXCJ9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbGVkIGVuZCBvZiBjaGFuZ2Ugb2YgcGljIChhZnRlciBmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ltZyA9IG51bWJlciAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGltZyA9ICQoXCIuc2xpZGVzanMtY29udHJvbFwiKS5jaGlsZHJlbignOmVxKCcrIG5ld0ltZyArICcpJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW1nLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgd2lkdGg6ICAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heEhlaWdodDogJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG1heFdpZHRoOiAgJChcIi5zbGlkZXNqcy1jb250YWluZXJcIikud2lkdGgoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICBcInJlbGF0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGltZy5jc3MoeyB2aXNpYmlsaXR5OiBcInZpc2libGVcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoYXQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gQXJ0aWNsZUdhbGxlcnlTbGlkZXNWaWV3O1xufSk7XG4iLCJyZXF1aXJlLmNvbmZpZyh7XG4gIHBhdGhzOiB7XG4gICAgICBiYWNrYm9uZSAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYmFja2JvbmUuanMvMS4xLjIvYmFja2JvbmUtbWluJ1xuICAgICwgYm9vdHN0cmFwIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3R3aXR0ZXItYm9vdHN0cmFwLzMuMy41L2pzL2Jvb3RzdHJhcC5taW4nXG4gICAgLCBkMyAgICAgICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZDMvMy41LjYvZDMubWluJ1xuICAgICwganF1ZXJ5ICAgIDogJy8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0yLjEuNC5taW4nXG4gICAgLCBsZWFmbGV0ICAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8wLjcuMy9sZWFmbGV0J1xuICAgICwgbGlnaHRib3ggIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL21hZ25pZmljLXBvcHVwLmpzLzEuMC4wL2pxdWVyeS5tYWduaWZpYy1wb3B1cC5taW4nXG4gICAgLCBzbGlkZXNqcyAgOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvc2xpZGVzanMvMy4wL2pxdWVyeS5zbGlkZXMubWluJ1xuICAgICwgdGV4dCAgICAgIDogJy8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3JlcXVpcmUtdGV4dC8yLjAuMTIvdGV4dC5taW4nXG4gICAgLCB1bmRlcnNjb3JlOiAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvdW5kZXJzY29yZS5qcy8xLjguMy91bmRlcnNjb3JlLW1pbidcbiAgICAsIHBhcnRpYWxzICA6ICcuLi9wYXJ0aWFscydcbiAgICAsIHhzbCAgICAgICA6ICcuLi9zY3JpcHQveHNsJ1xuICAgICwgcGFnZXMgICAgIDogJy4uL3BhZ2VzJ1xuICB9LFxuICBzaGltOiB7XG4gICAgYm9vdHN0cmFwOiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfSxcbiAgICBiYWNrYm9uZToge1xuICAgICAgICAnZGVwcyc6IFsnanF1ZXJ5JywgJ3VuZGVyc2NvcmUnXSxcbiAgICAgICAgJ2V4cG9ydHMnOiAnQmFja2JvbmUnXG4gICAgfSxcbiAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICdleHBvcnRzJzogJ18nXG4gICAgfSxcbiAgICB0ZXh0OiB7XG4gICAgICAgICdkZXBzJzogW11cbiAgICB9LFxuICAgIHNsaWRlc2pzOiB7XG4gICAgICAgIGRlcHM6IFsnanF1ZXJ5J11cbiAgICB9LFxuICAgIGxpZ2h0Ym94OiB7XG4gICAgICBkZXBzOiBbJ2pxdWVyeSddXG4gICAgfVxuICB9XG59KTtcbnJlcXVpcmUoW1xuICAgICdqcXVlcnknLFxuICAgICdtb2RlbHMvZXJyb3IvdXNlcicsXG4gICAgJ3ZpZXdzL2Vycm9yL3VzZXInLFxuICAgICdyb3V0ZXMvcm91dGVyJyxcbiAgICAndmlld3MvYXBwJyxcbiAgICAnYm9vdHN0cmFwJ1xuXSwgZnVuY3Rpb24oJCxVc2VyRXJyb3JNb2RlbCxVc2VyRXJyb3JWaWV3LFJvdXRlcixBcHBWaWV3KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBjb25maWdmaWxlID0gJCgnI21haW4nKS5hdHRyKCdkYXRhLWNvbmZpZycpO1xuICAgIGlmIChjb25maWdmaWxlKSB7XG4gICAgICAgICQuZ2V0SlNPTihjb25maWdmaWxlLCBmdW5jdGlvbihzaXRlY29uZmlnKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ldyBBcHBWaWV3KCk7XG4gICAgICAgICAgICAgICAgbmV3IFJvdXRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgcm91dGVzOiBzaXRlY29uZmlnLnBhZ2VzLnJvdXRlc1xuICAgICAgICAgICAgICAgICAgICAsIGNvbmZpZzogc2l0ZWNvbmZpZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghc2l0ZWNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVXNlckVycm9yVmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogbmV3IFVzZXJFcnJvck1vZGVsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGUudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxeGhyLCB0ZXh0U3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgbmV3IFVzZXJFcnJvclZpZXcoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgICAgICBtc2c6IFwiRmFpbGVkIHRvIGxvYWQgc2l0ZSBjb25maWcgZmlsZSAnXCIgKyBjb25maWdmaWxlICsgXCInIFwiICsgZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBVc2VyRXJyb3JWaWV3KHtcbiAgICAgICAgICAgIG1vZGVsOiBuZXcgVXNlckVycm9yTW9kZWwoe1xuICAgICAgICAgICAgICAgIG1zZzogXCJObyBjb25maWd1cmF0aW9uIGZpbGVuYW1lIHNwZWNpZmllZCBpbiBob21lIHBhZ2UuXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9